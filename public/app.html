<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>CARERING Healthcare - SPA</title>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="profile-modern.css">

  <!-- PWA & Icons -->
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/png" href="images/ai-chat.png">
  <link rel="apple-touch-icon" href="images/ai-chat.png">
  <meta name="theme-color" content="#4a90e2">

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SPA CORE STYLES - Hide/Show Pages
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .page {
      display: none;
      animation: fadeIn 0.3s ease-in-out;
    }

    .page.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Prevent flash of content */
    .mobile-wrapper {
      min-height: 100vh;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PERANGKAT PAGE STYLES
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .device-hero {
      text-align: center;
      margin-top: 10px;
      margin-bottom: 20px;
    }

    .device-hero img {
      width: 140px;
      filter: drop-shadow(8px 8px 16px rgba(163, 177, 198, 0.4)) drop-shadow(-8px -8px 16px rgba(255, 255, 255, 0.3));
      animation: float 4s ease-in-out infinite;
    }

    @keyframes float {
      0% { transform: translateY(0); }
      50% { transform: translateY(-8px); }
      100% { transform: translateY(0); }
    }

    .device-section-title {
      font-size: 1.6em;
      font-weight: 700;
      text-align: center;
      margin-bottom: 15px;
    }

    .device-card {
      background: #e0e5ec;
      padding: 22px;
      border-radius: 22px;
      box-shadow:
        9px 9px 16px rgba(163, 177, 198, 0.6),
        -9px -9px 16px rgba(255, 255, 255, 0.5);
      animation: fadeInUp .4s ease;
      border: none;
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(12px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .device-name {
      font-size: 1.4em;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .battery-bar {
      height: 10px;
      background: #e0e5ec;
      border-radius: 10px;
      margin-top: 6px;
      overflow: hidden;
      box-shadow:
        inset 3px 3px 6px rgba(163, 177, 198, 0.5),
        inset -3px -3px 6px rgba(255, 255, 255, 0.5);
    }

    .battery-fill {
      height: 100%;
      width: 0%;
      background: #27AE60;
      border-radius: 10px;
      transition: width .5s ease;
      box-shadow:
        2px 2px 4px rgba(39, 174, 96, 0.3),
        -2px -2px 4px rgba(46, 204, 113, 0.2);
    }

    .device-actions {
      margin-top: 20px;
      display: grid;
      gap: 12px;
    }

    .action-btn {
      background: #e0e5ec;
      padding: 14px;
      border-radius: 16px;
      display: flex;
      align-items: center;
      gap: 12px;
      cursor: pointer;
      box-shadow:
        6px 6px 12px rgba(163, 177, 198, 0.6),
        -6px -6px 12px rgba(255, 255, 255, 0.5);
      transition: all 0.3s;
      border: none;
    }

    .action-btn:hover {
      box-shadow:
        inset 4px 4px 8px rgba(163, 177, 198, 0.5),
        inset -4px -4px 8px rgba(255, 255, 255, 0.5);
    }

    .action-btn span {
      font-size: 26px;
      color: #4a90e2;
    }

    .action-btn-disconnect {
      background: #e0e5ec !important;
    }

    .action-btn-disconnect:hover {
      box-shadow:
        inset 4px 4px 8px rgba(163, 177, 198, 0.5),
        inset -4px -4px 8px rgba(255, 255, 255, 0.5) !important;
    }

    .action-btn-disconnect span {
      color: #E74C3C !important;
    }

    .no-devices {
      text-align: center;
      padding: 28px;
      background: #e0e5ec;
      border-radius: 20px;
      margin-top: 20px;
      box-shadow:
        9px 9px 16px rgba(163, 177, 198, 0.6),
        -9px -9px 16px rgba(255, 255, 255, 0.5);
      border: none;
    }

    .add-device-btn {
      transition: all 0.3s ease;
      background: #4a90e2 !important;
      box-shadow:
        6px 6px 12px rgba(46, 95, 153, 0.4),
        -6px -6px 12px rgba(74, 144, 226, 0.3) !important;
    }

    .add-device-btn:hover {
      box-shadow:
        inset 4px 4px 8px rgba(46, 95, 153, 0.4),
        inset -4px -4px 8px rgba(74, 144, 226, 0.3) !important;
      transform: translateY(-1px);
    }

    /* BLE Modal */
    .ble-modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
    }

    .ble-modal.show {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .ble-modal-content {
      background: #e0e5ec;
      border-radius: 24px;
      padding: 28px;
      width: 90%;
      max-width: 500px;
      box-shadow:
        9px 9px 16px rgba(163, 177, 198, 0.6),
        -9px -9px 16px rgba(255, 255, 255, 0.5);
      position: relative;
      border: none;
    }

    .ble-modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .ble-modal-title {
      font-size: 1.5em;
      font-weight: 700;
      color: #333;
    }

    .ble-close-btn {
      background: #e0e5ec;
      border: none;
      font-size: 32px;
      cursor: pointer;
      color: #666;
      padding: 0;
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.3s;
      box-shadow:
        4px 4px 8px rgba(163, 177, 198, 0.6),
        -4px -4px 8px rgba(255, 255, 255, 0.5);
    }

    .ble-close-btn:hover {
      box-shadow:
        inset 3px 3px 6px rgba(163, 177, 198, 0.5),
        inset -3px -3px 6px rgba(255, 255, 255, 0.5);
      color: #E74C3C;
    }

    .ble-input-group {
      margin-bottom: 20px;
    }

    .ble-input-label {
      display: block;
      font-size: 0.9em;
      font-weight: 600;
      color: #555;
      margin-bottom: 8px;
    }

    .ble-input {
      width: 100%;
      padding: 14px;
      border: none;
      border-radius: 12px;
      font-size: 1em;
      transition: all 0.3s;
      box-sizing: border-box;
      background: #e0e5ec;
      color: #333;
      box-shadow:
        inset 4px 4px 8px rgba(163, 177, 198, 0.5),
        inset -4px -4px 8px rgba(255, 255, 255, 0.5);
    }

    .ble-input:focus {
      outline: none;
      box-shadow:
        inset 5px 5px 10px rgba(163, 177, 198, 0.6),
        inset -5px -5px 10px rgba(255, 255, 255, 0.6);
    }

    .ble-progress {
      display: none;
      width: 100%;
      height: 6px;
      background: #e0e5ec;
      border-radius: 10px;
      overflow: hidden;
      margin: 20px 0;
      box-shadow:
        inset 3px 3px 6px rgba(163, 177, 198, 0.5),
        inset -3px -3px 6px rgba(255, 255, 255, 0.5);
    }

    .ble-progress.show {
      display: block;
    }

    .ble-progress-bar {
      height: 100%;
      background: #4a90e2;
      width: 0%;
      animation: progress 1.5s ease-in-out infinite;
      border-radius: 10px;
    }

    @keyframes progress {
      0% { width: 0%; }
      50% { width: 70%; }
      100% { width: 100%; }
    }

    .ble-connect-btn {
      width: 100%;
      padding: 16px;
      background: #4a90e2;
      color: white;
      border: none;
      border-radius: 16px;
      font-size: 1.1em;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      transition: all 0.3s;
      box-shadow:
        6px 6px 12px rgba(46, 95, 153, 0.4),
        -6px -6px 12px rgba(74, 144, 226, 0.3);
    }

    .ble-connect-btn:hover:not(:disabled) {
      box-shadow:
        inset 4px 4px 8px rgba(46, 95, 153, 0.4),
        inset -4px -4px 8px rgba(74, 144, 226, 0.3);
      transform: translateY(-1px);
    }

    .ble-connect-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .ble-message {
      margin-top: 16px;
      padding: 12px;
      border-radius: 12px;
      font-size: 0.9em;
      display: none;
      border: none;
    }

    .ble-message.show {
      display: block;
    }

    .ble-message.success {
      background: #e0e5ec;
      color: #27AE60;
      box-shadow:
        inset 3px 3px 6px rgba(163, 177, 198, 0.4),
        inset -3px -3px 6px rgba(255, 255, 255, 0.4);
      border-left: 4px solid #27AE60;
    }

    .ble-message.error {
      background: #e0e5ec;
      color: #E74C3C;
      box-shadow:
        inset 3px 3px 6px rgba(163, 177, 198, 0.4),
        inset -3px -3px 6px rgba(255, 255, 255, 0.4);
      border-left: 4px solid #E74C3C;
    }

    .ble-message.info {
      background: #e0e5ec;
      color: #4a90e2;
      box-shadow:
        inset 3px 3px 6px rgba(163, 177, 198, 0.4),
        inset -3px -3px 6px rgba(255, 255, 255, 0.4);
      border-left: 4px solid #4a90e2;
    }

    /* Enhanced BLE Modal - Guide Section */
    .ble-guide-section {
      margin-bottom: 20px;
    }

    .ble-section-title {
      font-size: 1.1em;
      font-weight: 600;
      color: #333;
      margin: 0 0 12px 0;
    }

    .ble-checklist {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .ble-checklist-item {
      display: flex;
      gap: 12px;
      align-items: flex-start;
      padding: 12px;
      background: rgba(255, 255, 255, 0.5);
      border-radius: 12px;
      border-left: 3px solid #4a90e2;
    }

    .ble-checklist-item .check-icon {
      font-size: 24px;
      color: #4a90e2;
      flex-shrink: 0;
    }

    .ble-checklist-item strong {
      display: block;
      color: #333;
      font-size: 0.95em;
      margin-bottom: 4px;
    }

    .ble-checklist-item p {
      margin: 0;
      color: #666;
      font-size: 0.85em;
      line-height: 1.4;
    }

    /* Info Box */
    .ble-info-box {
      display: flex;
      gap: 12px;
      padding: 14px;
      background: rgba(74, 144, 226, 0.1);
      border-radius: 12px;
      border-left: 3px solid #4a90e2;
      margin-bottom: 20px;
    }

    .ble-info-box .material-symbols-outlined {
      font-size: 24px;
      color: #4a90e2;
      flex-shrink: 0;
    }

    .ble-info-box strong {
      display: block;
      color: #333;
      font-size: 0.95em;
      margin-bottom: 4px;
    }

    .ble-info-box p {
      margin: 0;
      color: #555;
      font-size: 0.85em;
      line-height: 1.5;
    }

    /* Troubleshooting Section */
    .ble-troubleshooting {
      margin-top: 20px;
      border-top: 1px solid rgba(0, 0, 0, 0.1);
      padding-top: 16px;
    }

    .ble-troubleshooting summary {
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 600;
      color: #666;
      font-size: 0.9em;
      padding: 8px;
      border-radius: 8px;
      transition: all 0.2s;
      user-select: none;
    }

    .ble-troubleshooting summary:hover {
      background: rgba(255, 255, 255, 0.5);
      color: #333;
    }

    .ble-troubleshooting summary .material-symbols-outlined {
      font-size: 20px;
      color: #F39C12;
    }

    .ble-troubleshooting[open] summary {
      margin-bottom: 12px;
      color: #333;
    }

    .troubleshooting-content {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .trouble-item {
      padding: 12px;
      background: rgba(255, 255, 255, 0.5);
      border-radius: 8px;
      border-left: 3px solid #F39C12;
    }

    .trouble-item strong {
      display: block;
      color: #333;
      font-size: 0.9em;
      margin-bottom: 4px;
    }

    .trouble-item p {
      margin: 0;
      color: #666;
      font-size: 0.85em;
      line-height: 1.4;
    }

    /* Update modal content untuk scroll */
    .ble-modal-content {
      max-height: 90vh;
      overflow-y: auto;
      scrollbar-width: thin;
      scrollbar-color: rgba(74, 144, 226, 0.3) transparent;
    }

    .ble-modal-content::-webkit-scrollbar {
      width: 6px;
    }

    .ble-modal-content::-webkit-scrollbar-track {
      background: transparent;
    }

    .ble-modal-content::-webkit-scrollbar-thumb {
      background: rgba(74, 144, 226, 0.3);
      border-radius: 10px;
    }

    .ble-modal-content::-webkit-scrollbar-thumb:hover {
      background: rgba(74, 144, 226, 0.5);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       NEWS PAGE - MODERN PROFESSIONAL DESIGN
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

    /* News Header */
    .news-header {
      text-align: center;
      margin-bottom: 35px;
      animation: fadeInDown 0.6s ease-out;
    }

    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .news-main-title {
      font-size: 2.2em;
      font-weight: 800;
      background: linear-gradient(135deg, #FF8400 0%, #007BFF 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 8px;
    }

    .news-subtitle {
      color: #666;
      font-size: 1em;
      font-weight: 400;
    }

    /* Featured Article */
    .news-featured {
      position: relative;
      border-radius: 24px;
      overflow: hidden;
      margin-bottom: 35px;
      height: 420px;
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
      animation: fadeInUp 0.6s ease-out 0.2s both;
      cursor: pointer;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .news-featured:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.25);
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .featured-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s ease;
    }

    .news-featured:hover .featured-image {
      transform: scale(1.05);
    }

    .featured-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 35px 28px;
      background: linear-gradient(to top, rgba(0, 0, 0, 0.9) 0%, rgba(0, 0, 0, 0.6) 60%, transparent 100%);
      color: white;
    }

    .featured-badge {
      display: inline-block;
      background: linear-gradient(135deg, #FF8400, #007BFF);
      color: white;
      padding: 6px 16px;
      border-radius: 20px;
      font-size: 0.75em;
      font-weight: 700;
      letter-spacing: 1px;
      margin-bottom: 12px;
      text-transform: uppercase;
    }

    .featured-title {
      font-size: 1.8em;
      font-weight: 700;
      margin-bottom: 10px;
      line-height: 1.3;
    }

    .featured-excerpt {
      font-size: 1em;
      opacity: 0.9;
      margin-bottom: 18px;
      line-height: 1.5;
    }

    .featured-meta {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .featured-author-img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 2px solid rgba(255, 255, 255, 0.3);
    }

    .featured-author-info {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .featured-author-name {
      font-weight: 600;
      font-size: 0.95em;
    }

    .featured-author-date {
      font-size: 0.85em;
      opacity: 0.8;
    }

    /* Category Filter */
    .news-categories {
      display: flex;
      gap: 10px;
      margin-bottom: 30px;
      overflow-x: auto;
      padding-bottom: 5px;
      animation: fadeIn 0.6s ease-out 0.4s both;
      scrollbar-width: none;
    }

    .news-categories::-webkit-scrollbar {
      display: none;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    .news-category-btn {
      flex-shrink: 0;
      padding: 10px 20px;
      border: 2px solid #e2e8f0;
      border-radius: 25px;
      background: white;
      color: #666;
      font-weight: 600;
      font-size: 0.9em;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Poppins', sans-serif;
    }

    .news-category-btn:hover {
      border-color: #FF8400;
      color: #FF8400;
      transform: translateY(-2px);
    }

    .news-category-btn.active {
      background: linear-gradient(135deg, #FF8400, #007BFF);
      color: white;
      border-color: transparent;
      box-shadow: 0 4px 15px rgba(255, 132, 0, 0.3);
    }

    /* News Grid */
    .news-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 24px;
      margin-bottom: 40px;
    }

    /* News Card */
    .news-card {
      background: white;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      transition: all 0.3s ease;
      cursor: pointer;
      animation: fadeInUp 0.6s ease-out both;
      display: flex;
      flex-direction: column;
    }

    .news-card:nth-child(1) { animation-delay: 0.5s; }
    .news-card:nth-child(2) { animation-delay: 0.6s; }
    .news-card:nth-child(3) { animation-delay: 0.7s; }
    .news-card:nth-child(4) { animation-delay: 0.8s; }
    .news-card:nth-child(5) { animation-delay: 0.9s; }
    .news-card:nth-child(6) { animation-delay: 1s; }

    .news-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
    }

    .news-card-image {
      position: relative;
      height: 200px;
      overflow: hidden;
      background: #f0f0f0;
    }

    .news-card-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s ease;
    }

    .news-card:hover .news-card-image img {
      transform: scale(1.1);
    }

    .news-card-category {
      position: absolute;
      top: 12px;
      right: 12px;
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 0.75em;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      backdrop-filter: blur(10px);
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    }

    .news-card-category.health {
      background: rgba(39, 174, 96, 0.95);
      color: white;
    }

    .news-card-category.technology {
      background: rgba(0, 123, 255, 0.95);
      color: white;
    }

    .news-card-category.research {
      background: rgba(155, 89, 182, 0.95);
      color: white;
    }

    .news-card-category.tips {
      background: rgba(243, 156, 18, 0.95);
      color: white;
    }

    .news-card-content {
      padding: 22px;
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .news-card-title {
      font-size: 1.25em;
      font-weight: 700;
      color: #2d3748;
      margin-bottom: 12px;
      line-height: 1.4;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      transition: color 0.3s ease;
    }

    .news-card:hover .news-card-title {
      color: #FF8400;
    }

    .news-card-excerpt {
      font-size: 0.95em;
      color: #64748b;
      line-height: 1.6;
      margin-bottom: 18px;
      flex: 1;
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .news-card-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-top: 16px;
      border-top: 1px solid #e2e8f0;
    }

    .news-card-author {
      display: flex;
      align-items: center;
      gap: 10px;
      flex: 1;
    }

    .news-card-author img {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      border: 2px solid #f0f0f0;
    }

    .news-card-author-info {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .author-name {
      font-size: 0.9em;
      font-weight: 600;
      color: #2d3748;
    }

    .publish-date {
      font-size: 0.8em;
      color: #94a3b8;
    }

    .news-card-bookmark {
      background: transparent;
      border: none;
      color: #cbd5e0;
      cursor: pointer;
      padding: 8px;
      border-radius: 8px;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .news-card-bookmark:hover {
      background: #f7fafc;
      color: #FF8400;
      transform: scale(1.1);
    }

    .news-card-bookmark.active {
      color: #FF8400;
    }

    .news-card-bookmark .material-symbols-outlined {
      font-size: 22px;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .news-main-title {
        font-size: 1.8em;
      }

      .news-featured {
        height: 350px;
      }

      .featured-overlay {
        padding: 25px 20px;
      }

      .featured-title {
        font-size: 1.4em;
      }

      .featured-excerpt {
        font-size: 0.9em;
        margin-bottom: 14px;
      }

      .news-grid {
        grid-template-columns: 1fr;
        gap: 20px;
      }

      .news-categories {
        gap: 8px;
      }

      .news-category-btn {
        padding: 8px 16px;
        font-size: 0.85em;
      }
    }

    @media (max-width: 480px) {
      .news-featured {
        height: 300px;
      }

      .featured-title {
        font-size: 1.2em;
      }

      .news-card-title {
        font-size: 1.1em;
      }
    }

    /* Load More Button */
    .news-load-more {
      text-align: center;
      margin-top: 40px;
      animation: fadeIn 0.6s ease-out 1.2s both;
    }

    .load-more-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 14px 32px;
      background: linear-gradient(135deg, #FF8400, #007BFF);
      color: white;
      border: none;
      border-radius: 30px;
      font-size: 1em;
      font-weight: 600;
      font-family: 'Poppins', sans-serif;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 20px rgba(255, 132, 0, 0.3);
    }

    .load-more-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 30px rgba(255, 132, 0, 0.4);
    }

    .load-more-btn:active {
      transform: translateY(-1px);
    }

    .load-more-btn .material-symbols-outlined {
      font-size: 24px;
      transition: transform 0.3s ease;
    }

    .load-more-btn:hover .material-symbols-outlined {
      transform: translateY(3px);
    }
  </style>
</head>
<body>

  <div class="mobile-wrapper">

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SHARED HEADER (Persisten di semua pages)
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="app-header">
        <div class="logo-container" style="cursor: pointer;" data-navigate="home">
            <img src="images/ai-chat.png" alt="CareRing Logo" class="app-logo">
            <div class="logo-text">
                <span class="logo-care">Care</span><span class="logo-ring">Ring</span>
            </div>
        </div>

        <div class="profile-icon" data-navigate="profil">
            <img id="nav-user-photo" src="" alt="Profile" style="display: none;">
            <span class="material-symbols-outlined">person</span>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         PAGE CONTAINER - Semua halaman ada di sini
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <main id="page-container">

      <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PAGE: HOME / DASHBOARD
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <div id="page-home" class="page active container">

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             HERO SECTION - MODERN GREETING
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div class="hero-section">
            <div class="hero-content">
                <h1 class="hero-greeting" id="user-greeting">Memuat...</h1>
                <p class="hero-subtitle">Monitor kesehatan Anda secara real-time dengan teknologi modern</p>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             QUICK SEARCH
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div class="search-bar">
            <span class="search-icon"><span class="material-symbols-outlined">search</span></span>
            <input type="text" placeholder="Cari data kesehatan, artikel, atau diskusi...">
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             QUICK ACCESS CATEGORIES
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div class="quick-access-section">
            <h2 class="section-title-modern">Akses Cepat</h2>
            <div class="categories-grid">
                <div class="category-card-modern" data-navigate="perangkat">
                    <div class="category-icon-wrapper">
                        <span class="material-symbols-outlined">devices</span>
                    </div>
                    <h3 class="category-title">Device</h3>
                    <p class="category-desc">Kelola perangkat</p>
                </div>
                <div class="category-card-modern" data-navigate="ai-chat">
                    <div class="category-icon-wrapper">
                        <span class="material-symbols-outlined">smart_toy</span>
                    </div>
                    <h3 class="category-title">AI Assistant</h3>
                    <p class="category-desc">Chat dengan AI</p>
                </div>
                <div class="category-card-modern" data-navigate="forum">
                    <div class="category-icon-wrapper">
                        <span class="material-symbols-outlined">forum</span>
                    </div>
                    <h3 class="category-title">Forum</h3>
                    <p class="category-desc">Diskusi komunitas</p>
                </div>
                <div class="category-card-modern" data-navigate="news">
                    <div class="category-icon-wrapper">
                        <span class="material-symbols-outlined">newspaper</span>
                    </div>
                    <h3 class="category-title">Berita</h3>
                    <p class="category-desc">Update terkini</p>
                </div>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             FEATURED METRIC - HERO CARD
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div class="featured-metric-section">
            <h2 class="section-title-modern">Status Kesehatan Utama</h2>
            <div class="hero-metric-card">
                <div class="hero-metric-header">
                    <span class="hero-metric-icon">ğŸŒ¡ï¸</span>
                    <div class="hero-metric-info">
                        <p class="hero-metric-label">Suhu Tubuh</p>
                        <p class="hero-metric-time" id="vitals-last-update">Data terbaru</p>
                    </div>
                </div>
                <div class="hero-metric-value-wrapper">
                    <span class="hero-metric-value" id="suhu-tubuh-value">--</span>
                    <span class="hero-metric-unit">Â°C</span>
                </div>
                <div class="hero-metric-status">
                    <span class="status-badge-hero" id="suhu-tubuh-status">--</span>
                </div>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             VITAL SIGNS GRID - MODERN LAYOUT
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div class="vitals-section">
            <div class="section-header-modern">
                <h2 class="section-title-modern">Vital Signs</h2>
                <span class="section-subtitle">Monitoring real-time</span>
            </div>

            <div class="vitals-grid-modern">
                <!-- Heart Rate Card -->
                <div class="vital-card vital-card-red">
                    <div class="vital-card-header">
                        <span class="vital-icon">â¤ï¸</span>
                        <div class="vital-badge">Live</div>
                    </div>
                    <div class="vital-value-wrapper">
                        <span class="vital-value" id="home-heartrate">--</span>
                        <span class="vital-unit">BPM</span>
                    </div>
                    <p class="vital-label">Heart Rate</p>
                    <div class="vital-mini-chart"></div>
                </div>

                <!-- SpO2 Card -->
                <div class="vital-card vital-card-blue">
                    <div class="vital-card-header">
                        <span class="vital-icon">ğŸ’§</span>
                        <div class="vital-badge">Live</div>
                    </div>
                    <div class="vital-value-wrapper">
                        <span class="vital-value" id="home-spo2">--</span>
                        <span class="vital-unit">%</span>
                    </div>
                    <p class="vital-label">SpO2 Level</p>
                    <div class="vital-mini-chart"></div>
                </div>

                <!-- Body Temperature Card -->
                <div class="vital-card vital-card-orange">
                    <div class="vital-card-header">
                        <span class="vital-icon">ğŸŒ¡ï¸</span>
                        <div class="vital-badge">Live</div>
                    </div>
                    <div class="vital-value-wrapper">
                        <span class="vital-value" id="home-temperature">--</span>
                        <span class="vital-unit">Â°C</span>
                    </div>
                    <p class="vital-label">Body Temp</p>
                    <div class="vital-mini-chart"></div>
                </div>

                <!-- Ambient Temperature Card -->
                <div class="vital-card vital-card-green">
                    <div class="vital-card-header">
                        <span class="vital-icon">ğŸ </span>
                        <div class="vital-badge">Live</div>
                    </div>
                    <div class="vital-value-wrapper">
                        <span class="vital-value" id="home-ambient">--</span>
                        <span class="vital-unit">Â°C</span>
                    </div>
                    <p class="vital-label">Room Temp</p>
                    <div class="vital-mini-chart"></div>
                </div>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             DEVICE STATUS - COMPACT MINIMAL CARD
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div class="device-status-section">
            <div class="device-status-card">
                <div class="device-status-header">
                    <div class="device-status-icon">
                        <span class="material-symbols-outlined">bluetooth</span>
                    </div>
                    <div class="device-status-info">
                        <p class="device-status-label">Device</p>
                        <h3 class="device-status-name" id="home-device-name">Mencari perangkat...</h3>
                    </div>
                    <span id="home-device-status" class="status-indicator status-offline">
                        <span class="status-dot"></span>
                        <span class="status-text">Offline</span>
                    </span>
                </div>
            </div>
        </div>

        <div class="section-header" style="margin-top: 20px;">
            <h2 class="section-title">Grafik Kesehatan</h2>
        </div>

        <section class="chart-card card">
            <p class="chart-title">Riwayat Detak Jantung (10 data terakhir)</p>
            <canvas id="bpmChart"></canvas>
        </section>

        <section class="chart-card card">
            <p class="chart-title">Riwayat Suhu Tubuh (10 data terakhir)</p>
            <canvas id="tempChart"></canvas>
        </section>

        <section class="chart-card card">
            <p class="chart-title">Riwayat Suhu Ruangan (10 data terakhir)</p>
            <canvas id="ambientChart"></canvas>
        </section>

        <section class="health-summary-card card">
            <h2 class="chart-title" style="text-align: center;">Rangkuman Kesehatan</h2>

            <div id="summary-status-container" class="report-status-container">
                <p>Status Keseluruhan:</p>
                <h3 id="summary-status-text" class="status-bugar">Memuat...</h3>
            </div>

            <div class="report-details">
                <h4>Detail Laporan:</h4>
                <ul id="summary-detail-list" class="report-details-list">
                    <li>Memuat data sensor...</li>
                </ul>
            </div>
        </section>

        <!-- Modal -->
        <div id="report-modal" class="modal">
          <div class="modal-content">
            <span class="close-btn" id="modal-close-btn">&times;</span>
            <h2>Rangkuman Kesehatan</h2>
            <div class="report-status-container">
              <p>Status Keseluruhan:</p>
              <h3 id="report-status" class="status-bugar">BUGAR</h3>
            </div>
            <div class="report-details">
              <h4>Detail Laporan:</h4>
              <ul id="report-detail-list"></ul>
            </div>
            <div class="report-recommendations">
              <h4>Rekomendasi (Treatment):</h4>
              <ul id="report-list"></ul>
            </div>
          </div>
        </div>
      </div>

      <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PAGE: NEWS - MODERN REDESIGN
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <div id="page-news" class="page container">

        <!-- News Header -->
        <div class="news-header">
          <h2 class="news-main-title">Berita & Artikel</h2>
          <p class="news-subtitle">Update terkini seputar kesehatan dan teknologi</p>
        </div>

        <!-- Featured Article -->
        <div class="news-featured">
          <img src="https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?w=800&h=450&fit=crop" alt="Featured" class="featured-image">
          <div class="featured-overlay">
            <span class="featured-badge">FEATURED</span>
            <h3 class="featured-title">Inovasi AI dalam Monitoring Kesehatan Real-Time</h3>
            <p class="featured-excerpt">Teknologi kecerdasan buatan kini mampu mendeteksi anomali kesehatan lebih cepat dan akurat...</p>
            <div class="featured-meta">
              <img src="https://ui-avatars.com/api/?name=Dr+Sarah&background=4a90e2&color=fff&size=64" alt="Author" class="featured-author-img">
              <div class="featured-author-info">
                <span class="featured-author-name">Dr. Sarah Johnson</span>
                <span class="featured-author-date">3 Jan 2025 â€¢ 5 min read</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Category Filter -->
        <div class="news-categories">
          <button class="news-category-btn active" data-category="all">Semua</button>
          <button class="news-category-btn" data-category="health">Kesehatan</button>
          <button class="news-category-btn" data-category="technology">Teknologi</button>
          <button class="news-category-btn" data-category="research">Riset</button>
          <button class="news-category-btn" data-category="tips">Tips</button>
        </div>

        <!-- News Grid -->
        <div class="news-grid">
          <!-- Article 1 -->
          <article class="news-card">
            <div class="news-card-image">
              <img src="https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=400&h=250&fit=crop" alt="Article">
              <span class="news-card-category health">Kesehatan</span>
            </div>
            <div class="news-card-content">
              <h3 class="news-card-title">Pentingnya Monitoring SpO2 untuk Kesehatan Jantung</h3>
              <p class="news-card-excerpt">Saturasi oksigen dalam darah menjadi indikator penting untuk mendeteksi masalah kardiovaskular sejak dini...</p>
              <div class="news-card-footer">
                <div class="news-card-author">
                  <img src="https://ui-avatars.com/api/?name=Ahmad+Zaki&background=27AE60&color=fff&size=64" alt="Author">
                  <div class="news-card-author-info">
                    <span class="author-name">Ahmad Zaki</span>
                    <span class="publish-date">2 hari lalu â€¢ 4 min</span>
                  </div>
                </div>
                <button class="news-card-bookmark">
                  <span class="material-symbols-outlined">bookmark</span>
                </button>
              </div>
            </div>
          </article>

          <!-- Article 2 -->
          <article class="news-card">
            <div class="news-card-image">
              <img src="https://images.unsplash.com/photo-1530026405186-ed1f139313f8?w=400&h=250&fit=crop" alt="Article">
              <span class="news-card-category technology">Teknologi</span>
            </div>
            <div class="news-card-content">
              <h3 class="news-card-title">Sensor Wearable: Masa Depan Healthcare</h3>
              <p class="news-card-excerpt">Perangkat wearable kini mampu memantau 10+ parameter kesehatan secara bersamaan dengan akurasi tinggi...</p>
              <div class="news-card-footer">
                <div class="news-card-author">
                  <img src="https://ui-avatars.com/api/?name=Lisa+Chen&background=E74C3C&color=fff&size=64" alt="Author">
                  <div class="news-card-author-info">
                    <span class="author-name">Lisa Chen</span>
                    <span class="publish-date">5 hari lalu â€¢ 6 min</span>
                  </div>
                </div>
                <button class="news-card-bookmark">
                  <span class="material-symbols-outlined">bookmark</span>
                </button>
              </div>
            </div>
          </article>

          <!-- Article 3 -->
          <article class="news-card">
            <div class="news-card-image">
              <img src="https://images.unsplash.com/photo-1576091160550-2173dba999ef?w=400&h=250&fit=crop" alt="Article">
              <span class="news-card-category research">Riset</span>
            </div>
            <div class="news-card-content">
              <h3 class="news-card-title">Studi: Deteksi Dini Hipotermia pada Lansia</h3>
              <p class="news-card-excerpt">Penelitian terbaru menunjukkan monitoring suhu tubuh kontinyu dapat mencegah 70% kasus hipotermia...</p>
              <div class="news-card-footer">
                <div class="news-card-author">
                  <img src="https://ui-avatars.com/api/?name=Dr+Michael&background=9B59B6&color=fff&size=64" alt="Author">
                  <div class="news-card-author-info">
                    <span class="author-name">Dr. Michael Wong</span>
                    <span class="publish-date">1 minggu lalu â€¢ 8 min</span>
                  </div>
                </div>
                <button class="news-card-bookmark">
                  <span class="material-symbols-outlined">bookmark</span>
                </button>
              </div>
            </div>
          </article>

          <!-- Article 4 -->
          <article class="news-card">
            <div class="news-card-image">
              <img src="https://images.unsplash.com/photo-1505751172876-fa1923c5c528?w=400&h=250&fit=crop" alt="Article">
              <span class="news-card-category tips">Tips</span>
            </div>
            <div class="news-card-content">
              <h3 class="news-card-title">10 Tips Menjaga Kesehatan Jantung di Usia 50+</h3>
              <p class="news-card-excerpt">Panduan praktis untuk menjaga kesehatan kardiovaskular dengan gaya hidup sehat dan monitoring rutin...</p>
              <div class="news-card-footer">
                <div class="news-card-author">
                  <img src="https://ui-avatars.com/api/?name=Rina+Susanti&background=F39C12&color=fff&size=64" alt="Author">
                  <div class="news-card-author-info">
                    <span class="author-name">Rina Susanti</span>
                    <span class="publish-date">2 minggu lalu â€¢ 5 min</span>
                  </div>
                </div>
                <button class="news-card-bookmark">
                  <span class="material-symbols-outlined">bookmark</span>
                </button>
              </div>
            </div>
          </article>

          <!-- Article 5 -->
          <article class="news-card">
            <div class="news-card-image">
              <img src="https://images.unsplash.com/photo-1584362917165-526a968579e8?w=400&h=250&fit=crop" alt="Article">
              <span class="news-card-category health">Kesehatan</span>
            </div>
            <div class="news-card-content">
              <h3 class="news-card-title">Manfaat Telemedicine untuk Pasien Jarak Jauh</h3>
              <p class="news-card-excerpt">Layanan konsultasi kesehatan online memudahkan akses ke tenaga medis profesional dari rumah...</p>
              <div class="news-card-footer">
                <div class="news-card-author">
                  <img src="https://ui-avatars.com/api/?name=Budi+Santoso&background=3498DB&color=fff&size=64" alt="Author">
                  <div class="news-card-author-info">
                    <span class="author-name">Budi Santoso</span>
                    <span class="publish-date">3 minggu lalu â€¢ 7 min</span>
                  </div>
                </div>
                <button class="news-card-bookmark">
                  <span class="material-symbols-outlined">bookmark</span>
                </button>
              </div>
            </div>
          </article>

          <!-- Article 6 -->
          <article class="news-card">
            <div class="news-card-image">
              <img src="https://images.unsplash.com/photo-1542884748-2b87b36c6b90?w=400&h=250&fit=crop" alt="Article">
              <span class="news-card-category technology">Teknologi</span>
            </div>
            <div class="news-card-content">
              <h3 class="news-card-title">Blockchain untuk Keamanan Data Medis</h3>
              <p class="news-card-excerpt">Teknologi blockchain menjanjikan keamanan dan privasi data kesehatan pasien yang lebih baik...</p>
              <div class="news-card-footer">
                <div class="news-card-author">
                  <img src="https://ui-avatars.com/api/?name=Kevin+Tan&background=E67E22&color=fff&size=64" alt="Author">
                  <div class="news-card-author-info">
                    <span class="author-name">Kevin Tan</span>
                    <span class="publish-date">1 bulan lalu â€¢ 10 min</span>
                  </div>
                </div>
                <button class="news-card-bookmark">
                  <span class="material-symbols-outlined">bookmark</span>
                </button>
              </div>
            </div>
          </article>
        </div>

        <!-- Load More Button -->
        <div class="news-load-more">
          <button class="load-more-btn">
            <span>Muat Lebih Banyak</span>
            <span class="material-symbols-outlined">expand_more</span>
          </button>
        </div>
      </div>

      <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PAGE: PERANGKAT
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <div id="page-perangkat" class="page container">
        <!-- Device Hero -->
        <div class="device-hero">
          <img src="https://cdn-icons-png.flaticon.com/512/2917/2917995.png" alt="Smart Device">
          <h2 class="device-section-title" style="margin-top: 15px;">Perangkat Saya</h2>
          <p style="color: #666; font-size: 0.95em;">Kelola koneksi perangkat kesehatan Anda</p>
        </div>

        <!-- Connected Devices Section -->
        <div id="connected-devices-container">
          <!-- Will be populated by JavaScript if device is connected -->
        </div>

        <!-- No Devices State -->
        <div class="no-devices" id="no-devices-state">
          <span class="material-symbols-outlined" style="font-size: 64px; color: #ccc; margin-bottom: 15px;">devices_off</span>
          <h3 style="color: #333; margin-bottom: 8px;">Belum Ada Perangkat</h3>
          <p style="color: #777; font-size: 0.9em; margin-bottom: 25px;">Hubungkan perangkat kesehatan Anda untuk memulai monitoring</p>

          <button class="add-device-btn" id="btn-connect-device" style="color: white; border: none; padding: 14px 28px; border-radius: 16px; font-size: 1em; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 10px; margin: 0 auto;">
            <span class="material-symbols-outlined">add_circle</span>
            Hubungkan Perangkat
          </button>
        </div>

        <!-- Info Cards -->
        <div style="margin-top: 30px;">
          <div class="card" style="padding: 18px; margin-bottom: 15px; background: #e8f5e9; border-left: 4px solid #27AE60;">
            <div style="display: flex; align-items: center; gap: 12px;">
              <span class="material-symbols-outlined" style="font-size: 32px; color: #27AE60;">bluetooth</span>
              <div>
                <h4 style="margin: 0 0 4px 0; font-size: 1em; color: #333;">Koneksi Bluetooth</h4>
                <p style="margin: 0; font-size: 0.85em; color: #666;">Pastikan Bluetooth aktif untuk menghubungkan perangkat</p>
              </div>
            </div>
          </div>

          <div class="card" style="padding: 18px; background: #fff3e0; border-left: 4px solid #F39C12;">
            <div style="display: flex; align-items: center; gap: 12px;">
              <span class="material-symbols-outlined" style="font-size: 32px; color: #F39C12;">health_and_safety</span>
              <div>
                <h4 style="margin: 0 0 4px 0; font-size: 1em; color: #333;">Monitoring Real-time</h4>
                <p style="margin: 0; font-size: 0.85em; color: #666;">Data kesehatan akan ter-update secara otomatis</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- BLE Connection Modal - Enhanced -->
      <div id="ble-modal" class="ble-modal">
        <div class="ble-modal-content">
          <div class="ble-modal-header">
            <h3 class="ble-modal-title">Hubungkan Perangkat Bluetooth</h3>
            <button class="ble-close-btn" id="ble-close-btn">
              <span class="material-symbols-outlined">close</span>
            </button>
          </div>

          <!-- Step Guide -->
          <div class="ble-guide-section">
            <h4 class="ble-section-title">Persiapan Sebelum Scan</h4>
            <div class="ble-checklist">
              <div class="ble-checklist-item">
                <span class="material-symbols-outlined check-icon">check_circle</span>
                <div>
                  <strong>Aktifkan Bluetooth</strong>
                  <p>Pastikan Bluetooth di perangkat Anda aktif</p>
                </div>
              </div>
              <div class="ble-checklist-item">
                <span class="material-symbols-outlined check-icon">check_circle</span>
                <div>
                  <strong>Nyalakan Device CareRing</strong>
                  <p>Device harus dalam status hidup dan siap pairing</p>
                </div>
              </div>
              <div class="ble-checklist-item">
                <span class="material-symbols-outlined check-icon">check_circle</span>
                <div>
                  <strong>Dekatkan Device</strong>
                  <p>Posisikan device dalam jarak 1-2 meter</p>
                </div>
              </div>
            </div>
          </div>

          <!-- What Will Happen -->
          <div class="ble-info-box">
            <span class="material-symbols-outlined">info</span>
            <div>
              <strong>Yang Akan Terjadi:</strong>
              <p>Browser akan menampilkan popup untuk memilih perangkat Bluetooth yang tersedia. Pilih device dengan nama "CareRing" atau "ESP32".</p>
            </div>
          </div>

          <!-- Connect Button -->
          <button class="ble-connect-btn" id="ble-connect-btn">
            <span class="material-symbols-outlined">bluetooth_searching</span>
            Mulai Scan Perangkat
          </button>

          <!-- Progress -->
          <div class="ble-progress" id="ble-progress">
            <div class="ble-progress-bar"></div>
          </div>

          <!-- Message -->
          <div class="ble-message" id="ble-message"></div>

          <!-- Troubleshooting Section -->
          <details class="ble-troubleshooting">
            <summary>
              <span class="material-symbols-outlined">help</span>
              Troubleshooting - Device Tidak Muncul?
            </summary>
            <div class="troubleshooting-content">
              <div class="trouble-item">
                <strong>âœ“ Cek Bluetooth Windows</strong>
                <p>Buka Settings â†’ Bluetooth & devices, pastikan device CareRing tidak ter-pair di Windows. Jika ada, klik "Remove device".</p>
              </div>
              <div class="trouble-item">
                <strong>âœ“ Restart Device</strong>
                <p>Matikan dan nyalakan kembali device CareRing.</p>
              </div>
              <div class="trouble-item">
                <strong>âœ“ Refresh Browser</strong>
                <p>Tekan Ctrl + Shift + R untuk hard refresh halaman.</p>
              </div>
              <div class="trouble-item">
                <strong>âœ“ Coba Browser Lain</strong>
                <p>Gunakan Google Chrome atau Microsoft Edge (Web Bluetooth tidak support di Firefox/Safari).</p>
              </div>
            </div>
          </details>
        </div>
      </div>

      <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PAGE: AI CHAT - MODERN PROFESSIONAL REDESIGN
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <div id="page-ai-chat" class="page container">
        <!-- AI Chat Header -->
        <div class="ai-chat-header">
          <div class="ai-chat-header-left">
            <div class="ai-chat-avatar-container">
              <div class="ai-chat-avatar">
                <img src="https://i.ibb.co/KG3y4Lp/ai-avatar.png" alt="AI Assistant" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIyMCIgY3k9IjIwIiByPSIyMCIgZmlsbD0iI0ZGODQwMCIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjI0IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPvCfpJY8L3RleHQ+PC9zdmc+'" />
              </div>
              <div class="ai-status-indicator online"></div>
            </div>
            <div class="ai-chat-info">
              <h3 class="ai-chat-name">CareRing AI Assistant</h3>
              <p class="ai-chat-status">
                <span class="status-dot"></span>
                <span id="ai-status-text">Online - Siap membantu</span>
              </p>
            </div>
          </div>
          <div class="ai-chat-header-right">
            <button class="ai-header-btn" id="clear-chat-btn" title="Clear Chat History">
              <span class="material-symbols-outlined">delete_sweep</span>
            </button>
            <button class="ai-header-btn" title="Chat Settings">
              <span class="material-symbols-outlined">more_vert</span>
            </button>
          </div>
        </div>

        <!-- AI Chat Container -->
        <div class="ai-chat-container">
          <!-- Chat Messages Area -->
          <div id="chat-window" class="ai-chat-window">
            <!-- Welcome Message -->
            <div class="chat-date-divider">
              <span id="chat-date-today">Hari Ini</span>
            </div>
            <div class="message ai-message-modern">
              <div class="message-avatar">
                <img src="https://i.ibb.co/KG3y4Lp/ai-avatar.png" alt="AI" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNiIgZmlsbD0iI0ZGODQwMCIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjE4IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPvCfpJY8L3RleHQ+PC9zdmc+'" />
              </div>
              <div class="message-content">
                <div class="message-bubble ai-bubble">
                  <p>Halo! ğŸ‘‹ Saya adalah <strong>CareRing AI Assistant</strong>, asisten virtual Anda untuk memantau dan menganalisis data kesehatan.</p>
                  <p>Saya dapat membantu Anda dengan:</p>
                  <ul class="ai-capabilities-list">
                    <li>ğŸ“Š Analisis data vital signs real-time</li>
                    <li>â¤ï¸ Monitoring detak jantung dan suhu tubuh</li>
                    <li>ğŸ’¡ Rekomendasi kesehatan berbasis data</li>
                    <li>ğŸ” Informasi medis dasar</li>
                  </ul>
                  <p>Tanyakan apa saja tentang kondisi kesehatan Anda!</p>
                </div>
                <div class="message-meta">
                  <span class="message-time" id="welcome-time">--:--</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Suggested Questions -->
          <div id="suggested-questions" class="ai-suggested-questions">
            <div class="suggested-title">
              <span class="material-symbols-outlined">lightbulb</span>
              Pertanyaan Cepat
            </div>
            <div class="suggested-grid">
              <button class="suggest-btn-modern" data-question="suhu">
                <span class="material-symbols-outlined">thermostat</span>
                <span>Bagaimana suhu tubuh saya?</span>
              </button>
              <button class="suggest-btn-modern" data-question="jantung">
                <span class="material-symbols-outlined">favorite</span>
                <span>Detak jantung saya normal?</span>
              </button>
              <button class="suggest-btn-modern" data-question="hipotermia">
                <span class="material-symbols-outlined">ac_unit</span>
                <span>Apa itu hipotermia?</span>
              </button>
              <button class="suggest-btn-modern" data-question="demam">
                <span class="material-symbols-outlined">local_fire_department</span>
                <span>Bagaimana menangani demam?</span>
              </button>
            </div>
          </div>

          <!-- Chat Input Area -->
          <div class="ai-chat-input-wrapper">
            <form id="chat-form" class="ai-chat-form">
              <div class="chat-input-container">
                <button type="button" class="chat-action-btn" title="Attach File" disabled>
                  <span class="material-symbols-outlined">attach_file</span>
                </button>
                <input
                  type="text"
                  id="chat-input"
                  class="ai-chat-input"
                  placeholder="Ketik pertanyaan Anda di sini..."
                  autocomplete="off"
                  required
                />
                <button type="button" class="chat-action-btn" id="voice-btn" title="Voice Input" disabled>
                  <span class="material-symbols-outlined">mic</span>
                </button>
                <button type="submit" id="send-btn" class="ai-send-btn" title="Send Message">
                  <span class="material-symbols-outlined">send</span>
                </button>
              </div>
            </form>
            <div class="ai-chat-footer">
              <span class="footer-text">
                <span class="material-symbols-outlined">info</span>
                AI dapat membuat kesalahan. Konsultasikan dengan profesional untuk keputusan medis.
              </span>
            </div>
          </div>
        </div>
      </div>

      <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PAGE: FORUM - MODERN REDESIGN
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <div id="page-forum" class="page container">
        <!-- Forum Header -->
        <div class="forum-header">
          <div class="forum-header-content">
            <h2 class="forum-title">Diskusi Komunitas</h2>
            <p class="forum-subtitle">Berbagi pengalaman dan diskusi kesehatan</p>
          </div>
        </div>

        <!-- Forum Stats -->
        <div class="forum-stats">
          <div class="stat-item">
            <div class="stat-value">124</div>
            <div class="stat-label">Diskusi</div>
          </div>
          <div class="stat-item">
            <div class="stat-value">342</div>
            <div class="stat-label">Balasan</div>
          </div>
          <div class="stat-item">
            <div class="stat-value">89</div>
            <div class="stat-label">Anggota</div>
          </div>
        </div>

        <!-- Search & Filter -->
        <div class="forum-search-bar">
          <span class="material-symbols-outlined search-icon">search</span>
          <input type="text" placeholder="Cari topik diskusi..." class="forum-search-input">
        </div>

        <!-- Category Tabs -->
        <div class="forum-categories">
          <button class="category-tab active" data-category="all">Semua</button>
          <button class="category-tab" data-category="health">Kesehatan</button>
          <button class="category-tab" data-category="device">Perangkat</button>
          <button class="category-tab" data-category="tips">Tips & Trik</button>
        </div>

        <!-- Forum Threads List -->
        <div class="forum-threads">
          <!-- Thread Item 1 -->
          <div class="thread-card">
            <div class="thread-avatar">
              <img src="https://ui-avatars.com/api/?name=Erico+Varel&background=4a90e2&color=fff&size=128" alt="Avatar">
            </div>
            <div class="thread-content">
              <div class="thread-header">
                <div class="thread-meta">
                  <span class="thread-author">Erico Varel</span>
                  <span class="thread-dot">â€¢</span>
                  <span class="thread-time">2 jam lalu</span>
                </div>
                <span class="thread-category health">Kesehatan</span>
              </div>
              <h3 class="thread-title">Apa itu Hipotermia dan Bagaimana Cara Mencegahnya?</h3>
              <p class="thread-preview">Saya ingin tahu lebih lanjut tentang hipotermia, terutama bagaimana cara mendeteksi dan mencegahnya pada lansia...</p>
              <div class="thread-footer">
                <div class="thread-stats">
                  <div class="stat-badge">
                    <span class="material-symbols-outlined">comment</span>
                    <span>12 balasan</span>
                  </div>
                  <div class="stat-badge">
                    <span class="material-symbols-outlined">visibility</span>
                    <span>89 views</span>
                  </div>
                  <div class="stat-badge">
                    <span class="material-symbols-outlined">thumb_up</span>
                    <span>5</span>
                  </div>
                </div>
                <div class="thread-last-activity">
                  <img src="https://ui-avatars.com/api/?name=Ahmad&background=27AE60&color=fff&size=64" alt="Last reply" class="last-reply-avatar">
                  <span class="last-reply-text">Ahmad membalas</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Thread Item 2 -->
          <div class="thread-card">
            <div class="thread-avatar">
              <img src="https://ui-avatars.com/api/?name=Siti+Rahayu&background=E74C3C&color=fff&size=128" alt="Avatar">
            </div>
            <div class="thread-content">
              <div class="thread-header">
                <div class="thread-meta">
                  <span class="thread-author">Siti Rahayu</span>
                  <span class="thread-dot">â€¢</span>
                  <span class="thread-time">5 jam lalu</span>
                </div>
                <span class="thread-category device">Perangkat</span>
              </div>
              <h3 class="thread-title">Tips Merawat Sensor CareRing Agar Awet</h3>
              <p class="thread-preview">Sharing pengalaman saya dalam merawat sensor CareRing selama 6 bulan terakhir. Ada beberapa hal yang perlu diperhatikan...</p>
              <div class="thread-footer">
                <div class="thread-stats">
                  <div class="stat-badge">
                    <span class="material-symbols-outlined">comment</span>
                    <span>8 balasan</span>
                  </div>
                  <div class="stat-badge">
                    <span class="material-symbols-outlined">visibility</span>
                    <span>124 views</span>
                  </div>
                  <div class="stat-badge">
                    <span class="material-symbols-outlined">thumb_up</span>
                    <span>15</span>
                  </div>
                </div>
                <div class="thread-last-activity">
                  <img src="https://ui-avatars.com/api/?name=Budi&background=F39C12&color=fff&size=64" alt="Last reply" class="last-reply-avatar">
                  <span class="last-reply-text">Budi membalas</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Thread Item 3 -->
          <div class="thread-card">
            <div class="thread-avatar">
              <img src="https://ui-avatars.com/api/?name=Dr+Andi&background=9B59B6&color=fff&size=128" alt="Avatar">
              <div class="verified-badge" title="Verified Expert">
                <span class="material-symbols-outlined">verified</span>
              </div>
            </div>
            <div class="thread-content">
              <div class="thread-header">
                <div class="thread-meta">
                  <span class="thread-author">Dr. Andi Kurniawan</span>
                  <span class="verified-icon" title="Verified Expert">
                    <span class="material-symbols-outlined">verified</span>
                  </span>
                  <span class="thread-dot">â€¢</span>
                  <span class="thread-time">1 hari lalu</span>
                </div>
                <span class="thread-category tips">Tips & Trik</span>
              </div>
              <h3 class="thread-title">Cara Membaca Data SpO2 dengan Benar</h3>
              <p class="thread-preview">Sebagai tenaga medis, saya ingin berbagi informasi tentang cara membaca dan menginterpretasi data saturasi oksigen (SpO2)...</p>
              <div class="thread-footer">
                <div class="thread-stats">
                  <div class="stat-badge">
                    <span class="material-symbols-outlined">comment</span>
                    <span>24 balasan</span>
                  </div>
                  <div class="stat-badge">
                    <span class="material-symbols-outlined">visibility</span>
                    <span>456 views</span>
                  </div>
                  <div class="stat-badge">
                    <span class="material-symbols-outlined">thumb_up</span>
                    <span>42</span>
                  </div>
                </div>
                <div class="thread-last-activity">
                  <img src="https://ui-avatars.com/api/?name=Putri&background=3498DB&color=fff&size=64" alt="Last reply" class="last-reply-avatar">
                  <span class="last-reply-text">Putri membalas</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Floating Action Button -->
        <button class="forum-fab" title="Buat Diskusi Baru">
          <span class="material-symbols-outlined">add</span>
        </button>
      </div>

      <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PAGE: PROFIL - PROFESSIONAL MODERN REDESIGN
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <div id="page-profil" class="page">
        <div class="profile-modern-container">

          <!-- Profile Hero with Cover -->
          <div class="profile-hero-modern">
            <div class="profile-cover">
              <div class="profile-cover-gradient"></div>
              <div class="profile-cover-pattern"></div>
            </div>
            <div class="profile-header-content">
              <div class="profile-avatar-section">
                <div class="profile-avatar-large">
                  <img id="profil-img" src="" alt="Profile" onload="this.style.display='block'; document.getElementById('profil-default-icon').style.display='none';">
                  <span class="material-symbols-outlined" id="profil-default-icon">person</span>
                  <div class="profile-avatar-badge">
                    <span class="material-symbols-outlined">verified</span>
                  </div>
                </div>
                <div class="profile-info">
                  <h1 id="profil-nama" class="profile-display-name">Loading...</h1>
                  <p id="profil-email" class="profile-user-email">loading@example.com</p>
                  <div class="profile-meta">
                    <span class="profile-meta-item">
                      <span class="material-symbols-outlined">calendar_today</span>
                      Bergabung <span id="profile-member-since">2025</span>
                    </span>
                    <span class="profile-meta-item">
                      <span class="material-symbols-outlined">badge</span>
                      ID: <span id="profile-user-id">CR-XXXX</span>
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Stats Overview Cards -->
          <div class="profile-stats-overview">
            <div class="stat-card-modern stat-card-pulse">
              <div class="stat-card-icon">
                <span class="material-symbols-outlined">favorite</span>
              </div>
              <div class="stat-card-content">
                <span class="stat-card-value" id="profile-stat-heartrate">--</span>
                <span class="stat-card-label">Rata-rata BPM</span>
                <span class="stat-card-trend positive">
                  <span class="material-symbols-outlined">trending_up</span>
                  Normal
                </span>
              </div>
            </div>
            <div class="stat-card-modern stat-card-temp">
              <div class="stat-card-icon">
                <span class="material-symbols-outlined">thermostat</span>
              </div>
              <div class="stat-card-content">
                <span class="stat-card-value" id="profile-stat-temp">--</span>
                <span class="stat-card-label">Suhu Tubuh (Â°C)</span>
                <span class="stat-card-trend positive">
                  <span class="material-symbols-outlined">check_circle</span>
                  Normal
                </span>
              </div>
            </div>
            <div class="stat-card-modern stat-card-days">
              <div class="stat-card-icon">
                <span class="material-symbols-outlined">event</span>
              </div>
              <div class="stat-card-content">
                <span class="stat-card-value" id="profile-stat-days">--</span>
                <span class="stat-card-label">Hari Aktif</span>
                <span class="stat-card-trend">
                  <span class="material-symbols-outlined">local_fire_department</span>
                  Keep it up!
                </span>
              </div>
            </div>
            <div class="stat-card-modern stat-card-data">
              <div class="stat-card-icon">
                <span class="material-symbols-outlined">analytics</span>
              </div>
              <div class="stat-card-content">
                <span class="stat-card-value" id="profile-stat-records">--</span>
                <span class="stat-card-label">Data Tercatat</span>
                <span class="stat-card-trend">
                  <span class="material-symbols-outlined">storage</span>
                  Records
                </span>
              </div>
            </div>
          </div>

          <!-- Main Content Grid -->
          <div class="profile-content-grid">

            <!-- Left Column -->
            <div class="profile-left-column">

              <!-- Health Summary Card -->
              <div class="profile-card">
                <div class="profile-card-header">
                  <div class="card-header-title">
                    <span class="material-symbols-outlined">health_and_safety</span>
                    <span>Ringkasan Kesehatan</span>
                  </div>
                  <span class="health-status-badge status-excellent">Baik</span>
                </div>
                <div class="profile-card-body">
                  <div class="health-metrics">
                    <div class="health-metric-item">
                      <div class="metric-header">
                        <span class="metric-label">Detak Jantung</span>
                        <span class="metric-value">Normal</span>
                      </div>
                      <div class="metric-progress-bar">
                        <div class="metric-progress" style="width: 85%; background: linear-gradient(90deg, #ef4444, #f87171);"></div>
                      </div>
                    </div>
                    <div class="health-metric-item">
                      <div class="metric-header">
                        <span class="metric-label">Suhu Tubuh</span>
                        <span class="metric-value">Stabil</span>
                      </div>
                      <div class="metric-progress-bar">
                        <div class="metric-progress" style="width: 90%; background: linear-gradient(90deg, #FF8400, #ffb347);"></div>
                      </div>
                    </div>
                    <div class="health-metric-item">
                      <div class="metric-header">
                        <span class="metric-label">Aktivitas</span>
                        <span class="metric-value">Aktif</span>
                      </div>
                      <div class="metric-progress-bar">
                        <div class="metric-progress" style="width: 75%; background: linear-gradient(90deg, #10b981, #34d399);"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Achievements Card -->
              <div class="profile-card">
                <div class="profile-card-header">
                  <div class="card-header-title">
                    <span class="material-symbols-outlined">emoji_events</span>
                    <span>Pencapaian</span>
                  </div>
                </div>
                <div class="profile-card-body">
                  <div class="achievements-grid">
                    <div class="achievement-item achievement-active">
                      <span class="achievement-icon">ğŸ†</span>
                      <span class="achievement-label">7 Hari Berturut</span>
                    </div>
                    <div class="achievement-item achievement-active">
                      <span class="achievement-icon">ğŸ’ª</span>
                      <span class="achievement-label">Health Champion</span>
                    </div>
                    <div class="achievement-item achievement-active">
                      <span class="achievement-icon">â­</span>
                      <span class="achievement-label">Data Master</span>
                    </div>
                    <div class="achievement-item achievement-locked">
                      <span class="achievement-icon">ğŸ¯</span>
                      <span class="achievement-label">30 Hari</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Device Card -->
              <div class="profile-card">
                <div class="profile-card-header">
                  <div class="card-header-title">
                    <span class="material-symbols-outlined">devices</span>
                    <span>Perangkat Saya</span>
                  </div>
                  <button class="card-action-btn" data-navigate="perangkat">
                    <span class="material-symbols-outlined">arrow_forward</span>
                  </button>
                </div>
                <div class="profile-card-body">
                  <div class="device-item-modern">
                    <div class="device-icon-wrapper">
                      <span class="material-symbols-outlined">watch</span>
                    </div>
                    <div class="device-info-wrapper">
                      <span class="device-name-text" id="profile-device-name">CareRing ESP32</span>
                      <span class="device-id-text" id="profile-device-id">Menunggu koneksi...</span>
                    </div>
                    <div class="device-status-badge online">
                      <span class="status-dot-pulse"></span>
                      Online
                    </div>
                  </div>
                </div>
              </div>

            </div>

            <!-- Right Column -->
            <div class="profile-right-column">

              <!-- Settings Card -->
              <div class="profile-card">
                <div class="profile-card-header">
                  <div class="card-header-title">
                    <span class="material-symbols-outlined">tune</span>
                    <span>Pengaturan</span>
                  </div>
                </div>
                <div class="profile-card-body">
                  <div class="settings-menu-modern">
                    <button class="settings-menu-item">
                      <div class="settings-menu-icon settings-icon-blue">
                        <span class="material-symbols-outlined">person</span>
                      </div>
                      <div class="settings-menu-content">
                        <span class="settings-menu-label">Edit Profil</span>
                        <span class="settings-menu-desc">Nama, foto, dan bio</span>
                      </div>
                      <span class="material-symbols-outlined">chevron_right</span>
                    </button>
                    <button class="settings-menu-item">
                      <div class="settings-menu-icon settings-icon-orange">
                        <span class="material-symbols-outlined">notifications</span>
                      </div>
                      <div class="settings-menu-content">
                        <span class="settings-menu-label">Notifikasi</span>
                        <span class="settings-menu-desc">Kelola pengingat</span>
                      </div>
                      <span class="material-symbols-outlined">chevron_right</span>
                    </button>
                    <button class="settings-menu-item">
                      <div class="settings-menu-icon settings-icon-purple">
                        <span class="material-symbols-outlined">lock</span>
                      </div>
                      <div class="settings-menu-content">
                        <span class="settings-menu-label">Privasi</span>
                        <span class="settings-menu-desc">Keamanan akun</span>
                      </div>
                      <span class="material-symbols-outlined">chevron_right</span>
                    </button>
                    <button class="settings-menu-item">
                      <div class="settings-menu-icon settings-icon-green">
                        <span class="material-symbols-outlined">language</span>
                      </div>
                      <div class="settings-menu-content">
                        <span class="settings-menu-label">Bahasa</span>
                        <span class="settings-menu-desc">Indonesia</span>
                      </div>
                      <span class="material-symbols-outlined">chevron_right</span>
                    </button>
                  </div>
                </div>
              </div>

              <!-- Support Card -->
              <div class="profile-card">
                <div class="profile-card-header">
                  <div class="card-header-title">
                    <span class="material-symbols-outlined">support_agent</span>
                    <span>Bantuan</span>
                  </div>
                </div>
                <div class="profile-card-body">
                  <div class="settings-menu-modern">
                    <button class="settings-menu-item">
                      <div class="settings-menu-icon settings-icon-cyan">
                        <span class="material-symbols-outlined">help_center</span>
                      </div>
                      <div class="settings-menu-content">
                        <span class="settings-menu-label">Pusat Bantuan</span>
                        <span class="settings-menu-desc">FAQ & Panduan</span>
                      </div>
                      <span class="material-symbols-outlined">chevron_right</span>
                    </button>
                    <button class="settings-menu-item">
                      <div class="settings-menu-icon settings-icon-green">
                        <span class="material-symbols-outlined">forum</span>
                      </div>
                      <div class="settings-menu-content">
                        <span class="settings-menu-label">Hubungi Kami</span>
                        <span class="settings-menu-desc">Chat support</span>
                      </div>
                      <span class="material-symbols-outlined">chevron_right</span>
                    </button>
                    <button class="settings-menu-item">
                      <div class="settings-menu-icon settings-icon-yellow">
                        <span class="material-symbols-outlined">star</span>
                      </div>
                      <div class="settings-menu-content">
                        <span class="settings-menu-label">Beri Rating</span>
                        <span class="settings-menu-desc">Bantu kami berkembang</span>
                      </div>
                      <span class="material-symbols-outlined">chevron_right</span>
                    </button>
                  </div>
                </div>
              </div>

              <!-- About Card -->
              <div class="profile-card profile-about-card">
                <div class="profile-card-body">
                  <div class="about-info-grid">
                    <div class="about-info-item">
                      <span class="about-info-icon">
                        <span class="material-symbols-outlined">info</span>
                      </span>
                      <div class="about-info-text">
                        <span class="about-info-label">Versi</span>
                        <span class="about-info-value">v2.0.0</span>
                      </div>
                    </div>
                    <div class="about-info-item">
                      <span class="about-info-icon">
                        <span class="material-symbols-outlined">code</span>
                      </span>
                      <div class="about-info-text">
                        <span class="about-info-label">Platform</span>
                        <span class="about-info-value">Web PWA</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Logout Button -->
              <button class="profile-logout-modern" id="btn-logout">
                <span class="material-symbols-outlined">logout</span>
                <span>Keluar dari Akun</span>
              </button>

            </div>

          </div>

          <!-- Footer -->
          <div class="profile-footer-modern">
            <p>CareRing Healthcare Â© 2025 â€¢ Semua hak dilindungi</p>
            <div class="footer-links">
              <a href="#">Syarat & Ketentuan</a>
              <span>â€¢</span>
              <a href="#">Kebijakan Privasi</a>
            </div>
          </div>

        </div>
      </div>

    </main>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         BOTTOM NAVIGATION (Persisten - Always visible)
         Swipe/scroll kanan-kiri untuk melihat semua menu
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="bottom-nav" id="bottom-nav">
      <div class="nav-item active" data-navigate="home">
        <div class="nav-icon"><span class="material-symbols-outlined">home</span></div>
        <div class="nav-label">Home</div>
      </div>
      <div class="nav-item" data-navigate="news">
        <div class="nav-icon"><span class="material-symbols-outlined">newspaper</span></div>
        <div class="nav-label">News</div>
      </div>
      <div class="nav-item" data-navigate="perangkat">
        <div class="nav-icon"><span class="material-symbols-outlined">devices</span></div>
        <div class="nav-label">Perangkat</div>
      </div>
      <div class="nav-item" data-navigate="ai-chat">
        <div class="nav-icon"><span class="material-symbols-outlined">smart_toy</span></div>
        <div class="nav-label">AI Chat</div>
      </div>
      <div class="nav-item" data-navigate="forum">
        <div class="nav-icon"><span class="material-symbols-outlined">forum</span></div>
        <div class="nav-label">Forum</div>
      </div>
      <div class="nav-item" data-navigate="profil">
        <div class="nav-icon"><span class="material-symbols-outlined">person</span></div>
        <div class="nav-label">Profil</div>
      </div>
    </div>

  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       FIREBASE & SCRIPTS - Load sekali, persist selamanya!
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

  <script src="/script.js"></script>
  <script src="/auth-guard.js"></script>
  <script src="/ble-handler.js"></script>
  <script src="/ble-indicator.js"></script>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SPA ROUTER - Handle navigation tanpa page reload!
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <script>
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    //                    SPA ROUTER SYSTEM
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    (function() {
      'use strict';

      console.log('ğŸš€ SPA Router initialized');
      console.log('âœ… BLE Connection will persist across navigation!');

      // Current page tracking
      let currentPage = 'home';

      /**
       * Navigate to a page
       */
      function navigateToPage(pageName) {
        console.log(`ğŸ“„ Navigating to: ${pageName}`);

        // Hide all pages
        document.querySelectorAll('.page').forEach(page => {
          page.classList.remove('active');
        });

        // Show target page
        const targetPage = document.getElementById(`page-${pageName}`);
        if (targetPage) {
          targetPage.classList.add('active');
          currentPage = pageName;

          // Update navigation active state
          updateNavigation(pageName);

          // Update URL hash (without reload!)
          window.location.hash = pageName;

          // Scroll to top
          window.scrollTo(0, 0);

          // Page-specific initialization
          initializePage(pageName);
        } else {
          console.error(`âŒ Page not found: ${pageName}`);
        }
      }

      /**
       * Update navigation bar active state
       */
      function updateNavigation(pageName) {
        document.querySelectorAll('.nav-item').forEach(item => {
          item.classList.remove('active');
        });

        const activeNav = document.querySelector(`.nav-item[data-navigate="${pageName}"]`);
        if (activeNav) {
          activeNav.classList.add('active');

          // Move sliding indicator to active item
          moveIndicator(activeNav);
        }
      }

      /**
       * Move indicator (simplified - no sliding animation)
       */
      function moveIndicator(activeElement) {
        // Indicator removed for cleaner design
      }

      /**
       * Initialize page-specific functionality
       */
      function initializePage(pageName) {
        console.log(`ğŸ”§ Initializing page: ${pageName}`);

        switch(pageName) {
          case 'home':
            // Home page already initialized by script.js
            break;

          case 'news':
            // Trigger news loading if needed
            if (typeof loadNews === 'function') {
              loadNews();
            }
            break;

          case 'perangkat':
            // Perangkat page specific init
            initPerangkatPage();
            break;

          case 'ai-chat':
            // AI Chat init
            break;

          case 'forum':
            // Forum init
            break;

          case 'profil':
            // Profile page init
            initProfilePage();
            break;
        }
      }

      /**
       * Initialize Perangkat page
       */
      function initPerangkatPage() {
        console.log('ğŸ”§ Initializing Perangkat page...');

        // Get modal elements
        const modal = document.getElementById('ble-modal');
        const btnConnect = document.getElementById('btn-connect-device');
        const btnClose = document.getElementById('ble-close-btn');
        const btnBLEConnect = document.getElementById('ble-connect-btn');
        const bleProgress = document.getElementById('ble-progress');
        const bleMessage = document.getElementById('ble-message');
        const deviceNameInput = document.getElementById('ble-device-name');

        // Open modal
        if (btnConnect) {
          btnConnect.addEventListener('click', () => {
            modal.classList.add('show');
            bleMessage.classList.remove('show');
          });
        }

        // Close modal
        if (btnClose) {
          btnClose.addEventListener('click', () => {
            modal.classList.remove('show');
          });
        }

        // Close modal on outside click
        if (modal) {
          modal.addEventListener('click', (e) => {
            if (e.target === modal) {
              modal.classList.remove('show');
            }
          });
        }

        // Connect to device
        if (btnBLEConnect) {
          btnBLEConnect.addEventListener('click', async () => {
            try {
              // Show progress
              if (bleProgress) bleProgress.classList.add('show');
              if (bleMessage) bleMessage.classList.remove('show');

              // Disable button during connection
              if (btnBLEConnect) {
                btnBLEConnect.disabled = true;
                btnBLEConnect.innerHTML = '<span class="material-symbols-outlined">hourglass_empty</span> Menghubungkan...';
              }

              // Update device name prefix if needed (optional field)
              if (deviceNameInput && deviceNameInput.value) {
                const deviceName = deviceNameInput.value.trim();
                if (deviceName) {
                  console.log('ğŸ” Mencari perangkat:', deviceName);
                }
              }

              // Call BLE connect from ble-handler.js
              if (window.BLEHandler && window.BLEHandler.connect) {
                await window.BLEHandler.connect();

                // Success!
                if (bleProgress) bleProgress.classList.remove('show');

                if (bleMessage) {
                  bleMessage.className = 'ble-message show success';
                  bleMessage.textContent = 'âœ… Berhasil terhubung! Data akan mulai disinkronkan.';
                }

                if (btnBLEConnect) {
                  btnBLEConnect.innerHTML = '<span class="material-symbols-outlined">check_circle</span> Terhubung';
                }

                // Close modal after 2 seconds
                setTimeout(() => {
                  if (modal) modal.classList.remove('show');
                  updateDeviceUI();
                }, 2000);

              } else {
                throw new Error('BLE Handler belum dimuat');
              }

            } catch (error) {
              console.error('âŒ Koneksi gagal:', error);

              // Hide progress and show error message
              if (bleProgress) bleProgress.classList.remove('show');

              if (bleMessage) {
                bleMessage.className = 'ble-message show error';
                bleMessage.textContent = error.message || 'Gagal menghubungkan. Pastikan Bluetooth aktif dan perangkat dalam mode pairing.';
              }

              // Re-enable button
              if (btnBLEConnect) {
                btnBLEConnect.disabled = false;
                btnBLEConnect.innerHTML = '<span class="material-symbols-outlined">bluetooth_searching</span> Coba Lagi';
              }
            }
          });
        }

        // Update UI based on connection status
        updateDeviceUI();



        

        // Listen for BLE events
        window.addEventListener('bleConnected', updateDeviceUI);
        window.addEventListener('bleDisconnected', updateDeviceUI);
      }

      /**
       * Update device UI based on connection status
       */
      function updateDeviceUI() {
        const connectedContainer = document.getElementById('connected-devices-container');
        const noDevicesState = document.getElementById('no-devices-state');

        if (!connectedContainer || !noDevicesState) return;

        // Check if device is connected
        if (window.BLEHandler && window.BLEHandler.isConnected && window.BLEHandler.isConnected()) {
          const deviceInfo = window.BLEHandler.getDeviceInfo();

          // Hide no devices state
          noDevicesState.style.display = 'none';

          // Show connected device
          connectedContainer.innerHTML = `
            <div class="device-card">
              <div class="device-name">${deviceInfo.name || 'CareRing Device'}</div>
              <div style="font-size: 0.85em; color: #666; margin-top: 4px;">
                <span class="material-symbols-outlined" style="font-size: 16px; vertical-align: middle; color: #27AE60;">check_circle</span>
                Terhubung
              </div>
              <div style="font-size: 0.8em; color: #999; margin-top: 8px;">
                ID: ${deviceInfo.id || '-'}
              </div>

              <div class="device-actions">
                <div class="action-btn" onclick="console.log('Sync clicked')">
                  <span class="material-symbols-outlined">sync</span>
                  <div>
                    <div style="font-weight: 600;">Sinkronisasi Manual</div>
                    <div style="font-size: 0.85em; color: #666;">Update data sekarang</div>
                  </div>
                </div>

                <div class="action-btn action-btn-disconnect" onclick="disconnectDevice()">
                  <span class="material-symbols-outlined">link_off</span>
                  <div>
                    <div style="font-weight: 600; color: #E74C3C;">Putuskan Koneksi</div>
                    <div style="font-size: 0.85em; color: #999;">Hentikan monitoring</div>
                  </div>
                </div>
              </div>
            </div>
          `;
        } else {
          // Show no devices state
          noDevicesState.style.display = 'block';
          connectedContainer.innerHTML = '';
        }
      }

      /**
       * Disconnect device
       */
      function disconnectDevice() {
        if (confirm('Apakah Anda yakin ingin memutuskan koneksi dengan perangkat?')) {
          if (window.BLEHandler && window.BLEHandler.disconnect) {
            window.BLEHandler.disconnect();
            updateDeviceUI();
          }
        }
      }

      // Make functions globally accessible
      window.disconnectDevice = disconnectDevice;

      /**
       * Initialize Profile Page
       */
      function initProfilePage() {
        console.log('ğŸ”§ Initializing Profile page...');
        
        // Get user data from Firebase Auth
        if (firebase && firebase.auth) {
          firebase.auth().onAuthStateChanged((user) => {
            if (user) {
              // Update profile name
              const elNama = document.getElementById('profil-nama');
              if (elNama) elNama.innerText = user.displayName || 'Pengguna';
              
              // Update profile email
              const elEmail = document.getElementById('profil-email');
              if (elEmail) elEmail.innerText = user.email || '';
              
              // Update profile image
              const elImg = document.getElementById('profil-img');
              const elIcon = document.getElementById('profil-default-icon');
              if (elImg && user.photoURL) {
                elImg.src = user.photoURL;
                elImg.style.display = 'block';
                if (elIcon) elIcon.style.display = 'none';
              }
              
              // Update user ID
              const elUserId = document.getElementById('profile-user-id');
              if (elUserId && user.uid) {
                elUserId.innerText = 'CR-' + user.uid.substring(0, 6).toUpperCase();
              }
              
              // Update member since
              const elMemberSince = document.getElementById('profile-member-since');
              if (elMemberSince && user.metadata && user.metadata.creationTime) {
                const creationDate = new Date(user.metadata.creationTime);
                const options = { year: 'numeric', month: 'long' };
                elMemberSince.innerText = creationDate.toLocaleDateString('id-ID', options);
              }
            }
          });
        }
        
        // Load profile stats from sensor history
        if (firebase && firebase.database) {
          const historyRef = firebase.database().ref("/sensorHistory");
          historyRef.limitToLast(100).once("value", (snapshot) => {
            const data = snapshot.val();
            if (data) {
              const entries = Object.values(data);
              
              // Calculate average heart rate
              const bpms = entries.map(d => d.bpm || 0).filter(v => v > 0);
              if (bpms.length > 0) {
                const avgBpm = Math.round(bpms.reduce((a, b) => a + b, 0) / bpms.length);
                const elStatHr = document.getElementById('profile-stat-heartrate');
                if (elStatHr) elStatHr.innerText = avgBpm;
              }
              
              // Calculate average temperature
              const temps = entries.map(d => d.objTemp || 0).filter(v => v > 30 && v < 42);
              if (temps.length > 0) {
                const avgTemp = (temps.reduce((a, b) => a + b, 0) / temps.length).toFixed(1);
                const elStatTemp = document.getElementById('profile-stat-temp');
                if (elStatTemp) elStatTemp.innerText = avgTemp;
              }
              
              // Update data points count
              const elStatRecords = document.getElementById('profile-stat-records');
              if (elStatRecords) elStatRecords.innerText = entries.length;
              
              // Calculate active days
              const uniqueDays = new Set();
              entries.forEach(entry => {
                if (entry.timestamp) {
                  const date = new Date(entry.timestamp);
                  uniqueDays.add(date.toDateString());
                }
              });
              const elStatDays = document.getElementById('profile-stat-days');
              if (elStatDays) elStatDays.innerText = uniqueDays.size;
            }
          });
        }
        
        // Load device info
        if (firebase && firebase.database) {
          const devicesRef = firebase.database().ref("/realtimeSensorData");
          devicesRef.once("value", (snapshot) => {
            const devices = snapshot.val();
            if (devices && Object.keys(devices).length > 0) {
              const deviceKeys = Object.keys(devices);
              const firstDevice = devices[deviceKeys[0]];
              
              const elDeviceName = document.getElementById('profile-device-name');
              if (elDeviceName && firstDevice) {
                elDeviceName.innerText = firstDevice.deviceName || 'CareRing Device';
              }
              
              const elDeviceId = document.getElementById('profile-device-id');
              if (elDeviceId && firstDevice) {
                elDeviceId.innerText = 'ID: ' + (firstDevice.deviceID || deviceKeys[0].substring(0, 17));
              }
            }
          });
        }
        
        // Logout button handler
        const btnLogout = document.getElementById('btn-logout');
        if (btnLogout) {
          // Remove old listeners
          const newBtnLogout = btnLogout.cloneNode(true);
          btnLogout.parentNode.replaceChild(newBtnLogout, btnLogout);
          
          newBtnLogout.addEventListener('click', (e) => {
            e.preventDefault();
            if (confirm('Apakah Anda yakin ingin keluar dari akun?')) {
              if (firebase && firebase.auth) {
                firebase.auth().signOut().then(() => {
                  console.log('âœ… Logged out successfully');
                  window.location.href = 'login.html';
                }).catch((error) => {
                  console.error('âŒ Logout error:', error);
                  alert('Gagal logout: ' + error.message);
                });
              }
            }
          });
        }
      }

      /**
       * Setup navigation listeners
       */
      function setupNavigation() {
        // Bottom navigation clicks
        document.querySelectorAll('[data-navigate]').forEach(element => {
          element.addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();

            // Haptic feedback for mobile devices (subtle)
            if (window.navigator && window.navigator.vibrate) {
              window.navigator.vibrate(5);
            }

            const pageName = element.getAttribute('data-navigate');
            navigateToPage(pageName);
          });
        });

        // Handle browser back/forward
        window.addEventListener('hashchange', () => {
          const hash = window.location.hash.slice(1);
          if (hash && hash !== currentPage) {
            navigateToPage(hash);
          }
        });

        // Handle initial hash
        const initialHash = window.location.hash.slice(1);
        if (initialHash) {
          navigateToPage(initialHash);
        }
      }

      // Initialize router when DOM is ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => {
          setupNavigation();
          initializeIndicator();
        });
      } else {
        setupNavigation();
        initializeIndicator();
      }

      /**
       * Initialize sliding indicator on page load
       */
      function initializeIndicator() {
        setTimeout(() => {
          const activeNav = document.querySelector('.nav-item.active');
          if (activeNav) {
            moveIndicator(activeNav);
          }
        }, 500); // Delay to ensure nav items are rendered
      }

      // Expose navigateToPage globally
      window.navigateToPage = navigateToPage;

      console.log('âœ… SPA Router ready!');
    })();
  </script>

  <!-- Header Scroll Effect -->
  <script>
    (function() {
      'use strict';

      const header = document.querySelector('.app-header');
      let lastScrollY = window.scrollY;
      let ticking = false;

      function updateHeaderOnScroll() {
        const scrollY = window.scrollY;

        if (scrollY > 20) {
          header.classList.add('scrolled');
        } else {
          header.classList.remove('scrolled');
        }

        ticking = false;
      }

      function requestTick() {
        if (!ticking) {
          window.requestAnimationFrame(updateHeaderOnScroll);
          ticking = true;
        }
      }

      window.addEventListener('scroll', requestTick, { passive: true });

      console.log('âœ… Header scroll effect initialized');
    })();
  </script>

  <!-- News Page Functionality -->
  <script>
    (function() {
      'use strict';

      // Wait for DOM to be ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initNewsPage);
      } else {
        initNewsPage();
      }

      function initNewsPage() {
        // Category Filter Functionality
        const categoryButtons = document.querySelectorAll('.news-category-btn');
        const newsCards = document.querySelectorAll('.news-card');

        categoryButtons.forEach(button => {
          button.addEventListener('click', function() {
            const category = this.getAttribute('data-category');

            // Update active button
            categoryButtons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');

            // Filter news cards with smooth animation
            newsCards.forEach((card, index) => {
              const cardCategory = card.querySelector('.news-card-category');
              const cardCategoryClass = cardCategory ?
                Array.from(cardCategory.classList).find(cls =>
                  ['health', 'technology', 'research', 'tips'].includes(cls)
                ) : null;

              if (category === 'all' || cardCategoryClass === category) {
                // Reset animation and show card
                card.style.animation = 'none';
                setTimeout(() => {
                  card.style.display = 'flex';
                  card.style.animation = `fadeInUp 0.6s ease-out ${index * 0.1}s both`;
                }, 10);
              } else {
                // Hide card with fade out
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                setTimeout(() => {
                  card.style.display = 'none';
                }, 300);
              }
            });

            console.log(`ğŸ“° News filtered by category: ${category}`);
          });
        });

        // Bookmark Toggle Functionality
        const bookmarkButtons = document.querySelectorAll('.news-card-bookmark');

        bookmarkButtons.forEach(button => {
          button.addEventListener('click', function(e) {
            e.stopPropagation(); // Prevent card click event

            this.classList.toggle('active');
            const icon = this.querySelector('.material-symbols-outlined');

            if (this.classList.contains('active')) {
              // Bookmark added
              icon.style.fontVariationSettings = '"FILL" 1, "wght" 400, "GRAD" 0, "opsz" 24';
              console.log('ğŸ”– Article bookmarked');

              // Optional: Add to localStorage or backend
              // saveBookmark(articleId);
            } else {
              // Bookmark removed
              icon.style.fontVariationSettings = '"FILL" 0, "wght" 400, "GRAD" 0, "opsz" 24';
              console.log('ğŸ”– Bookmark removed');

              // Optional: Remove from localStorage or backend
              // removeBookmark(articleId);
            }
          });
        });

        // Featured Article Click
        const featuredArticle = document.querySelector('.news-featured');
        if (featuredArticle) {
          featuredArticle.addEventListener('click', function() {
            console.log('ğŸ“° Featured article clicked');
            // Add navigation to article detail page here
            // window.location.href = '/article/featured';
          });
        }

        // News Card Click (except bookmark button)
        newsCards.forEach(card => {
          card.addEventListener('click', function(e) {
            // Don't trigger if clicking bookmark button
            if (e.target.closest('.news-card-bookmark')) {
              return;
            }

            const title = this.querySelector('.news-card-title')?.textContent;
            console.log(`ğŸ“° Article clicked: ${title}`);
            // Add navigation to article detail page here
            // const articleId = this.getAttribute('data-article-id');
            // window.location.href = `/article/${articleId}`;
          });
        });

        // Load More Button
        const loadMoreBtn = document.querySelector('.load-more-btn');
        if (loadMoreBtn) {
          loadMoreBtn.addEventListener('click', function() {
            this.disabled = true;
            this.innerHTML = '<span>Memuat...</span>';

            // Simulate loading more articles
            setTimeout(() => {
              console.log('ğŸ“° Loading more articles...');
              // Add logic to fetch and append more articles here
              // fetchMoreArticles().then(articles => appendArticles(articles));

              this.disabled = false;
              this.innerHTML = '<span>Muat Lebih Banyak</span><span class="material-symbols-outlined">expand_more</span>';
            }, 1000);
          });
        }

        console.log('âœ… News page functionality initialized');
      }
    })();
  </script>

  <!-- Service Worker - DISABLED untuk debugging -->
  <script>
    // Service Worker temporarily disabled to fix loading issues
    console.log('â„¹ï¸ Service Worker disabled for debugging');

    // if ('serviceWorker' in navigator) {
    //   window.addEventListener('load', () => {
    //     navigator.serviceWorker.register('/sw.js')
    //       .then(registration => {
    //         console.log('ServiceWorker registration successful: ', registration.scope);
    //       })
    //       .catch(error => {
    //         console.log('ServiceWorker registration failed: ', error);
    //       });
    //   });
    // }
  </script>

  <!-- PWA Service Worker Registration -->
  <script>
    // Register Service Worker
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then((registration) => {
            console.log('âœ… Service Worker registered successfully:', registration.scope);

            // Check for updates periodically
            setInterval(() => {
              registration.update();
            }, 60000); // Check every minute

            // Handle updates
            registration.addEventListener('updatefound', () => {
              const newWorker = registration.installing;
              newWorker.addEventListener('statechange', () => {
                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                  // New service worker available, show update notification
                  showUpdateNotification();
                }
              });
            });
          })
          .catch((error) => {
            console.error('âŒ Service Worker registration failed:', error);
          });
      });

      // Show update notification
      function showUpdateNotification() {
        const updateBanner = document.createElement('div');
        updateBanner.style.cssText = `
          position: fixed;
          top: 20px;
          left: 50%;
          transform: translateX(-50%);
          background: linear-gradient(135deg, #FF8400 0%, #FF6B00 100%);
          color: white;
          padding: 16px 24px;
          border-radius: 12px;
          box-shadow: 0 8px 24px rgba(255, 132, 0, 0.3);
          z-index: 10000;
          display: flex;
          align-items: center;
          gap: 16px;
          font-family: 'Poppins', sans-serif;
          animation: slideDown 0.3s ease;
        `;
        updateBanner.innerHTML = `
          <span style="font-size: 14px; font-weight: 500;">Update tersedia!</span>
          <button onclick="window.location.reload()" style="
            background: white;
            color: #FF8400;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            font-size: 13px;
          ">Perbarui Sekarang</button>
        `;
        document.body.appendChild(updateBanner);

        setTimeout(() => {
          updateBanner.remove();
        }, 10000);
      }
    }

    // PWA Install Prompt
    let deferredPrompt;
    const installButton = document.createElement('button');
    installButton.id = 'pwa-install-btn';
    installButton.style.cssText = `
      position: fixed;
      bottom: 80px;
      right: 20px;
      width: 56px;
      height: 56px;
      background: linear-gradient(135deg, #FF8400 0%, #FF6B00 100%);
      color: white;
      border: none;
      border-radius: 50%;
      box-shadow: 0 4px 16px rgba(255, 132, 0, 0.3);
      cursor: pointer;
      z-index: 9999;
      display: none;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      transition: all 0.3s ease;
      font-family: 'Material Symbols Outlined';
    `;
    installButton.innerHTML = 'download';
    installButton.title = 'Install CARERING App';

    // Hover effect
    installButton.addEventListener('mouseenter', () => {
      installButton.style.transform = 'scale(1.1)';
      installButton.style.boxShadow = '0 6px 24px rgba(255, 132, 0, 0.4)';
    });

    installButton.addEventListener('mouseleave', () => {
      installButton.style.transform = 'scale(1)';
      installButton.style.boxShadow = '0 4px 16px rgba(255, 132, 0, 0.3)';
    });

    document.body.appendChild(installButton);

    // Capture the install prompt event
    window.addEventListener('beforeinstallprompt', (e) => {
      console.log('ğŸ“¥ PWA Install prompt available');
      e.preventDefault();
      deferredPrompt = e;

      // Show install button
      installButton.style.display = 'flex';

      // Animate entrance
      installButton.style.animation = 'bounceIn 0.5s ease';
    });

    // Handle install button click
    installButton.addEventListener('click', async () => {
      if (!deferredPrompt) {
        return;
      }

      // Show install prompt
      deferredPrompt.prompt();

      // Wait for user response
      const { outcome } = await deferredPrompt.userChoice;
      console.log(`User response to install prompt: ${outcome}`);

      if (outcome === 'accepted') {
        console.log('âœ… User accepted the install prompt');
        showInstallSuccessMessage();
      } else {
        console.log('âŒ User dismissed the install prompt');
      }

      // Clear the deferred prompt
      deferredPrompt = null;
      installButton.style.display = 'none';
    });

    // Handle successful installation
    window.addEventListener('appinstalled', (evt) => {
      console.log('âœ… CARERING PWA installed successfully');
      showInstallSuccessMessage();
      installButton.style.display = 'none';
    });

    // Show success message
    function showInstallSuccessMessage() {
      const successMessage = document.createElement('div');
      successMessage.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        padding: 32px;
        border-radius: 16px;
        box-shadow: 0 12px 48px rgba(0, 0, 0, 0.2);
        z-index: 10001;
        text-align: center;
        font-family: 'Poppins', sans-serif;
        animation: fadeIn 0.3s ease;
      `;
      successMessage.innerHTML = `
        <div style="font-size: 48px; margin-bottom: 16px;">ğŸ‰</div>
        <h3 style="margin: 0 0 8px 0; color: #1a1a1a; font-size: 20px;">Berhasil Diinstall!</h3>
        <p style="margin: 0; color: #64748b; font-size: 14px;">CARERING siap digunakan sebagai aplikasi</p>
      `;
      document.body.appendChild(successMessage);

      // Add backdrop
      const backdrop = document.createElement('div');
      backdrop.style.cssText = `
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 10000;
        animation: fadeIn 0.3s ease;
      `;
      document.body.appendChild(backdrop);

      setTimeout(() => {
        successMessage.remove();
        backdrop.remove();
      }, 3000);
    }

    // Check if already installed
    if (window.matchMedia('(display-mode: standalone)').matches ||
        window.navigator.standalone === true) {
      console.log('âœ… App is running in standalone mode (PWA installed)');
      installButton.style.display = 'none';
    }

    // Add CSS animations
    const style = document.createElement('style');
    style.textContent = `
      @keyframes slideDown {
        from {
          opacity: 0;
          transform: translate(-50%, -100%);
        }
        to {
          opacity: 1;
          transform: translate(-50%, 0);
        }
      }

      @keyframes bounceIn {
        0% {
          opacity: 0;
          transform: scale(0.3);
        }
        50% {
          opacity: 1;
          transform: scale(1.1);
        }
        100% {
          transform: scale(1);
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
    `;
    document.head.appendChild(style);
  </script>

</body>
</html>
