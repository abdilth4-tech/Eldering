<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>CARERING Healthcare - SPA</title>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="profile-modern.css">

  <!-- PWA & Icons -->
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/png" href="images/ai-chat.png">
  <link rel="apple-touch-icon" href="images/icon-192.png">
  <meta name="theme-color" content="#FF8400">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="CareRing">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="application-name" content="CareRing">
  <meta name="msapplication-TileColor" content="#FF8400">
  <meta name="msapplication-TileImage" content="/images/icon-192.png">
  <meta name="description" content="Aplikasi Monitoring Kesehatan Real-time dengan AI Assistant">

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SPA CORE STYLES - Hide/Show Pages
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .page {
      display: none !important;
      visibility: hidden !important;
      position: absolute !important;
      left: -9999px !important;
      width: 0 !important;
      height: 0 !important;
      overflow: hidden !important;
      opacity: 0 !important;
      pointer-events: none !important;
    }

    .page.active {
      display: block !important;
      visibility: visible !important;
      position: relative !important;
      left: 0 !important;
      width: auto !important;
      height: auto !important;
      overflow: visible !important;
      opacity: 1 !important;
      pointer-events: auto !important;
      animation: fadeIn 0.3s ease-in-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Prevent flash of content */
    .mobile-wrapper {
      min-height: 100vh;
      overflow-x: hidden;
    }
    
    /* Ensure page container properly clips content */
    #page-container {
      position: relative;
      overflow: hidden;
    }

    /* Extra protection for specific pages */
    #page-ai-chat:not(.active),
    #page-profil:not(.active),
    #page-kuisioner:not(.active),
    #page-forum:not(.active),
    #page-news:not(.active),
    #page-perangkat:not(.active),
    #page-home:not(.active) {
      display: none !important;
      visibility: hidden !important;
      position: absolute !important;
      left: -9999px !important;
      opacity: 0 !important;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PWA INSTALL BANNER STYLES
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .pwa-install-banner {
      display: none;
      position: fixed;
      bottom: 90px;
      left: 50%;
      transform: translateX(-50%);
      width: calc(100% - 32px);
      max-width: 420px;
      background: linear-gradient(135deg, #FF8400 0%, #FF6B00 100%);
      border-radius: 16px;
      padding: 16px;
      box-shadow: 0 8px 32px rgba(255, 132, 0, 0.35);
      z-index: 9999;
      animation: slideUpBanner 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .pwa-install-banner.show {
      display: block;
    }

    @keyframes slideUpBanner {
      from {
        opacity: 0;
        transform: translateX(-50%) translateY(100%);
      }
      to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
      }
    }

    .pwa-install-content {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .pwa-install-icon {
      width: 48px;
      height: 48px;
      border-radius: 12px;
      background: white;
      padding: 4px;
      flex-shrink: 0;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .pwa-install-icon img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      border-radius: 8px;
    }

    .pwa-install-text {
      flex: 1;
      min-width: 0;
    }

    .pwa-install-title {
      display: block;
      font-size: 15px;
      font-weight: 700;
      color: white;
      margin-bottom: 2px;
    }

    .pwa-install-subtitle {
      display: block;
      font-size: 12px;
      color: rgba(255, 255, 255, 0.9);
    }

    .pwa-install-actions {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-shrink: 0;
    }

    .pwa-install-button {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 10px 16px;
      background: white;
      border: none;
      border-radius: 10px;
      font-size: 13px;
      font-weight: 600;
      color: #FF8400;
      cursor: pointer;
      transition: all 0.2s;
      font-family: 'Poppins', sans-serif;
    }

    .pwa-install-button:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .pwa-install-button .material-symbols-outlined {
      font-size: 18px;
    }

    .pwa-install-close {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.2);
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .pwa-install-close:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    .pwa-install-close .material-symbols-outlined {
      font-size: 20px;
      color: white;
    }

    /* PWA Toast */
    .pwa-toast {
      display: none;
      position: fixed;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%);
      background: #27AE60;
      color: white;
      padding: 12px 20px;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 500;
      box-shadow: 0 4px 20px rgba(39, 174, 96, 0.35);
      z-index: 10000;
      align-items: center;
      gap: 8px;
    }

    .pwa-toast.show {
      display: flex;
      animation: toastIn 0.3s ease, toastOut 0.3s ease 2.7s forwards;
    }

    @keyframes toastIn {
      from {
        opacity: 0;
        transform: translateX(-50%) translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
      }
    }

    @keyframes toastOut {
      to {
        opacity: 0;
        transform: translateX(-50%) translateY(20px);
      }
    }

    .pwa-toast .material-symbols-outlined {
      font-size: 20px;
    }

    /* iOS Install Instructions */
    .pwa-ios-instructions {
      display: none;
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: white;
      border-radius: 20px 20px 0 0;
      padding: 24px;
      box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.15);
      z-index: 10000;
    }

    .pwa-ios-instructions.show {
      display: block;
      animation: slideUp 0.3s ease;
    }

    .pwa-ios-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .pwa-ios-title {
      font-size: 18px;
      font-weight: 700;
      color: #333;
    }

    .pwa-ios-steps {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .pwa-ios-step {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 16px 0;
      border-bottom: 1px solid #eee;
    }

    .pwa-ios-step:last-child {
      border-bottom: none;
    }

    .pwa-ios-step-number {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: linear-gradient(135deg, #FF8400, #FF6B00);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 14px;
      flex-shrink: 0;
    }

    .pwa-ios-step-text {
      font-size: 14px;
      color: #444;
      line-height: 1.5;
    }

    .pwa-ios-step-text .material-symbols-outlined {
      font-size: 18px;
      vertical-align: middle;
      color: #007AFF;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PERANGKAT PAGE STYLES
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .device-hero {
      text-align: center;
      margin-top: 10px;
      margin-bottom: 20px;
    }

    .device-hero img {
      width: 140px;
      filter: drop-shadow(8px 8px 16px rgba(163, 177, 198, 0.4)) drop-shadow(-8px -8px 16px rgba(255, 255, 255, 0.3));
      animation: float 4s ease-in-out infinite;
    }

    @keyframes float {
      0% { transform: translateY(0); }
      50% { transform: translateY(-8px); }
      100% { transform: translateY(0); }
    }

    .device-section-title {
      font-size: 1.6em;
      font-weight: 700;
      text-align: center;
      margin-bottom: 15px;
    }\
    

    .device-card {
      background: #e0e5ec;
      padding: 22px;
      border-radius: 22px;
      box-shadow:
        9px 9px 16px rgba(163, 177, 198, 0.6),
        -9px -9px 16px rgba(255, 255, 255, 0.5);
      animation: fadeInUp .4s ease;
      border: none;
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(12px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .device-name {
      font-size: 1.4em;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .battery-bar {
      height: 10px;
      background: #e0e5ec;
      border-radius: 10px;
      margin-top: 6px;
      overflow: hidden;
      box-shadow:
        inset 3px 3px 6px rgba(163, 177, 198, 0.5),
        inset -3px -3px 6px rgba(255, 255, 255, 0.5);
    }

    .battery-fill {
      height: 100%;
      width: 0%;
      background: #27AE60;
      border-radius: 10px;
      transition: width .5s ease;
      box-shadow:
        2px 2px 4px rgba(39, 174, 96, 0.3),
        -2px -2px 4px rgba(46, 204, 113, 0.2);
    }

    .device-actions {
      margin-top: 20px;
      display: grid;
      gap: 12px;
    }

    .action-btn {
      background: #e0e5ec;
      padding: 14px;
      border-radius: 16px;
      display: flex;
      align-items: center;
      gap: 12px;
      cursor: pointer;
      box-shadow:
        6px 6px 12px rgba(163, 177, 198, 0.6),
        -6px -6px 12px rgba(255, 255, 255, 0.5);
      transition: all 0.3s;
      border: none;
    }

    .action-btn:hover {
      box-shadow:
        inset 4px 4px 8px rgba(163, 177, 198, 0.5),
        inset -4px -4px 8px rgba(255, 255, 255, 0.5);
    }

    .action-btn span {
      font-size: 26px;
      color: #4a90e2;
    }

    .action-btn-disconnect {
      background: #e0e5ec !important;
    }

    .action-btn-disconnect:hover {
      box-shadow:
        inset 4px 4px 8px rgba(163, 177, 198, 0.5),
        inset -4px -4px 8px rgba(255, 255, 255, 0.5) !important;
    }

    .action-btn-disconnect span {
      color: #E74C3C !important;
    }

    .no-devices {
      text-align: center;
      padding: 28px;
      background: #e0e5ec;
      border-radius: 20px;
      margin-top: 20px;
      box-shadow:
        9px 9px 16px rgba(163, 177, 198, 0.6),
        -9px -9px 16px rgba(255, 255, 255, 0.5);
      border: none;
    }

    .add-device-btn {
      transition: all 0.3s ease;
      background: #4a90e2 !important;
      box-shadow:
        6px 6px 12px rgba(46, 95, 153, 0.4),
        -6px -6px 12px rgba(74, 144, 226, 0.3) !important;
    }

    .add-device-btn:hover {
      box-shadow:
        inset 4px 4px 8px rgba(46, 95, 153, 0.4),
        inset -4px -4px 8px rgba(74, 144, 226, 0.3) !important;
      transform: translateY(-1px);
    }

    /* BLE Modal */
    .ble-modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
    }

    .ble-modal.show {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .ble-modal-content {
      background: #e0e5ec;
      border-radius: 24px;
      padding: 28px;
      width: 90%;
      max-width: 500px;
      box-shadow:
        9px 9px 16px rgba(163, 177, 198, 0.6),
        -9px -9px 16px rgba(255, 255, 255, 0.5);
      position: relative;
      border: none;
    }

    .ble-modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .ble-modal-title {
      font-size: 1.5em;
      font-weight: 700;
      color: #333;
    }

    .ble-close-btn {
      background: #e0e5ec;
      border: none;
      font-size: 32px;
      cursor: pointer;
      color: #666;
      padding: 0;
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.3s;
      box-shadow:
        4px 4px 8px rgba(163, 177, 198, 0.6),
        -4px -4px 8px rgba(255, 255, 255, 0.5);
    }

    .ble-close-btn:hover {
      box-shadow:
        inset 3px 3px 6px rgba(163, 177, 198, 0.5),
        inset -3px -3px 6px rgba(255, 255, 255, 0.5);
      color: #E74C3C;
    }

    .ble-input-group {
      margin-bottom: 20px;
    }

    .ble-input-label {
      display: block;
      font-size: 0.9em;
      font-weight: 600;
      color: #555;
      margin-bottom: 8px;
    }

    .ble-input {
      width: 100%;
      padding: 14px;
      border: none;
      border-radius: 12px;
      font-size: 1em;
      transition: all 0.3s;
      box-sizing: border-box;
      background: #e0e5ec;
      color: #333;
      box-shadow:
        inset 4px 4px 8px rgba(163, 177, 198, 0.5),
        inset -4px -4px 8px rgba(255, 255, 255, 0.5);
    }

    .ble-input:focus {
      outline: none;
      box-shadow:
        inset 5px 5px 10px rgba(163, 177, 198, 0.6),
        inset -5px -5px 10px rgba(255, 255, 255, 0.6);
    }

    .ble-progress {
      display: none;
      width: 100%;
      height: 6px;
      background: #e0e5ec;
      border-radius: 10px;
      overflow: hidden;
      margin: 20px 0;
      box-shadow:
        inset 3px 3px 6px rgba(163, 177, 198, 0.5),
        inset -3px -3px 6px rgba(255, 255, 255, 0.5);
    }

    .ble-progress.show {
      display: block;
    }

    .ble-progress-bar {
      height: 100%;
      background: #4a90e2;
      width: 0%;
      animation: progress 1.5s ease-in-out infinite;
      border-radius: 10px;
    }

    @keyframes progress {
      0% { width: 0%; }
      50% { width: 70%; }
      100% { width: 100%; }
    }

    .ble-connect-btn {
      width: 100%;
      padding: 16px;
      background: #4a90e2;
      color: white;
      border: none;
      border-radius: 16px;
      font-size: 1.1em;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      transition: all 0.3s;
      box-shadow:
        6px 6px 12px rgba(46, 95, 153, 0.4),
        -6px -6px 12px rgba(74, 144, 226, 0.3);
    }

    .ble-connect-btn:hover:not(:disabled) {
      box-shadow:
        inset 4px 4px 8px rgba(46, 95, 153, 0.4),
        inset -4px -4px 8px rgba(74, 144, 226, 0.3);
      transform: translateY(-1px);
    }

    .ble-connect-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .ble-message {
      margin-top: 16px;
      padding: 12px;
      border-radius: 12px;
      font-size: 0.9em;
      display: none;
      border: none;
    }

    .ble-message.show {
      display: block;
    }

    .ble-message.success {
      background: #e0e5ec;
      color: #27AE60;
      box-shadow:
        inset 3px 3px 6px rgba(163, 177, 198, 0.4),
        inset -3px -3px 6px rgba(255, 255, 255, 0.4);
      border-left: 4px solid #27AE60;
    }

    .ble-message.error {
      background: #e0e5ec;
      color: #E74C3C;
      box-shadow:
        inset 3px 3px 6px rgba(163, 177, 198, 0.4),
        inset -3px -3px 6px rgba(255, 255, 255, 0.4);
      border-left: 4px solid #E74C3C;
    }

    .ble-message.info {
      background: #e0e5ec;
      color: #4a90e2;
      box-shadow:
        inset 3px 3px 6px rgba(163, 177, 198, 0.4),
        inset -3px -3px 6px rgba(255, 255, 255, 0.4);
      border-left: 4px solid #4a90e2;
    }

    /* Enhanced BLE Modal - Guide Section */
    .ble-guide-section {
      margin-bottom: 20px;
    }

    .ble-section-title {
      font-size: 1.1em;
      font-weight: 600;
      color: #333;
      margin: 0 0 12px 0;
    }

    .ble-checklist {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .ble-checklist-item {
      display: flex;
      gap: 12px;
      align-items: flex-start;
      padding: 12px;
      background: rgba(255, 255, 255, 0.5);
      border-radius: 12px;
      border-left: 3px solid #4a90e2;
    }

    .ble-checklist-item .check-icon {
      font-size: 24px;
      color: #4a90e2;
      flex-shrink: 0;
    }

    .ble-checklist-item strong {
      display: block;
      color: #333;
      font-size: 0.95em;
      margin-bottom: 4px;
    }

    .ble-checklist-item p {
      margin: 0;
      color: #666;
      font-size: 0.85em;
      line-height: 1.4;
    }

    /* Info Box */
    .ble-info-box {
      display: flex;
      gap: 12px;
      padding: 14px;
      background: rgba(74, 144, 226, 0.1);
      border-radius: 12px;
      border-left: 3px solid #4a90e2;
      margin-bottom: 20px;
    }

    .ble-info-box .material-symbols-outlined {
      font-size: 24px;
      color: #4a90e2;
      flex-shrink: 0;
    }

    .ble-info-box strong {
      display: block;
      color: #333;
      font-size: 0.95em;
      margin-bottom: 4px;
    }

    .ble-info-box p {
      margin: 0;
      color: #555;
      font-size: 0.85em;
      line-height: 1.5;
    }

    /* Troubleshooting Section */
    .ble-troubleshooting {
      margin-top: 20px;
      border-top: 1px solid rgba(0, 0, 0, 0.1);
      padding-top: 16px;
    }

    .ble-troubleshooting summary {
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 600;
      color: #666;
      font-size: 0.9em;
      padding: 8px;
      border-radius: 8px;
      transition: all 0.2s;
      user-select: none;
    }

    .ble-troubleshooting summary:hover {
      background: rgba(255, 255, 255, 0.5);
      color: #333;
    }

    .ble-troubleshooting summary .material-symbols-outlined {
      font-size: 20px;
      color: #F39C12;
    }

    .ble-troubleshooting[open] summary {
      margin-bottom: 12px;
      color: #333;
    }

    .troubleshooting-content {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .trouble-item {
      padding: 12px;
      background: rgba(255, 255, 255, 0.5);
      border-radius: 8px;
      border-left: 3px solid #F39C12;
    }

    .trouble-item strong {
      display: block;
      color: #333;
      font-size: 0.9em;
      margin-bottom: 4px;
    }

    .trouble-item p {
      margin: 0;
      color: #666;
      font-size: 0.85em;
      line-height: 1.4;
    }

    /* Update modal content untuk scroll */
    .ble-modal-content {
      max-height: 90vh;
      overflow-y: auto;
      scrollbar-width: thin;
      scrollbar-color: rgba(74, 144, 226, 0.3) transparent;
    }

    .ble-modal-content::-webkit-scrollbar {
      width: 6px;
    }

    .ble-modal-content::-webkit-scrollbar-track {
      background: transparent;
    }

    .ble-modal-content::-webkit-scrollbar-thumb {
      background: rgba(74, 144, 226, 0.3);
      border-radius: 10px;
    }

    .ble-modal-content::-webkit-scrollbar-thumb:hover {
      background: rgba(74, 144, 226, 0.5);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       NEWS PAGE - MODERN PROFESSIONAL DESIGN
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

    /* News Header */
    .news-header {
      text-align: center;
      margin-bottom: 35px;
      animation: fadeInDown 0.6s ease-out;
    }

    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .news-main-title {
      font-size: 2.2em;
      font-weight: 800;
      background: linear-gradient(135deg, #FF8400 0%, #007BFF 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 8px;
    }

    .news-subtitle {
      color: #666;
      font-size: 1em;
      font-weight: 400;
    }

    /* Featured Article */
    .news-featured {
      position: relative;
      border-radius: 24px;
      overflow: hidden;
      margin-bottom: 35px;
      height: 420px;
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
      animation: fadeInUp 0.6s ease-out 0.2s both;
      cursor: pointer;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .news-featured:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.25);
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .featured-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s ease;
    }

    .news-featured:hover .featured-image {
      transform: scale(1.05);
    }

    .featured-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 35px 28px;
      background: linear-gradient(to top, rgba(0, 0, 0, 0.9) 0%, rgba(0, 0, 0, 0.6) 60%, transparent 100%);
      color: white;
    }

    .featured-badge {
      display: inline-block;
      background: linear-gradient(135deg, #FF8400, #007BFF);
      color: white;
      padding: 6px 16px;
      border-radius: 20px;
      font-size: 0.75em;
      font-weight: 700;
      letter-spacing: 1px;
      margin-bottom: 12px;
      text-transform: uppercase;
    }

    .featured-title {
      font-size: 1.8em;
      font-weight: 700;
      margin-bottom: 10px;
      line-height: 1.3;
    }

    .featured-excerpt {
      font-size: 1em;
      opacity: 0.9;
      margin-bottom: 18px;
      line-height: 1.5;
    }

    .featured-meta {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .featured-author-img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 2px solid rgba(255, 255, 255, 0.3);
    }

    .featured-author-info {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .featured-author-name {
      font-weight: 600;
      font-size: 0.95em;
    }

    .featured-author-date {
      font-size: 0.85em;
      opacity: 0.8;
    }

    /* Category Filter */
    .news-categories {
      display: flex;
      gap: 10px;
      margin-bottom: 30px;
      overflow-x: auto;
      padding-bottom: 5px;
      animation: fadeIn 0.6s ease-out 0.4s both;
      scrollbar-width: none;
    }

    .news-categories::-webkit-scrollbar {
      display: none;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    .news-category-btn {
      flex-shrink: 0;
      padding: 10px 20px;
      border: 2px solid #e2e8f0;
      border-radius: 25px;
      background: white;
      color: #666;
      font-weight: 600;
      font-size: 0.9em;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Poppins', sans-serif;
    }

    .news-category-btn:hover {
      border-color: #FF8400;
      color: #FF8400;
      transform: translateY(-2px);
    }

    .news-category-btn.active {
      background: linear-gradient(135deg, #FF8400, #007BFF);
      color: white;
      border-color: transparent;
      box-shadow: 0 4px 15px rgba(255, 132, 0, 0.3);
    }

    /* News Grid */
    .news-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 24px;
      margin-bottom: 40px;
    }

    /* News Card */
    .news-card {
      background: white;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      transition: all 0.3s ease;
      cursor: pointer;
      animation: fadeInUp 0.6s ease-out both;
      display: flex;
      flex-direction: column;
    }

    .news-card:nth-child(1) { animation-delay: 0.5s; }
    .news-card:nth-child(2) { animation-delay: 0.6s; }
    .news-card:nth-child(3) { animation-delay: 0.7s; }
    .news-card:nth-child(4) { animation-delay: 0.8s; }
    .news-card:nth-child(5) { animation-delay: 0.9s; }
    .news-card:nth-child(6) { animation-delay: 1s; }

    .news-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
    }

    .news-card-image {
      position: relative;
      height: 200px;
      overflow: hidden;
      background: #f0f0f0;
    }

    .news-card-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s ease;
    }

    .news-card:hover .news-card-image img {
      transform: scale(1.1);
    }

    .news-card-category {
      position: absolute;
      top: 12px;
      right: 12px;
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 0.75em;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      backdrop-filter: blur(10px);
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    }

    .news-card-category.health {
      background: rgba(39, 174, 96, 0.95);
      color: white;
    }

    .news-card-category.technology {
      background: rgba(0, 123, 255, 0.95);
      color: white;
    }

    .news-card-category.research {
      background: rgba(155, 89, 182, 0.95);
      color: white;
    }

    .news-card-category.tips {
      background: rgba(243, 156, 18, 0.95);
      color: white;
    }

    .news-card-content {
      padding: 22px;
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .news-card-title {
      font-size: 1.25em;
      font-weight: 700;
      color: #2d3748;
      margin-bottom: 12px;
      line-height: 1.4;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      transition: color 0.3s ease;
    }

    .news-card:hover .news-card-title {
      color: #FF8400;
    }

    .news-card-excerpt {
      font-size: 0.95em;
      color: #64748b;
      line-height: 1.6;
      margin-bottom: 18px;
      flex: 1;
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .news-card-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-top: 16px;
      border-top: 1px solid #e2e8f0;
    }

    .news-card-author {
      display: flex;
      align-items: center;
      gap: 10px;
      flex: 1;
    }

    .news-card-author img {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      border: 2px solid #f0f0f0;
    }

    .news-card-author-info {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .author-name {
      font-size: 0.9em;
      font-weight: 600;
      color: #2d3748;
    }

    .publish-date {
      font-size: 0.8em;
      color: #94a3b8;
    }

    .news-card-bookmark {
      background: transparent;
      border: none;
      color: #cbd5e0;
      cursor: pointer;
      padding: 8px;
      border-radius: 8px;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .news-card-bookmark:hover {
      background: #f7fafc;
      color: #FF8400;
      transform: scale(1.1);
    }

    .news-card-bookmark.active {
      color: #FF8400;
    }

    .news-card-bookmark .material-symbols-outlined {
      font-size: 22px;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .news-main-title {
        font-size: 1.8em;
      }

      .news-featured {
        height: 350px;
      }

      .featured-overlay {
        padding: 25px 20px;
      }

      .featured-title {
        font-size: 1.4em;
      }

      .featured-excerpt {
        font-size: 0.9em;
        margin-bottom: 14px;
      }

      .news-grid {
        grid-template-columns: 1fr;
        gap: 20px;
      }

      .news-categories {
        gap: 8px;
      }

      .news-category-btn {
        padding: 8px 16px;
        font-size: 0.85em;
      }
    }

    @media (max-width: 480px) {
      .news-featured {
        height: 300px;
      }

      .featured-title {
        font-size: 1.2em;
      }

      .news-card-title {
        font-size: 1.1em;
      }
    }

    /* Load More Button */
    .news-load-more {
      text-align: center;
      margin-top: 40px;
      animation: fadeIn 0.6s ease-out 1.2s both;
    }

    .load-more-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 14px 32px;
      background: linear-gradient(135deg, #FF8400, #007BFF);
      color: white;
      border: none;
      border-radius: 30px;
      font-size: 1em;
      font-weight: 600;
      font-family: 'Poppins', sans-serif;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 20px rgba(255, 132, 0, 0.3);
    }

    .load-more-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 30px rgba(255, 132, 0, 0.4);
    }

    .load-more-btn:active {
      transform: translateY(-1px);
    }

    .load-more-btn .material-symbols-outlined {
      font-size: 24px;
      transition: transform 0.3s ease;
    }

    .load-more-btn:hover .material-symbols-outlined {
      transform: translateY(3px);
    }
  </style>
</head>
<body>

  <!-- PWA Install Banner -->
  <div id="pwa-install-banner" class="pwa-install-banner">
    <div class="pwa-install-content">
      <div class="pwa-install-icon">
        <img src="/images/icon-192.png" alt="CareRing" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCA0OCA0OCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIyNCIgY3k9IjI0IiByPSIyNCIgZmlsbD0iI0ZGODQwMCIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjI0IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zNWVtIj7inaTvuI88L3RleHQ+PC9zdmc+'">
      </div>
      <div class="pwa-install-text">
        <span class="pwa-install-title">Install CareRing</span>
        <span class="pwa-install-subtitle">Akses lebih cepat dari Home Screen</span>
      </div>
      <div class="pwa-install-actions">
        <button id="pwa-install-btn" class="pwa-install-button">
          <span class="material-symbols-outlined">download</span>
          Install
        </button>
        <button id="pwa-install-close" class="pwa-install-close">
          <span class="material-symbols-outlined">close</span>
        </button>
      </div>
    </div>
  </div>

  <!-- PWA Install Success Toast -->
  <div id="pwa-install-toast" class="pwa-toast">
    <span class="material-symbols-outlined">check_circle</span>
    <span>CareRing berhasil diinstall!</span>
  </div>

  <div class="mobile-wrapper">

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SHARED HEADER (Persisten di semua pages)
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="app-header">
        <div class="logo-container" style="cursor: pointer;" data-navigate="home">
            <img src="images/ai-chat.png" alt="CareRing Logo" class="app-logo">
            <div class="logo-text">
                <span class="logo-care">Care</span><span class="logo-ring">Ring</span>
            </div>
        </div>

        <div class="profile-icon" data-navigate="profil">
            <img id="nav-user-photo" src="" alt="Profile" style="display: none;">
            <span class="material-symbols-outlined">person</span>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         PAGE CONTAINER - Semua halaman ada di sini
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <main id="page-container">

      <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PAGE: HOME / DASHBOARD
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <div id="page-home" class="page active container">

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             HERO SECTION - MODERN GREETING
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div class="hero-section">
            <div class="hero-content">
                <h1 class="hero-greeting" id="user-greeting">Memuat...</h1>
                <p class="hero-subtitle">Monitor kesehatan Anda secara real-time dengan teknologi modern</p>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             QUICK SEARCH
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div class="search-bar">
            <span class="search-icon"><span class="material-symbols-outlined">search</span></span>
            <input type="text" placeholder="Cari data kesehatan, artikel, atau diskusi...">
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             QUICK ACCESS CATEGORIES
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div class="quick-access-section">
            <h2 class="section-title-modern">Akses Cepat</h2>
            <div class="categories-grid">
                <div class="category-card-modern" data-navigate="perangkat">
                    <div class="category-icon-wrapper">
                        <span class="material-symbols-outlined">devices</span>
                    </div>
                    <h3 class="category-title">Device</h3>
                    <p class="category-desc">Kelola perangkat</p>
                </div>
                <div class="category-card-modern" data-navigate="ai-chat">
                    <div class="category-icon-wrapper">
                        <span class="material-symbols-outlined">smart_toy</span>
                    </div>
                    <h3 class="category-title">AI Assistant</h3>
                    <p class="category-desc">Chat dengan AI</p>
                </div>
                <div class="category-card-modern" data-navigate="forum">
                    <div class="category-icon-wrapper">
                        <span class="material-symbols-outlined">forum</span>
                    </div>
                    <h3 class="category-title">Forum</h3>
                    <p class="category-desc">Diskusi komunitas</p>
                </div>
                <div class="category-card-modern" data-navigate="news">
                    <div class="category-icon-wrapper">
                        <span class="material-symbols-outlined">newspaper</span>
                    </div>
                    <h3 class="category-title">Berita</h3>
                    <p class="category-desc">Update terkini</p>
                </div>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             FEATURED METRIC - HERO CARD
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div class="featured-metric-section">
            <h2 class="section-title-modern">Status Kesehatan Utama</h2>
            <div class="hero-metric-card">
                <div class="hero-metric-header">
                    <span class="hero-metric-icon">ğŸŒ¡ï¸</span>
                    <div class="hero-metric-info">
                        <p class="hero-metric-label">Suhu Tubuh</p>
                        <p class="hero-metric-time" id="vitals-last-update">Data terbaru</p>
                    </div>
                </div>
                <div class="hero-metric-value-wrapper">
                    <span class="hero-metric-value" id="suhu-tubuh-value">--</span>
                    <span class="hero-metric-unit">Â°C</span>
                </div>
                <div class="hero-metric-status">
                    <span class="status-badge-hero" id="suhu-tubuh-status">--</span>
                </div>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             VITAL SIGNS GRID - MODERN LAYOUT
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div class="vitals-section">
            <div class="section-header-modern">
                <h2 class="section-title-modern">Vital Signs</h2>
                <span class="section-subtitle">Monitoring real-time</span>
            </div>

            <div class="vitals-grid-modern">
                <!-- Heart Rate Card -->
                <div class="vital-card vital-card-red">
                    <div class="vital-card-header">
                        <span class="vital-icon">â¤ï¸</span>
                        <div class="vital-badge">Live</div>
                    </div>
                    <div class="vital-value-wrapper">
                        <span class="vital-value" id="home-heartrate">--</span>
                        <span class="vital-unit">BPM</span>
                    </div>
                    <p class="vital-label">Heart Rate</p>
                    <div class="vital-mini-chart"></div>
                </div>

                <!-- SpO2 Card -->
                <div class="vital-card vital-card-blue">
                    <div class="vital-card-header">
                        <span class="vital-icon">ğŸ’§</span>
                        <div class="vital-badge">Live</div>
                    </div>
                    <div class="vital-value-wrapper">
                        <span class="vital-value" id="home-spo2">--</span>
                        <span class="vital-unit">%</span>
                    </div>
                    <p class="vital-label">SpO2 Level</p>
                    <div class="vital-mini-chart"></div>
                </div>

                <!-- Body Temperature Card -->
                <div class="vital-card vital-card-orange">
                    <div class="vital-card-header">
                        <span class="vital-icon">ğŸŒ¡ï¸</span>
                        <div class="vital-badge">Live</div>
                    </div>
                    <div class="vital-value-wrapper">
                        <span class="vital-value" id="home-temperature">--</span>
                        <span class="vital-unit">Â°C</span>
                    </div>
                    <p class="vital-label">Body Temp</p>
                    <div class="vital-mini-chart"></div>
                </div>

                <!-- Ambient Temperature Card -->
                <div class="vital-card vital-card-green">
                    <div class="vital-card-header">
                        <span class="vital-icon">ğŸ </span>
                        <div class="vital-badge">Live</div>
                    </div>
                    <div class="vital-value-wrapper">
                        <span class="vital-value" id="home-ambient">--</span>
                        <span class="vital-unit">Â°C</span>
                    </div>
                    <p class="vital-label">Room Temp</p>
                    <div class="vital-mini-chart"></div>
                </div>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             DEVICE STATUS - COMPACT MINIMAL CARD
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div class="device-status-section">
            <div class="device-status-card">
                <div class="device-status-header">
                    <div class="device-status-icon">
                        <span class="material-symbols-outlined">bluetooth</span>
                    </div>
                    <div class="device-status-info">
                        <p class="device-status-label">Device</p>
                        <h3 class="device-status-name" id="home-device-name">Mencari perangkat...</h3>
                    </div>
                    <span id="home-device-status" class="status-indicator status-offline">
                        <span class="status-dot"></span>
                        <span class="status-text">Offline</span>
                    </span>
                </div>
            </div>
        </div>

        <div class="section-header" style="margin-top: 20px;">
            <h2 class="section-title">Grafik Kesehatan</h2>
        </div>

        <section class="chart-card card">
            <p class="chart-title">Riwayat Detak Jantung (10 data terakhir)</p>
            <canvas id="bpmChart"></canvas>
        </section>

        <section class="chart-card card">
            <p class="chart-title">Riwayat Suhu Tubuh (10 data terakhir)</p>
            <canvas id="tempChart"></canvas>
        </section>

        <section class="chart-card card">
            <p class="chart-title">Riwayat Suhu Ruangan (10 data terakhir)</p>
            <canvas id="ambientChart"></canvas>
        </section>

        <section class="health-summary-card card">
            <h2 class="chart-title" style="text-align: center;">Rangkuman Kesehatan</h2>

            <div id="summary-status-container" class="report-status-container">
                <p>Status Keseluruhan:</p>
                <h3 id="summary-status-text" class="status-bugar">Memuat...</h3>
            </div>

            <div class="report-details">
                <h4>Detail Laporan:</h4>
                <ul id="summary-detail-list" class="report-details-list">
                    <li>Memuat data sensor...</li>
                </ul>
            </div>
        </section>

        <!-- Modal -->
        <div id="report-modal" class="modal">
          <div class="modal-content">
            <span class="close-btn" id="modal-close-btn">&times;</span>
            <h2>Rangkuman Kesehatan</h2>
            <div class="report-status-container">
              <p>Status Keseluruhan:</p>
              <h3 id="report-status" class="status-bugar">BUGAR</h3>
            </div>
            <div class="report-details">
              <h4>Detail Laporan:</h4>
              <ul id="report-detail-list"></ul>
            </div>
            <div class="report-recommendations">
              <h4>Rekomendasi (Treatment):</h4>
              <ul id="report-list"></ul>
            </div>
          </div>
        </div>
      </div>

      <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PAGE: NEWS - MODERN REDESIGN
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <div id="page-news" class="page container">

        <!-- News Header -->
        <div class="news-header">
          <h2 class="news-main-title">Berita & Artikel</h2>
          <p class="news-subtitle">Update terkini seputar kesehatan dan teknologi</p>
        </div>

        <!-- Featured Article -->
        <div class="news-featured">
          <img src="https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?w=800&h=450&fit=crop" alt="Featured" class="featured-image">
          <div class="featured-overlay">
            <span class="featured-badge">FEATURED</span>
            <h3 class="featured-title">Inovasi AI dalam Monitoring Kesehatan Real-Time</h3>
            <p class="featured-excerpt">Teknologi kecerdasan buatan kini mampu mendeteksi anomali kesehatan lebih cepat dan akurat...</p>
            <div class="featured-meta">
              <img src="https://ui-avatars.com/api/?name=Dr+Sarah&background=4a90e2&color=fff&size=64" alt="Author" class="featured-author-img">
              <div class="featured-author-info">
                <span class="featured-author-name">Dr. Sarah Johnson</span>
                <span class="featured-author-date">3 Jan 2025 â€¢ 5 min read</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Category Filter -->
        <div class="news-categories">
          <button class="news-category-btn active" data-category="all">Semua</button>
          <button class="news-category-btn" data-category="health">Kesehatan</button>
          <button class="news-category-btn" data-category="technology">Teknologi</button>
          <button class="news-category-btn" data-category="research">Riset</button>
          <button class="news-category-btn" data-category="tips">Tips</button>
        </div>

        <!-- News Grid -->
        <div class="news-grid">
          <!-- Article 1 -->
          <article class="news-card">
            <div class="news-card-image">
              <img src="https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=400&h=250&fit=crop" alt="Article">
              <span class="news-card-category health">Kesehatan</span>
            </div>
            <div class="news-card-content">
              <h3 class="news-card-title">Pentingnya Monitoring SpO2 untuk Kesehatan Jantung</h3>
              <p class="news-card-excerpt">Saturasi oksigen dalam darah menjadi indikator penting untuk mendeteksi masalah kardiovaskular sejak dini...</p>
              <div class="news-card-footer">
                <div class="news-card-author">
                  <img src="https://ui-avatars.com/api/?name=Ahmad+Zaki&background=27AE60&color=fff&size=64" alt="Author">
                  <div class="news-card-author-info">
                    <span class="author-name">Ahmad Zaki</span>
                    <span class="publish-date">2 hari lalu â€¢ 4 min</span>
                  </div>
                </div>
                <button class="news-card-bookmark">
                  <span class="material-symbols-outlined">bookmark</span>
                </button>
              </div>
            </div>
          </article>

          <!-- Article 2 -->
          <article class="news-card">
            <div class="news-card-image">
              <img src="https://images.unsplash.com/photo-1530026405186-ed1f139313f8?w=400&h=250&fit=crop" alt="Article">
              <span class="news-card-category technology">Teknologi</span>
            </div>
            <div class="news-card-content">
              <h3 class="news-card-title">Sensor Wearable: Masa Depan Healthcare</h3>
              <p class="news-card-excerpt">Perangkat wearable kini mampu memantau 10+ parameter kesehatan secara bersamaan dengan akurasi tinggi...</p>
              <div class="news-card-footer">
                <div class="news-card-author">
                  <img src="https://ui-avatars.com/api/?name=Lisa+Chen&background=E74C3C&color=fff&size=64" alt="Author">
                  <div class="news-card-author-info">
                    <span class="author-name">Lisa Chen</span>
                    <span class="publish-date">5 hari lalu â€¢ 6 min</span>
                  </div>
                </div>
                <button class="news-card-bookmark">
                  <span class="material-symbols-outlined">bookmark</span>
                </button>
              </div>
            </div>
          </article>

          <!-- Article 3 -->
          <article class="news-card">
            <div class="news-card-image">
              <img src="https://images.unsplash.com/photo-1576091160550-2173dba999ef?w=400&h=250&fit=crop" alt="Article">
              <span class="news-card-category research">Riset</span>
            </div>
            <div class="news-card-content">
              <h3 class="news-card-title">Studi: Deteksi Dini Hipotermia pada Lansia</h3>
              <p class="news-card-excerpt">Penelitian terbaru menunjukkan monitoring suhu tubuh kontinyu dapat mencegah 70% kasus hipotermia...</p>
              <div class="news-card-footer">
                <div class="news-card-author">
                  <img src="https://ui-avatars.com/api/?name=Dr+Michael&background=9B59B6&color=fff&size=64" alt="Author">
                  <div class="news-card-author-info">
                    <span class="author-name">Dr. Michael Wong</span>
                    <span class="publish-date">1 minggu lalu â€¢ 8 min</span>
                  </div>
                </div>
                <button class="news-card-bookmark">
                  <span class="material-symbols-outlined">bookmark</span>
                </button>
              </div>
            </div>
          </article>

          <!-- Article 4 -->
          <article class="news-card">
            <div class="news-card-image">
              <img src="https://images.unsplash.com/photo-1505751172876-fa1923c5c528?w=400&h=250&fit=crop" alt="Article">
              <span class="news-card-category tips">Tips</span>
            </div>
            <div class="news-card-content">
              <h3 class="news-card-title">10 Tips Menjaga Kesehatan Jantung di Usia 50+</h3>
              <p class="news-card-excerpt">Panduan praktis untuk menjaga kesehatan kardiovaskular dengan gaya hidup sehat dan monitoring rutin...</p>
              <div class="news-card-footer">
                <div class="news-card-author">
                  <img src="https://ui-avatars.com/api/?name=Rina+Susanti&background=F39C12&color=fff&size=64" alt="Author">
                  <div class="news-card-author-info">
                    <span class="author-name">Rina Susanti</span>
                    <span class="publish-date">2 minggu lalu â€¢ 5 min</span>
                  </div>
                </div>
                <button class="news-card-bookmark">
                  <span class="material-symbols-outlined">bookmark</span>
                </button>
              </div>
            </div>
          </article>

          <!-- Article 5 -->
          <article class="news-card">
            <div class="news-card-image">
              <img src="https://images.unsplash.com/photo-1584362917165-526a968579e8?w=400&h=250&fit=crop" alt="Article">
              <span class="news-card-category health">Kesehatan</span>
            </div>
            <div class="news-card-content">
              <h3 class="news-card-title">Manfaat Telemedicine untuk Pasien Jarak Jauh</h3>
              <p class="news-card-excerpt">Layanan konsultasi kesehatan online memudahkan akses ke tenaga medis profesional dari rumah...</p>
              <div class="news-card-footer">
                <div class="news-card-author">
                  <img src="https://ui-avatars.com/api/?name=Budi+Santoso&background=3498DB&color=fff&size=64" alt="Author">
                  <div class="news-card-author-info">
                    <span class="author-name">Budi Santoso</span>
                    <span class="publish-date">3 minggu lalu â€¢ 7 min</span>
                  </div>
                </div>
                <button class="news-card-bookmark">
                  <span class="material-symbols-outlined">bookmark</span>
                </button>
              </div>
            </div>
          </article>

          <!-- Article 6 -->
          <article class="news-card">
            <div class="news-card-image">
              <img src="https://images.unsplash.com/photo-1542884748-2b87b36c6b90?w=400&h=250&fit=crop" alt="Article">
              <span class="news-card-category technology">Teknologi</span>
            </div>
            <div class="news-card-content">
              <h3 class="news-card-title">Blockchain untuk Keamanan Data Medis</h3>
              <p class="news-card-excerpt">Teknologi blockchain menjanjikan keamanan dan privasi data kesehatan pasien yang lebih baik...</p>
              <div class="news-card-footer">
                <div class="news-card-author">
                  <img src="https://ui-avatars.com/api/?name=Kevin+Tan&background=E67E22&color=fff&size=64" alt="Author">
                  <div class="news-card-author-info">
                    <span class="author-name">Kevin Tan</span>
                    <span class="publish-date">1 bulan lalu â€¢ 10 min</span>
                  </div>
                </div>
                <button class="news-card-bookmark">
                  <span class="material-symbols-outlined">bookmark</span>
                </button>
              </div>
            </div>
          </article>
        </div>

        <!-- Load More Button -->
        <div class="news-load-more">
          <button class="load-more-btn">
            <span>Muat Lebih Banyak</span>
            <span class="material-symbols-outlined">expand_more</span>
          </button>
        </div>

        <!-- News Detail Modal -->
        <div id="news-detail-modal" class="news-modal">
          <div class="news-modal-content">
            <div class="news-modal-header">
              <button class="news-modal-close" id="news-modal-close">
                <span class="material-symbols-outlined">close</span>
              </button>
            </div>
            <div class="news-modal-body">
              <img id="news-modal-image" src="" alt="News Image" class="news-modal-image">
              <div class="news-modal-info">
                <span id="news-modal-category" class="news-modal-category">Kategori</span>
                <h2 id="news-modal-title" class="news-modal-title">Judul Berita</h2>
                <div class="news-modal-meta">
                  <div class="news-modal-author">
                    <img id="news-modal-author-img" src="" alt="Author">
                    <div>
                      <span id="news-modal-author-name" class="author-name">Author</span>
                      <span id="news-modal-date" class="publish-date">Tanggal</span>
                    </div>
                  </div>
                  <div class="news-modal-actions">
                    <button class="news-action-btn" title="Bagikan">
                      <span class="material-symbols-outlined">share</span>
                    </button>
                    <button class="news-action-btn" title="Simpan">
                      <span class="material-symbols-outlined">bookmark</span>
                    </button>
                  </div>
                </div>
                <div id="news-modal-content" class="news-modal-article">
                  <p>Isi berita akan ditampilkan di sini...</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PAGE: PERANGKAT
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <div id="page-perangkat" class="page container">
        <!-- Device Hero -->
        <div class="device-hero">
          <img src="https://cdn-icons-png.flaticon.com/512/2917/2917995.png" alt="Smart Device">
          <h2 class="device-section-title" style="margin-top: 15px;">Perangkat Saya</h2>
          <p style="color: #666; font-size: 0.95em;">Kelola koneksi perangkat kesehatan Anda</p>
        </div>

        <!-- Connected Devices Section -->
        <div id="connected-devices-container">
          <!-- Will be populated by JavaScript if device is connected -->
        </div>

        <!-- No Devices State -->
        <div class="no-devices" id="no-devices-state">
          <span class="material-symbols-outlined" style="font-size: 64px; color: #ccc; margin-bottom: 15px;">devices_off</span>
          <h3 style="color: #333; margin-bottom: 8px;">Belum Ada Perangkat</h3>
          <p style="color: #777; font-size: 0.9em; margin-bottom: 25px;">Hubungkan perangkat kesehatan Anda untuk memulai monitoring</p>

          <button class="add-device-btn" id="btn-connect-device" style="color: white; border: none; padding: 14px 28px; border-radius: 16px; font-size: 1em; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 10px; margin: 0 auto;">
            <span class="material-symbols-outlined">add_circle</span>
            Hubungkan Perangkat
          </button>
        </div>

        <!-- Info Cards -->
        <div style="margin-top: 30px;">
          <div class="card" style="padding: 18px; margin-bottom: 15px; background: #e8f5e9; border-left: 4px solid #27AE60;">
            <div style="display: flex; align-items: center; gap: 12px;">
              <span class="material-symbols-outlined" style="font-size: 32px; color: #27AE60;">bluetooth</span>
              <div>
                <h4 style="margin: 0 0 4px 0; font-size: 1em; color: #333;">Koneksi Bluetooth</h4>
                <p style="margin: 0; font-size: 0.85em; color: #666;">Pastikan Bluetooth aktif untuk menghubungkan perangkat</p>
              </div>
            </div>
          </div>

          <div class="card" style="padding: 18px; background: #fff3e0; border-left: 4px solid #F39C12;">
            <div style="display: flex; align-items: center; gap: 12px;">
              <span class="material-symbols-outlined" style="font-size: 32px; color: #F39C12;">health_and_safety</span>
              <div>
                <h4 style="margin: 0 0 4px 0; font-size: 1em; color: #333;">Monitoring Real-time</h4>
                <p style="margin: 0; font-size: 0.85em; color: #666;">Data kesehatan akan ter-update secara otomatis</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- BLE Connection Modal - Enhanced -->
      <div id="ble-modal" class="ble-modal">
        <div class="ble-modal-content">
          <div class="ble-modal-header">
            <h3 class="ble-modal-title">Hubungkan Perangkat Bluetooth</h3>
            <button class="ble-close-btn" id="ble-close-btn">
              <span class="material-symbols-outlined">close</span>
            </button>
          </div>

          <!-- Step Guide -->
          <div class="ble-guide-section">
            <h4 class="ble-section-title">Persiapan Sebelum Scan</h4>
            <div class="ble-checklist">
              <div class="ble-checklist-item">
                <span class="material-symbols-outlined check-icon">check_circle</span>
                <div>
                  <strong>Aktifkan Bluetooth</strong>
                  <p>Pastikan Bluetooth di perangkat Anda aktif</p>
                </div>
              </div>
              <div class="ble-checklist-item">
                <span class="material-symbols-outlined check-icon">check_circle</span>
                <div>
                  <strong>Nyalakan Device CareRing</strong>
                  <p>Device harus dalam status hidup dan siap pairing</p>
                </div>
              </div>
              <div class="ble-checklist-item">
                <span class="material-symbols-outlined check-icon">check_circle</span>
                <div>
                  <strong>Dekatkan Device</strong>
                  <p>Posisikan device dalam jarak 1-2 meter</p>
                </div>
              </div>
            </div>
          </div>

          <!-- What Will Happen -->
          <div class="ble-info-box">
            <span class="material-symbols-outlined">info</span>
            <div>
              <strong>Yang Akan Terjadi:</strong>
              <p>Browser akan menampilkan popup untuk memilih perangkat Bluetooth yang tersedia. Pilih device dengan nama "CareRing" atau "ESP32".</p>
            </div>
          </div>

          <!-- Connect Button -->
          <button class="ble-connect-btn" id="ble-connect-btn">
            <span class="material-symbols-outlined">bluetooth_searching</span>
            Mulai Scan Perangkat
          </button>

          <!-- Progress -->
          <div class="ble-progress" id="ble-progress">
            <div class="ble-progress-bar"></div>
          </div>

          <!-- Message -->
          <div class="ble-message" id="ble-message"></div>

          <!-- Troubleshooting Section -->
          <details class="ble-troubleshooting">
            <summary>
              <span class="material-symbols-outlined">help</span>
              Troubleshooting - Device Tidak Muncul?
            </summary>
            <div class="troubleshooting-content">
              <div class="trouble-item">
                <strong>âœ“ Cek Bluetooth Windows</strong>
                <p>Buka Settings â†’ Bluetooth & devices, pastikan device CareRing tidak ter-pair di Windows. Jika ada, klik "Remove device".</p>
              </div>
              <div class="trouble-item">
                <strong>âœ“ Restart Device</strong>
                <p>Matikan dan nyalakan kembali device CareRing.</p>
              </div>
              <div class="trouble-item">
                <strong>âœ“ Refresh Browser</strong>
                <p>Tekan Ctrl + Shift + R untuk hard refresh halaman.</p>
              </div>
              <div class="trouble-item">
                <strong>âœ“ Coba Browser Lain</strong>
                <p>Gunakan Google Chrome atau Microsoft Edge (Web Bluetooth tidak support di Firefox/Safari).</p>
              </div>
            </div>
          </details>
        </div>
      </div>

      <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PAGE: AI CHAT - MODERN PROFESSIONAL REDESIGN
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <div id="page-ai-chat" class="page container">
        <!-- AI Chat Header -->
        <div class="ai-chat-header">
          <div class="ai-chat-header-left">
            <div class="ai-chat-avatar-container">
              <div class="ai-chat-avatar">
                <img src="https://i.ibb.co/KG3y4Lp/ai-avatar.png" alt="AI Assistant" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIyMCIgY3k9IjIwIiByPSIyMCIgZmlsbD0iI0ZGODQwMCIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjI0IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPvCfpJY8L3RleHQ+PC9zdmc+'" />
              </div>
              <div class="ai-status-indicator online"></div>
            </div>
            <div class="ai-chat-info">
              <h3 class="ai-chat-name">CareRing AI Assistant</h3>
              <p class="ai-chat-status">
                <span class="status-dot"></span>
                <span id="ai-status-text">Online - Siap membantu</span>
              </p>
            </div>
          </div>
          <div class="ai-chat-header-right">
            <button class="ai-header-btn" id="clear-chat-btn" title="Clear Chat History">
              <span class="material-symbols-outlined">delete_sweep</span>
            </button>
            <button class="ai-header-btn" title="Chat Settings">
              <span class="material-symbols-outlined">more_vert</span>
            </button>
          </div>
        </div>

        <!-- AI Chat Container -->
        <div class="ai-chat-container">
          <!-- Chat Messages Area -->
          <div id="chat-window" class="ai-chat-window">
            <!-- Welcome Message -->
            <div class="chat-date-divider">
              <span id="chat-date-today">Hari Ini</span>
            </div>
            <div class="message ai-message-modern">
              <div class="message-avatar">
                <img src="https://i.ibb.co/KG3y4Lp/ai-avatar.png" alt="AI" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNiIgZmlsbD0iI0ZGODQwMCIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjE4IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPvCfpJY8L3RleHQ+PC9zdmc+'" />
              </div>
              <div class="message-content">
                <div class="message-bubble ai-bubble">
                  <p>Halo! ğŸ‘‹ Saya adalah <strong>CareRing AI Assistant</strong>, asisten virtual Anda untuk memantau dan menganalisis data kesehatan.</p>
                  <p>Saya dapat membantu Anda dengan:</p>
                  <ul class="ai-capabilities-list">
                    <li>ğŸ“Š Analisis data vital signs real-time</li>
                    <li>â¤ï¸ Monitoring detak jantung dan suhu tubuh</li>
                    <li>ğŸ’¡ Rekomendasi kesehatan berbasis data</li>
                    <li>ğŸ” Informasi medis dasar</li>
                  </ul>
                  <p>Tanyakan apa saja tentang kondisi kesehatan Anda!</p>
                </div>
                <div class="message-meta">
                  <span class="message-time" id="welcome-time">--:--</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Suggested Questions -->
          <div id="suggested-questions" class="ai-suggested-questions">
            <div class="suggested-title">
              <span class="material-symbols-outlined">lightbulb</span>
              Pertanyaan Cepat
            </div>
            <div class="suggested-grid">
              <button class="suggest-btn-modern" data-question="suhu">
                <span class="material-symbols-outlined">thermostat</span>
                <span>Bagaimana suhu tubuh saya?</span>
              </button>
              <button class="suggest-btn-modern" data-question="jantung">
                <span class="material-symbols-outlined">favorite</span>
                <span>Detak jantung saya normal?</span>
              </button>
              <button class="suggest-btn-modern" data-question="hipotermia">
                <span class="material-symbols-outlined">ac_unit</span>
                <span>Apa itu hipotermia?</span>
              </button>
              <button class="suggest-btn-modern" data-question="demam">
                <span class="material-symbols-outlined">local_fire_department</span>
                <span>Bagaimana menangani demam?</span>
              </button>
            </div>
          </div>

          <!-- Chat Input Area -->
          <div class="ai-chat-input-wrapper">
            <form id="chat-form" class="ai-chat-form">
              <div class="chat-input-container">
                <button type="button" class="chat-action-btn" title="Attach File" disabled>
                  <span class="material-symbols-outlined">attach_file</span>
                </button>
                <input
                  type="text"
                  id="chat-input"
                  class="ai-chat-input"
                  placeholder="Ketik pertanyaan Anda di sini..."
                  autocomplete="off"
                  required
                />
                <button type="button" class="chat-action-btn" id="voice-btn" title="Voice Input" disabled>
                  <span class="material-symbols-outlined">mic</span>
                </button>
                <button type="submit" id="send-btn" class="ai-send-btn" title="Send Message">
                  <span class="material-symbols-outlined">send</span>
                </button>
              </div>
            </form>
            <div class="ai-chat-footer">
              <span class="footer-text">
                <span class="material-symbols-outlined">info</span>
                AI dapat membuat kesalahan. Konsultasikan dengan profesional untuk keputusan medis.
              </span>
            </div>
          </div>
        </div>
      </div>

      <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PAGE: FORUM - MODERN REDESIGN
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <div id="page-forum" class="page container">
        <!-- Forum Header -->
        <div class="forum-header">
          <div class="forum-header-content">
            <h2 class="forum-title">Diskusi Komunitas</h2>
            <p class="forum-subtitle">Berbagi pengalaman dan diskusi kesehatan</p>
          </div>
        </div>

        <!-- Forum Stats -->
        <div class="forum-stats">
          <div class="stat-item">
            <div class="stat-value">124</div>
            <div class="stat-label">Diskusi</div>
          </div>
          <div class="stat-item">
            <div class="stat-value">342</div>
            <div class="stat-label">Balasan</div>
          </div>
          <div class="stat-item">
            <div class="stat-value">89</div>
            <div class="stat-label">Anggota</div>
          </div>
        </div>

        <!-- Search & Filter -->
        <div class="forum-search-bar">
          <span class="material-symbols-outlined search-icon">search</span>
          <input type="text" placeholder="Cari topik diskusi..." class="forum-search-input">
        </div>

        <!-- Category Tabs -->
        <div class="forum-categories">
          <button class="category-tab active" data-category="all">Semua</button>
          <button class="category-tab" data-category="health">Kesehatan</button>
          <button class="category-tab" data-category="device">Perangkat</button>
          <button class="category-tab" data-category="tips">Tips & Trik</button>
        </div>

        <!-- Forum Threads List -->
        <div class="forum-threads">
          <!-- Thread Item 1 -->
          <div class="thread-card">
            <div class="thread-avatar">
              <img src="https://ui-avatars.com/api/?name=Erico+Varel&background=4a90e2&color=fff&size=128" alt="Avatar">
            </div>
            <div class="thread-content">
              <div class="thread-header">
                <div class="thread-meta">
                  <span class="thread-author">Erico Varel</span>
                  <span class="thread-dot">â€¢</span>
                  <span class="thread-time">2 jam lalu</span>
                </div>
                <span class="thread-category health">Kesehatan</span>
              </div>
              <h3 class="thread-title">Apa itu Hipotermia dan Bagaimana Cara Mencegahnya?</h3>
              <p class="thread-preview">Saya ingin tahu lebih lanjut tentang hipotermia, terutama bagaimana cara mendeteksi dan mencegahnya pada lansia...</p>
              <div class="thread-footer">
                <div class="thread-stats">
                  <div class="stat-badge">
                    <span class="material-symbols-outlined">comment</span>
                    <span>12 balasan</span>
                  </div>
                  <div class="stat-badge">
                    <span class="material-symbols-outlined">visibility</span>
                    <span>89 views</span>
                  </div>
                  <div class="stat-badge">
                    <span class="material-symbols-outlined">thumb_up</span>
                    <span>5</span>
                  </div>
                </div>
                <div class="thread-last-activity">
                  <img src="https://ui-avatars.com/api/?name=Ahmad&background=27AE60&color=fff&size=64" alt="Last reply" class="last-reply-avatar">
                  <span class="last-reply-text">Ahmad membalas</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Thread Item 2 -->
          <div class="thread-card">
            <div class="thread-avatar">
              <img src="https://ui-avatars.com/api/?name=Siti+Rahayu&background=E74C3C&color=fff&size=128" alt="Avatar">
            </div>
            <div class="thread-content">
              <div class="thread-header">
                <div class="thread-meta">
                  <span class="thread-author">Siti Rahayu</span>
                  <span class="thread-dot">â€¢</span>
                  <span class="thread-time">5 jam lalu</span>
                </div>
                <span class="thread-category device">Perangkat</span>
              </div>
              <h3 class="thread-title">Tips Merawat Sensor CareRing Agar Awet</h3>
              <p class="thread-preview">Sharing pengalaman saya dalam merawat sensor CareRing selama 6 bulan terakhir. Ada beberapa hal yang perlu diperhatikan...</p>
              <div class="thread-footer">
                <div class="thread-stats">
                  <div class="stat-badge">
                    <span class="material-symbols-outlined">comment</span>
                    <span>8 balasan</span>
                  </div>
                  <div class="stat-badge">
                    <span class="material-symbols-outlined">visibility</span>
                    <span>124 views</span>
                  </div>
                  <div class="stat-badge">
                    <span class="material-symbols-outlined">thumb_up</span>
                    <span>15</span>
                  </div>
                </div>
                <div class="thread-last-activity">
                  <img src="https://ui-avatars.com/api/?name=Budi&background=F39C12&color=fff&size=64" alt="Last reply" class="last-reply-avatar">
                  <span class="last-reply-text">Budi membalas</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Thread Item 3 -->
          <div class="thread-card">
            <div class="thread-avatar">
              <img src="https://ui-avatars.com/api/?name=Dr+Andi&background=9B59B6&color=fff&size=128" alt="Avatar">
              <div class="verified-badge" title="Verified Expert">
                <span class="material-symbols-outlined">verified</span>
              </div>
            </div>
            <div class="thread-content">
              <div class="thread-header">
                <div class="thread-meta">
                  <span class="thread-author">Dr. Andi Kurniawan</span>
                  <span class="verified-icon" title="Verified Expert">
                    <span class="material-symbols-outlined">verified</span>
                  </span>
                  <span class="thread-dot">â€¢</span>
                  <span class="thread-time">1 hari lalu</span>
                </div>
                <span class="thread-category tips">Tips & Trik</span>
              </div>
              <h3 class="thread-title">Cara Membaca Data SpO2 dengan Benar</h3>
              <p class="thread-preview">Sebagai tenaga medis, saya ingin berbagi informasi tentang cara membaca dan menginterpretasi data saturasi oksigen (SpO2)...</p>
              <div class="thread-footer">
                <div class="thread-stats">
                  <div class="stat-badge">
                    <span class="material-symbols-outlined">comment</span>
                    <span>24 balasan</span>
                  </div>
                  <div class="stat-badge">
                    <span class="material-symbols-outlined">visibility</span>
                    <span>456 views</span>
                  </div>
                  <div class="stat-badge">
                    <span class="material-symbols-outlined">thumb_up</span>
                    <span>42</span>
                  </div>
                </div>
                <div class="thread-last-activity">
                  <img src="https://ui-avatars.com/api/?name=Putri&background=3498DB&color=fff&size=64" alt="Last reply" class="last-reply-avatar">
                  <span class="last-reply-text">Putri membalas</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Floating Action Button -->
        <button class="forum-fab" id="forum-fab-btn" title="Buat Diskusi Baru">
          <span class="material-symbols-outlined">add</span>
        </button>

        <!-- Create Post Modal -->
        <div id="forum-create-modal" class="forum-modal">
          <div class="forum-modal-content">
            <div class="forum-modal-header">
              <h3 class="forum-modal-title">Buat Diskusi Baru</h3>
              <button class="forum-modal-close" id="forum-create-close">
                <span class="material-symbols-outlined">close</span>
              </button>
            </div>
            <form id="forum-create-form" class="forum-modal-body">
              <div class="forum-form-group">
                <label class="forum-form-label">Judul Diskusi</label>
                <input type="text" id="forum-post-title" class="forum-form-input" placeholder="Tulis judul yang menarik..." required>
              </div>
              <div class="forum-form-group">
                <label class="forum-form-label">Kategori</label>
                <select id="forum-post-category" class="forum-form-select" required>
                  <option value="">Pilih kategori</option>
                  <option value="health">Kesehatan</option>
                  <option value="device">Perangkat</option>
                  <option value="tips">Tips & Trik</option>
                </select>
              </div>
              <div class="forum-form-group">
                <label class="forum-form-label">Isi Diskusi</label>
                <textarea id="forum-post-content" class="forum-form-textarea" rows="6" placeholder="Jelaskan detail diskusi Anda..." required></textarea>
              </div>
              <div class="forum-form-actions">
                <button type="button" class="forum-btn-secondary" id="forum-create-cancel">Batal</button>
                <button type="submit" class="forum-btn-primary">
                  <span class="material-symbols-outlined">send</span>
                  Posting
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- Forum Detail Modal -->
        <div id="forum-detail-modal" class="forum-modal">
          <div class="forum-modal-content forum-detail-content">
            <div class="forum-modal-header">
              <button class="forum-back-btn" id="forum-detail-back">
                <span class="material-symbols-outlined">arrow_back</span>
              </button>
              <h3 class="forum-modal-title">Detail Diskusi</h3>
              <button class="forum-modal-close" id="forum-detail-close">
                <span class="material-symbols-outlined">close</span>
              </button>
            </div>
            <div class="forum-modal-body forum-detail-body">
              <!-- Thread Main Content -->
              <div class="forum-detail-thread">
                <div class="forum-detail-header">
                  <div class="forum-detail-author">
                    <img id="forum-detail-avatar" src="" alt="Avatar" class="detail-avatar">
                    <div class="detail-author-info">
                      <span id="forum-detail-author-name" class="detail-author-name">Nama Author</span>
                      <span id="forum-detail-time" class="detail-time">2 jam lalu</span>
                    </div>
                  </div>
                  <span id="forum-detail-category" class="thread-category health">Kategori</span>
                </div>
                <h2 id="forum-detail-title" class="forum-detail-title">Judul Diskusi</h2>
                <div id="forum-detail-content" class="forum-detail-text">
                  <p>Isi diskusi akan ditampilkan di sini...</p>
                </div>
                <div class="forum-detail-stats">
                  <div class="detail-stat">
                    <span class="material-symbols-outlined">visibility</span>
                    <span id="forum-detail-views">0</span> views
                  </div>
                  <div class="detail-stat">
                    <span class="material-symbols-outlined">thumb_up</span>
                    <span id="forum-detail-likes">0</span> likes
                  </div>
                </div>
                <div class="forum-detail-actions">
                  <button class="detail-action-btn" id="forum-like-btn">
                    <span class="material-symbols-outlined">thumb_up</span>
                    Suka
                  </button>
                  <button class="detail-action-btn">
                    <span class="material-symbols-outlined">share</span>
                    Bagikan
                  </button>
                  <button class="detail-action-btn">
                    <span class="material-symbols-outlined">bookmark</span>
                    Simpan
                  </button>
                </div>
              </div>

              <!-- Replies Section -->
              <div class="forum-replies-section">
                <h4 class="replies-title">
                  <span class="material-symbols-outlined">comment</span>
                  <span id="forum-replies-count">0</span> Balasan
                </h4>
                <div id="forum-replies-list" class="replies-list">
                  <!-- Replies will be populated here -->
                </div>
              </div>

              <!-- Reply Input -->
              <div class="forum-reply-input">
                <img id="forum-reply-avatar" src="https://ui-avatars.com/api/?name=User&background=FF8400&color=fff&size=64" alt="You" class="reply-input-avatar">
                <form id="forum-reply-form" class="reply-form">
                  <input type="text" id="forum-reply-text" class="reply-input" placeholder="Tulis balasan...">
                  <button type="submit" class="reply-submit-btn">
                    <span class="material-symbols-outlined">send</span>
                  </button>
                </form>
              </div>
            </div>
          </div>
        </div>

        <!-- Forum Success Toast -->
        <div id="forum-toast" class="forum-toast">
          <span class="material-symbols-outlined">check_circle</span>
          <span id="forum-toast-message">Berhasil!</span>
        </div>
      </div>

      <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PAGE: PROFIL - PROFESSIONAL MODERN REDESIGN
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <div id="page-profil" class="page container">
        <div class="profile-modern-container">

          <!-- Profile Hero with Cover -->
          <div class="profile-hero-modern">
            <div class="profile-cover">
              <div class="profile-cover-gradient"></div>
              <div class="profile-cover-pattern"></div>
            </div>
            <div class="profile-header-content">
              <div class="profile-avatar-section">
                <div class="profile-avatar-large">
                  <img id="profil-img" src="" alt="Profile" onload="this.style.display='block'; document.getElementById('profil-default-icon').style.display='none';">
                  <span class="material-symbols-outlined" id="profil-default-icon">person</span>
                  <div class="profile-avatar-badge">
                    <span class="material-symbols-outlined">verified</span>
                  </div>
                </div>
                <div class="profile-info">
                  <h1 id="profil-nama" class="profile-display-name">Loading...</h1>
                  <p id="profil-email" class="profile-user-email">loading@example.com</p>
                  <div class="profile-meta">
                    <span class="profile-meta-item">
                      <span class="material-symbols-outlined">calendar_today</span>
                      Bergabung <span id="profile-member-since">2025</span>
                    </span>
                    <span class="profile-meta-item">
                      <span class="material-symbols-outlined">badge</span>
                      ID: <span id="profile-user-id">CR-XXXX</span>
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Stats Overview Cards -->
          <div class="profile-stats-overview">
            <div class="stat-card-modern stat-card-pulse">
              <div class="stat-card-icon">
                <span class="material-symbols-outlined">favorite</span>
              </div>
              <div class="stat-card-content">
                <span class="stat-card-value" id="profile-stat-heartrate">--</span>
                <span class="stat-card-label">Rata-rata BPM</span>
                <span class="stat-card-trend positive">
                  <span class="material-symbols-outlined">trending_up</span>
                  Normal
                </span>
              </div>
            </div>
            <div class="stat-card-modern stat-card-temp">
              <div class="stat-card-icon">
                <span class="material-symbols-outlined">thermostat</span>
              </div>
              <div class="stat-card-content">
                <span class="stat-card-value" id="profile-stat-temp">--</span>
                <span class="stat-card-label">Suhu Tubuh (Â°C)</span>
                <span class="stat-card-trend positive">
                  <span class="material-symbols-outlined">check_circle</span>
                  Normal
                </span>
              </div>
            </div>
            <div class="stat-card-modern stat-card-days">
              <div class="stat-card-icon">
                <span class="material-symbols-outlined">event</span>
              </div>
              <div class="stat-card-content">
                <span class="stat-card-value" id="profile-stat-days">--</span>
                <span class="stat-card-label">Hari Aktif</span>
                <span class="stat-card-trend">
                  <span class="material-symbols-outlined">local_fire_department</span>
                  Keep it up!
                </span>
              </div>
            </div>
            <div class="stat-card-modern stat-card-data">
              <div class="stat-card-icon">
                <span class="material-symbols-outlined">analytics</span>
              </div>
              <div class="stat-card-content">
                <span class="stat-card-value" id="profile-stat-records">--</span>
                <span class="stat-card-label">Data Tercatat</span>
                <span class="stat-card-trend">
                  <span class="material-symbols-outlined">storage</span>
                  Records
                </span>
              </div>
            </div>
          </div>

          <!-- Main Content Grid -->
          <div class="profile-content-grid">

            <!-- Left Column -->
            <div class="profile-left-column">

              <!-- Health Summary Card -->
              <div class="profile-card">
                <div class="profile-card-header">
                  <div class="card-header-title">
                    <span class="material-symbols-outlined">health_and_safety</span>
                    <span>Ringkasan Kesehatan</span>
                  </div>
                  <span class="health-status-badge status-excellent">Baik</span>
                </div>
                <div class="profile-card-body">
                  <div class="health-metrics">
                    <div class="health-metric-item">
                      <div class="metric-header">
                        <span class="metric-label">Detak Jantung</span>
                        <span class="metric-value">Normal</span>
                      </div>
                      <div class="metric-progress-bar">
                        <div class="metric-progress" style="width: 85%; background: linear-gradient(90deg, #ef4444, #f87171);"></div>
                      </div>
                    </div>
                    <div class="health-metric-item">
                      <div class="metric-header">
                        <span class="metric-label">Suhu Tubuh</span>
                        <span class="metric-value">Stabil</span>
                      </div>
                      <div class="metric-progress-bar">
                        <div class="metric-progress" style="width: 90%; background: linear-gradient(90deg, #FF8400, #ffb347);"></div>
                      </div>
                    </div>
                    <div class="health-metric-item">
                      <div class="metric-header">
                        <span class="metric-label">Aktivitas</span>
                        <span class="metric-value">Aktif</span>
                      </div>
                      <div class="metric-progress-bar">
                        <div class="metric-progress" style="width: 75%; background: linear-gradient(90deg, #10b981, #34d399);"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Achievements Card -->
              <div class="profile-card">
                <div class="profile-card-header">
                  <div class="card-header-title">
                    <span class="material-symbols-outlined">emoji_events</span>
                    <span>Pencapaian</span>
                  </div>
                </div>
                <div class="profile-card-body">
                  <div class="achievements-grid">
                    <div class="achievement-item achievement-active">
                      <span class="achievement-icon">ğŸ†</span>
                      <span class="achievement-label">7 Hari Berturut</span>
                    </div>
                    <div class="achievement-item achievement-active">
                      <span class="achievement-icon">ğŸ’ª</span>
                      <span class="achievement-label">Health Champion</span>
                    </div>
                    <div class="achievement-item achievement-active">
                      <span class="achievement-icon">â­</span>
                      <span class="achievement-label">Data Master</span>
                    </div>
                    <div class="achievement-item achievement-locked">
                      <span class="achievement-icon">ğŸ¯</span>
                      <span class="achievement-label">30 Hari</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Device Card -->
              <div class="profile-card">
                <div class="profile-card-header">
                  <div class="card-header-title">
                    <span class="material-symbols-outlined">devices</span>
                    <span>Perangkat Saya</span>
                  </div>
                  <button class="card-action-btn" data-navigate="perangkat">
                    <span class="material-symbols-outlined">arrow_forward</span>
                  </button>
                </div>
                <div class="profile-card-body">
                  <div class="device-item-modern">
                    <div class="device-icon-wrapper">
                      <span class="material-symbols-outlined">watch</span>
                    </div>
                    <div class="device-info-wrapper">
                      <span class="device-name-text" id="profile-device-name">CareRing ESP32</span>
                      <span class="device-id-text" id="profile-device-id">Menunggu koneksi...</span>
                    </div>
                    <div class="device-status-badge online">
                      <span class="status-dot-pulse"></span>
                      Online
                    </div>
                  </div>
                </div>
              </div>

            </div>

            <!-- Right Column -->
            <div class="profile-right-column">

              <!-- Settings Card -->
              <div class="profile-card">
                <div class="profile-card-header">
                  <div class="card-header-title">
                    <span class="material-symbols-outlined">tune</span>
                    <span>Pengaturan</span>
                  </div>
                </div>
                <div class="profile-card-body">
                  <div class="settings-menu-modern">
                    <button class="settings-menu-item">
                      <div class="settings-menu-icon settings-icon-blue">
                        <span class="material-symbols-outlined">person</span>
                      </div>
                      <div class="settings-menu-content">
                        <span class="settings-menu-label">Edit Profil</span>
                        <span class="settings-menu-desc">Nama, foto, dan bio</span>
                      </div>
                      <span class="material-symbols-outlined">chevron_right</span>
                    </button>
                    <button class="settings-menu-item">
                      <div class="settings-menu-icon settings-icon-orange">
                        <span class="material-symbols-outlined">notifications</span>
                      </div>
                      <div class="settings-menu-content">
                        <span class="settings-menu-label">Notifikasi</span>
                        <span class="settings-menu-desc">Kelola pengingat</span>
                      </div>
                      <span class="material-symbols-outlined">chevron_right</span>
                    </button>
                    <button class="settings-menu-item">
                      <div class="settings-menu-icon settings-icon-purple">
                        <span class="material-symbols-outlined">lock</span>
                      </div>
                      <div class="settings-menu-content">
                        <span class="settings-menu-label">Privasi</span>
                        <span class="settings-menu-desc">Keamanan akun</span>
                      </div>
                      <span class="material-symbols-outlined">chevron_right</span>
                    </button>
                    <button class="settings-menu-item">
                      <div class="settings-menu-icon settings-icon-green">
                        <span class="material-symbols-outlined">language</span>
                      </div>
                      <div class="settings-menu-content">
                        <span class="settings-menu-label">Bahasa</span>
                        <span class="settings-menu-desc">Indonesia</span>
                      </div>
                      <span class="material-symbols-outlined">chevron_right</span>
                    </button>
                  </div>
                </div>
              </div>

              <!-- Support Card -->
              <div class="profile-card">
                <div class="profile-card-header">
                  <div class="card-header-title">
                    <span class="material-symbols-outlined">support_agent</span>
                    <span>Bantuan</span>
                  </div>
                </div>
                <div class="profile-card-body">
                  <div class="settings-menu-modern">
                    <button class="settings-menu-item">
                      <div class="settings-menu-icon settings-icon-cyan">
                        <span class="material-symbols-outlined">help_center</span>
                      </div>
                      <div class="settings-menu-content">
                        <span class="settings-menu-label">Pusat Bantuan</span>
                        <span class="settings-menu-desc">FAQ & Panduan</span>
                      </div>
                      <span class="material-symbols-outlined">chevron_right</span>
                    </button>
                    <button class="settings-menu-item">
                      <div class="settings-menu-icon settings-icon-green">
                        <span class="material-symbols-outlined">forum</span>
                      </div>
                      <div class="settings-menu-content">
                        <span class="settings-menu-label">Hubungi Kami</span>
                        <span class="settings-menu-desc">Chat support</span>
                      </div>
                      <span class="material-symbols-outlined">chevron_right</span>
                    </button>
                    <button class="settings-menu-item">
                      <div class="settings-menu-icon settings-icon-yellow">
                        <span class="material-symbols-outlined">star</span>
                      </div>
                      <div class="settings-menu-content">
                        <span class="settings-menu-label">Beri Rating</span>
                        <span class="settings-menu-desc">Bantu kami berkembang</span>
                      </div>
                      <span class="material-symbols-outlined">chevron_right</span>
                    </button>
                  </div>
                </div>
              </div>

              <!-- About Card -->
              <div class="profile-card profile-about-card">
                <div class="profile-card-body">
                  <div class="about-info-grid">
                    <div class="about-info-item">
                      <span class="about-info-icon">
                        <span class="material-symbols-outlined">info</span>
                      </span>
                      <div class="about-info-text">
                        <span class="about-info-label">Versi</span>
                        <span class="about-info-value">v2.0.0</span>
                      </div>
                    </div>
                    <div class="about-info-item">
                      <span class="about-info-icon">
                        <span class="material-symbols-outlined">code</span>
                      </span>
                      <div class="about-info-text">
                        <span class="about-info-label">Platform</span>
                        <span class="about-info-value">Web PWA</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Logout Button -->
              <button class="profile-logout-modern" id="btn-logout">
                <span class="material-symbols-outlined">logout</span>
                <span>Keluar dari Akun</span>
              </button>

            </div>

          </div>

          <!-- Footer -->
          <div class="profile-footer-modern">
            <p>CareRing Healthcare Â© 2025 â€¢ Semua hak dilindungi</p>
            <div class="footer-links">
              <a href="#" id="profile-terms-link">Syarat & Ketentuan</a>
              <span>â€¢</span>
              <a href="#" id="profile-privacy-link">Kebijakan Privasi</a>
            </div>
          </div>

        </div>

        <!-- Profile Modals -->
        <!-- Edit Profile Modal -->
        <div id="profile-edit-modal" class="profile-modal">
          <div class="profile-modal-content">
            <div class="profile-modal-header">
              <h3 class="profile-modal-title">Edit Profil</h3>
              <button class="profile-modal-close" data-modal="profile-edit-modal">
                <span class="material-symbols-outlined">close</span>
              </button>
            </div>
            <form id="profile-edit-form" class="profile-modal-body">
              <div class="profile-form-group">
                <label class="profile-form-label">Nama Lengkap</label>
                <input type="text" id="edit-profile-name" class="profile-form-input" placeholder="Nama Anda">
              </div>
              <div class="profile-form-group">
                <label class="profile-form-label">Email</label>
                <input type="email" id="edit-profile-email" class="profile-form-input" placeholder="email@example.com" disabled>
                <small class="profile-form-hint">Email tidak dapat diubah</small>
              </div>
              <div class="profile-form-group">
                <label class="profile-form-label">Bio</label>
                <textarea id="edit-profile-bio" class="profile-form-textarea" rows="3" placeholder="Tulis tentang diri Anda..."></textarea>
              </div>
              <div class="profile-form-actions">
                <button type="button" class="profile-btn-secondary" data-modal="profile-edit-modal">Batal</button>
                <button type="submit" class="profile-btn-primary">
                  <span class="material-symbols-outlined">save</span>
                  Simpan
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- Notifications Settings Modal -->
        <div id="profile-notifications-modal" class="profile-modal">
          <div class="profile-modal-content">
            <div class="profile-modal-header">
              <h3 class="profile-modal-title">Pengaturan Notifikasi</h3>
              <button class="profile-modal-close" data-modal="profile-notifications-modal">
                <span class="material-symbols-outlined">close</span>
              </button>
            </div>
            <div class="profile-modal-body">
              <div class="profile-toggle-group">
                <div class="profile-toggle-item">
                  <div class="toggle-info">
                    <span class="toggle-label">Notifikasi Push</span>
                    <span class="toggle-desc">Terima notifikasi penting</span>
                  </div>
                  <label class="profile-toggle-switch">
                    <input type="checkbox" id="notif-push" checked>
                    <span class="toggle-slider"></span>
                  </label>
                </div>
                <div class="profile-toggle-item">
                  <div class="toggle-info">
                    <span class="toggle-label">Peringatan Kesehatan</span>
                    <span class="toggle-desc">Notifikasi saat data abnormal</span>
                  </div>
                  <label class="profile-toggle-switch">
                    <input type="checkbox" id="notif-health" checked>
                    <span class="toggle-slider"></span>
                  </label>
                </div>
                <div class="profile-toggle-item">
                  <div class="toggle-info">
                    <span class="toggle-label">Pengingat Harian</span>
                    <span class="toggle-desc">Pengingat untuk cek kesehatan</span>
                  </div>
                  <label class="profile-toggle-switch">
                    <input type="checkbox" id="notif-daily">
                    <span class="toggle-slider"></span>
                  </label>
                </div>
                <div class="profile-toggle-item">
                  <div class="toggle-info">
                    <span class="toggle-label">Update Aplikasi</span>
                    <span class="toggle-desc">Notifikasi update & fitur baru</span>
                  </div>
                  <label class="profile-toggle-switch">
                    <input type="checkbox" id="notif-updates" checked>
                    <span class="toggle-slider"></span>
                  </label>
                </div>
              </div>
              <div class="profile-form-actions">
                <button type="button" class="profile-btn-secondary" data-modal="profile-notifications-modal">Tutup</button>
                <button type="button" class="profile-btn-primary" id="save-notifications">
                  <span class="material-symbols-outlined">save</span>
                  Simpan
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Privacy Settings Modal -->
        <div id="profile-privacy-modal" class="profile-modal">
          <div class="profile-modal-content">
            <div class="profile-modal-header">
              <h3 class="profile-modal-title">Pengaturan Privasi</h3>
              <button class="profile-modal-close" data-modal="profile-privacy-modal">
                <span class="material-symbols-outlined">close</span>
              </button>
            </div>
            <div class="profile-modal-body">
              <div class="profile-form-group">
                <label class="profile-form-label">Ubah Password</label>
                <input type="password" id="profile-new-password" class="profile-form-input" placeholder="Password baru">
                <input type="password" id="profile-confirm-password" class="profile-form-input" placeholder="Konfirmasi password" style="margin-top: 12px;">
                <button type="button" class="profile-btn-primary" id="change-password-btn" style="margin-top: 12px; width: 100%;">
                  <span class="material-symbols-outlined">lock</span>
                  Ubah Password
                </button>
              </div>
              <div class="profile-privacy-section">
                <h4 class="privacy-section-title">Visibilitas Profil</h4>
                <div class="profile-toggle-item">
                  <div class="toggle-info">
                    <span class="toggle-label">Profil Publik</span>
                    <span class="toggle-desc">Izinkan orang lain melihat profil Anda</span>
                  </div>
                  <label class="profile-toggle-switch">
                    <input type="checkbox" id="privacy-public">
                    <span class="toggle-slider"></span>
                  </label>
                </div>
                <div class="profile-toggle-item">
                  <div class="toggle-info">
                    <span class="toggle-label">Bagikan Data Anonim</span>
                    <span class="toggle-desc">Bantu penelitian kesehatan</span>
                  </div>
                  <label class="profile-toggle-switch">
                    <input type="checkbox" id="privacy-anonymous">
                    <span class="toggle-slider"></span>
                  </label>
                </div>
              </div>
              <div class="profile-form-actions">
                <button type="button" class="profile-btn-secondary" data-modal="profile-privacy-modal">Tutup</button>
                <button type="button" class="profile-btn-primary" id="save-privacy">
                  <span class="material-symbols-outlined">save</span>
                  Simpan
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Language Settings Modal -->
        <div id="profile-language-modal" class="profile-modal">
          <div class="profile-modal-content">
            <div class="profile-modal-header">
              <h3 class="profile-modal-title">Pilih Bahasa</h3>
              <button class="profile-modal-close" data-modal="profile-language-modal">
                <span class="material-symbols-outlined">close</span>
              </button>
            </div>
            <div class="profile-modal-body">
              <div class="profile-language-list">
                <button class="language-option active" data-lang="id">
                  <span class="language-flag">ğŸ‡®ğŸ‡©</span>
                  <span class="language-name">Bahasa Indonesia</span>
                  <span class="material-symbols-outlined">check</span>
                </button>
                <button class="language-option" data-lang="en">
                  <span class="language-flag">ğŸ‡ºğŸ‡¸</span>
                  <span class="language-name">English</span>
                  <span class="material-symbols-outlined">check</span>
                </button>
                <button class="language-option" data-lang="ms">
                  <span class="language-flag">ğŸ‡²ğŸ‡¾</span>
                  <span class="language-name">Bahasa Melayu</span>
                  <span class="material-symbols-outlined">check</span>
                </button>
              </div>
              <div class="profile-form-actions">
                <button type="button" class="profile-btn-secondary" data-modal="profile-language-modal">Tutup</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Help Center Modal -->
        <div id="profile-help-modal" class="profile-modal">
          <div class="profile-modal-content">
            <div class="profile-modal-header">
              <h3 class="profile-modal-title">Pusat Bantuan</h3>
              <button class="profile-modal-close" data-modal="profile-help-modal">
                <span class="material-symbols-outlined">close</span>
              </button>
            </div>
            <div class="profile-modal-body">
              <div class="help-search">
                <input type="text" class="help-search-input" placeholder="Cari bantuan...">
                <span class="material-symbols-outlined">search</span>
              </div>
              <div class="help-categories">
                <div class="help-category-item">
                  <span class="material-symbols-outlined">devices</span>
                  <div>
                    <span class="help-category-title">Koneksi Perangkat</span>
                    <span class="help-category-desc">Troubleshooting BLE</span>
                  </div>
                </div>
                <div class="help-category-item">
                  <span class="material-symbols-outlined">analytics</span>
                  <div>
                    <span class="help-category-title">Membaca Data</span>
                    <span class="help-category-desc">Panduan interpretasi</span>
                  </div>
                </div>
                <div class="help-category-item">
                  <span class="material-symbols-outlined">account_circle</span>
                  <div>
                    <span class="help-category-title">Akun & Profil</span>
                    <span class="help-category-desc">Kelola akun Anda</span>
                  </div>
                </div>
                <div class="help-category-item">
                  <span class="material-symbols-outlined">security</span>
                  <div>
                    <span class="help-category-title">Keamanan</span>
                    <span class="help-category-desc">Privasi & keamanan data</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Contact Support Modal -->
        <div id="profile-contact-modal" class="profile-modal">
          <div class="profile-modal-content">
            <div class="profile-modal-header">
              <h3 class="profile-modal-title">Hubungi Kami</h3>
              <button class="profile-modal-close" data-modal="profile-contact-modal">
                <span class="material-symbols-outlined">close</span>
              </button>
            </div>
            <div class="profile-modal-body">
              <div class="contact-options">
                <a href="mailto:support@carering.com" class="contact-option">
                  <span class="material-symbols-outlined">email</span>
                  <div>
                    <span class="contact-option-title">Email Support</span>
                    <span class="contact-option-desc">support@carering.com</span>
                  </div>
                </a>
                <a href="tel:+628123456789" class="contact-option">
                  <span class="material-symbols-outlined">phone</span>
                  <div>
                    <span class="contact-option-title">Telepon</span>
                    <span class="contact-option-desc">+62 812-3456-7890</span>
                  </div>
                </a>
                <button class="contact-option" id="open-ai-chat-support">
                  <span class="material-symbols-outlined">chat</span>
                  <div>
                    <span class="contact-option-title">Chat dengan AI</span>
                    <span class="contact-option-desc">Bantuan instan 24/7</span>
                  </div>
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Rate App Modal -->
        <div id="profile-rate-modal" class="profile-modal">
          <div class="profile-modal-content">
            <div class="profile-modal-header">
              <h3 class="profile-modal-title">Beri Rating</h3>
              <button class="profile-modal-close" data-modal="profile-rate-modal">
                <span class="material-symbols-outlined">close</span>
              </button>
            </div>
            <div class="profile-modal-body">
              <div class="rate-content">
                <p class="rate-question">Bagaimana pengalaman Anda menggunakan CareRing?</p>
                <div class="rate-stars">
                  <button class="rate-star" data-rating="1">â­</button>
                  <button class="rate-star" data-rating="2">â­</button>
                  <button class="rate-star" data-rating="3">â­</button>
                  <button class="rate-star" data-rating="4">â­</button>
                  <button class="rate-star" data-rating="5">â­</button>
                </div>
                <textarea id="rate-feedback" class="profile-form-textarea" rows="3" placeholder="Tulis feedback Anda (opsional)..." style="margin-top: 20px;"></textarea>
                <button type="button" class="profile-btn-primary" id="submit-rating" style="margin-top: 16px; width: 100%;">
                  <span class="material-symbols-outlined">send</span>
                  Kirim Rating
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Profile Toast -->
        <div id="profile-toast" class="profile-toast">
          <span class="material-symbols-outlined">check_circle</span>
          <span id="profile-toast-message">Berhasil!</span>
        </div>
      </div>

      <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           PAGE: KUISIONER
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
      <div id="page-kuisioner" class="page">
        <div class="questionnaire-modern-container">

          <!-- Questionnaire Hero -->
          <div class="questionnaire-hero">
            <div class="questionnaire-cover">
              <div class="questionnaire-cover-gradient"></div>
              <div class="questionnaire-pattern"></div>
            </div>
            <div class="questionnaire-hero-content">
              <span class="questionnaire-icon">
                <span class="material-symbols-outlined">assignment</span>
              </span>
              <h1 class="questionnaire-title">Kuisioner Kepuasan Pengguna</h1>
              <p class="questionnaire-subtitle">Bantu kami meningkatkan CareRing dengan feedback Anda</p>
              <div class="questionnaire-meta">
                <span class="meta-item">
                  <span class="material-symbols-outlined">schedule</span>
                  ~5 menit
                </span>
                <span class="meta-item">
                  <span class="material-symbols-outlined">quiz</span>
                  15 pertanyaan
                </span>
              </div>
            </div>
          </div>

          <!-- Progress Indicator -->
          <div class="questionnaire-progress-wrapper">
            <div class="progress-header">
              <span class="progress-label">Progress</span>
              <span class="progress-percentage" id="progress-percentage">0%</span>
            </div>
            <div class="progress-bar-container">
              <div class="progress-bar-fill" id="progress-bar-fill"></div>
            </div>
          </div>

          <div class="questionnaire-container">
            <form id="questionnaireForm">

              <!-- BAGIAN 1: INFORMASI RESPONDEN -->
              <div class="questionnaire-card">
                <div class="questionnaire-card-header">
                  <div class="card-header-icon">
                    <span class="material-symbols-outlined">person</span>
                  </div>
                  <div class="card-header-text">
                    <h3 class="card-title">Informasi Responden</h3>
                    <p class="card-subtitle">Data dasar tentang Anda</p>
                  </div>
                </div>
                <div class="questionnaire-card-body">
                  <div class="form-group">
                    <label class="form-label">
                      <span class="material-symbols-outlined">badge</span>
                      Nama Lengkap <span class="required">*</span>
                    </label>
                    <input type="text" id="name" name="name" class="form-input" required placeholder="Masukkan nama lengkap Anda">
                  </div>

                  <div class="form-group">
                    <label class="form-label">
                      <span class="material-symbols-outlined">mail</span>
                      Email <span class="required">*</span>
                    </label>
                    <input type="email" id="email" name="email" class="form-input" required placeholder="contoh@email.com">
                  </div>

                  <div class="form-row">
                    <div class="form-group">
                      <label class="form-label">
                        <span class="material-symbols-outlined">cake</span>
                        Usia <span class="required">*</span>
                      </label>
                      <input type="number" id="age" name="age" class="form-input" required min="10" max="100" placeholder="Usia">
                    </div>

                    <div class="form-group">
                      <label class="form-label">
                        <span class="material-symbols-outlined">schedule</span>
                        Durasi Penggunaan <span class="required">*</span>
                      </label>
                      <select id="usageDuration" name="usageDuration" class="form-input" required>
                        <option value="">Pilih durasi</option>
                        <option value="< 1 bulan">Kurang dari 1 bulan</option>
                        <option value="1-3 bulan">1-3 bulan</option>
                        <option value="3-6 bulan">3-6 bulan</option>
                        <option value="> 6 bulan">Lebih dari 6 bulan</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>

              <!-- BAGIAN 2: PENGGUNAAN APLIKASI -->
              <div class="questionnaire-card">
                <div class="questionnaire-card-header">
                  <div class="card-header-icon">
                    <span class="material-symbols-outlined">phone_android</span>
                  </div>
                  <div class="card-header-text">
                    <h3 class="card-title">Pengalaman Aplikasi</h3>
                    <p class="card-subtitle">Penilaian terhadap aplikasi mobile</p>
                  </div>
                </div>
                <div class="questionnaire-card-body">
                  <div class="form-group">
                    <label class="form-label">
                      <span class="material-symbols-outlined">touch_app</span>
                      Seberapa mudah Anda menggunakan aplikasi CareRing? <span class="required">*</span>
                    </label>
                    <div class="rating-scale-modern">
                      <button type="button" class="rating-btn-modern" data-rating="app-ease" data-value="1">
                        <span class="rating-emoji">ğŸ˜Ÿ</span>
                        <span class="rating-text">Sangat Sulit</span>
                      </button>
                      <button type="button" class="rating-btn-modern" data-rating="app-ease" data-value="2">
                        <span class="rating-number">2</span>
                      </button>
                      <button type="button" class="rating-btn-modern" data-rating="app-ease" data-value="3">
                        <span class="rating-emoji">ğŸ˜</span>
                        <span class="rating-text">Netral</span>
                      </button>
                      <button type="button" class="rating-btn-modern" data-rating="app-ease" data-value="4">
                        <span class="rating-number">4</span>
                      </button>
                      <button type="button" class="rating-btn-modern" data-rating="app-ease" data-value="5">
                        <span class="rating-emoji">ğŸ˜Š</span>
                        <span class="rating-text">Sangat Mudah</span>
                      </button>
                    </div>
                    <input type="hidden" id="appEase" name="appEase" required>
                  </div>

                  <div class="form-group">
                    <label class="form-label">
                      <span class="material-symbols-outlined">star</span>
                      Fitur aplikasi apa yang paling Anda sukai? <span class="required">*</span>
                    </label>
                    <div class="checkbox-grid-modern">
                      <label class="checkbox-card">
                        <input type="checkbox" name="appFeatures" value="Monitoring real-time">
                        <span class="checkbox-card-content">
                          <span class="material-symbols-outlined">monitoring</span>
                          <span class="checkbox-label">Monitoring Real-time</span>
                        </span>
                      </label>
                      <label class="checkbox-card">
                        <input type="checkbox" name="appFeatures" value="Chat AI">
                        <span class="checkbox-card-content">
                          <span class="material-symbols-outlined">smart_toy</span>
                          <span class="checkbox-label">Chat AI</span>
                        </span>
                      </label>
                      <label class="checkbox-card">
                        <input type="checkbox" name="appFeatures" value="Riwayat data">
                        <span class="checkbox-card-content">
                          <span class="material-symbols-outlined">history</span>
                          <span class="checkbox-label">Riwayat Data</span>
                        </span>
                      </label>
                      <label class="checkbox-card">
                        <input type="checkbox" name="appFeatures" value="Notifikasi">
                        <span class="checkbox-card-content">
                          <span class="material-symbols-outlined">notifications</span>
                          <span class="checkbox-label">Notifikasi</span>
                        </span>
                      </label>
                      <label class="checkbox-card">
                        <input type="checkbox" name="appFeatures" value="Berita kesehatan">
                        <span class="checkbox-card-content">
                          <span class="material-symbols-outlined">newspaper</span>
                          <span class="checkbox-label">Berita Kesehatan</span>
                        </span>
                      </label>
                    </div>
                  </div>

                  <div class="form-group">
                    <label class="form-label">
                      <span class="material-symbols-outlined">palette</span>
                      Seberapa puas Anda dengan tampilan aplikasi? <span class="required">*</span>
                    </label>
                    <div class="rating-scale-modern">
                      <button type="button" class="rating-btn-modern" data-rating="app-ui" data-value="1">
                        <span class="rating-emoji">ğŸ˜</span>
                        <span class="rating-text">Tidak Puas</span>
                      </button>
                      <button type="button" class="rating-btn-modern" data-rating="app-ui" data-value="2">
                        <span class="rating-number">2</span>
                      </button>
                      <button type="button" class="rating-btn-modern" data-rating="app-ui" data-value="3">
                        <span class="rating-emoji">ğŸ˜</span>
                        <span class="rating-text">Cukup</span>
                      </button>
                      <button type="button" class="rating-btn-modern" data-rating="app-ui" data-value="4">
                        <span class="rating-number">4</span>
                      </button>
                      <button type="button" class="rating-btn-modern" data-rating="app-ui" data-value="5">
                        <span class="rating-emoji">ğŸ˜</span>
                        <span class="rating-text">Sangat Puas</span>
                      </button>
                    </div>
                    <input type="hidden" id="appUI" name="appUI" required>
                  </div>
                </div>
              </div>

              <!-- BAGIAN 3: PENGGUNAAN SMARTRING -->
              <div class="questionnaire-card">
                <div class="questionnaire-card-header">
                  <div class="card-header-icon">
                    <span class="material-symbols-outlined">watch</span>
                  </div>
                  <div class="card-header-text">
                    <h3 class="card-title">Pengalaman Smartring</h3>
                    <p class="card-subtitle">Penilaian terhadap perangkat smartring</p>
                  </div>
                </div>
                <div class="questionnaire-card-body">
                  <div class="form-group">
                    <label class="form-label">
                      <span class="material-symbols-outlined">sentiment_satisfied</span>
                      Seberapa nyaman Anda menggunakan smartring? <span class="required">*</span>
                    </label>
                    <div class="rating-scale-modern">
                      <button type="button" class="rating-btn-modern" data-rating="ring-comfort" data-value="1">
                        <span class="rating-emoji">ğŸ˜£</span>
                        <span class="rating-text">Tidak Nyaman</span>
                      </button>
                      <button type="button" class="rating-btn-modern" data-rating="ring-comfort" data-value="2">
                        <span class="rating-number">2</span>
                      </button>
                      <button type="button" class="rating-btn-modern" data-rating="ring-comfort" data-value="3">
                        <span class="rating-emoji">ğŸ˜</span>
                        <span class="rating-text">Cukup</span>
                      </button>
                      <button type="button" class="rating-btn-modern" data-rating="ring-comfort" data-value="4">
                        <span class="rating-number">4</span>
                      </button>
                      <button type="button" class="rating-btn-modern" data-rating="ring-comfort" data-value="5">
                        <span class="rating-emoji">ğŸ˜„</span>
                        <span class="rating-text">Sangat Nyaman</span>
                      </button>
                    </div>
                    <input type="hidden" id="ringComfort" name="ringComfort" required>
                  </div>

                  <div class="form-group">
                    <label class="form-label">
                      <span class="material-symbols-outlined">precision_manufacturing</span>
                      Seberapa akurat menurut Anda data yang dihasilkan smartring? <span class="required">*</span>
                    </label>
                    <div class="rating-scale-modern">
                      <button type="button" class="rating-btn-modern" data-rating="ring-accuracy" data-value="1">
                        <span class="rating-emoji">âŒ</span>
                        <span class="rating-text">Tidak Akurat</span>
                      </button>
                      <button type="button" class="rating-btn-modern" data-rating="ring-accuracy" data-value="2">
                        <span class="rating-number">2</span>
                      </button>
                      <button type="button" class="rating-btn-modern" data-rating="ring-accuracy" data-value="3">
                        <span class="rating-emoji">ğŸŸ¡</span>
                        <span class="rating-text">Cukup</span>
                      </button>
                      <button type="button" class="rating-btn-modern" data-rating="ring-accuracy" data-value="4">
                        <span class="rating-number">4</span>
                      </button>
                      <button type="button" class="rating-btn-modern" data-rating="ring-accuracy" data-value="5">
                        <span class="rating-emoji">âœ…</span>
                        <span class="rating-text">Sangat Akurat</span>
                      </button>
                    </div>
                    <input type="hidden" id="ringAccuracy" name="ringAccuracy" required>
                  </div>

                  <div class="form-group">
                    <label class="form-label">
                      <span class="material-symbols-outlined">battery_charging_full</span>
                      Bagaimana ketahanan baterai smartring? <span class="required">*</span>
                    </label>
                    <div class="radio-grid-modern">
                      <label class="radio-card">
                        <input type="radio" name="batteryLife" value="Kurang dari 1 hari" required>
                        <span class="radio-card-content">
                          <span class="material-symbols-outlined">battery_0_bar</span>
                          <span class="radio-label">< 1 hari</span>
                        </span>
                      </label>
                      <label class="radio-card">
                        <input type="radio" name="batteryLife" value="1-2 hari" required>
                        <span class="radio-card-content">
                          <span class="material-symbols-outlined">battery_2_bar</span>
                          <span class="radio-label">1-2 hari</span>
                        </span>
                      </label>
                      <label class="radio-card">
                        <input type="radio" name="batteryLife" value="3-5 hari" required>
                        <span class="radio-card-content">
                          <span class="material-symbols-outlined">battery_5_bar</span>
                          <span class="radio-label">3-5 hari</span>
                        </span>
                      </label>
                      <label class="radio-card">
                        <input type="radio" name="batteryLife" value="Lebih dari 5 hari" required>
                        <span class="radio-card-content">
                          <span class="material-symbols-outlined">battery_full</span>
                          <span class="radio-label">> 5 hari</span>
                        </span>
                      </label>
                    </div>
                  </div>

                  <div class="form-group">
                    <label class="form-label">
                      <span class="material-symbols-outlined">bluetooth</span>
                      Apakah Anda pernah mengalami masalah koneksi Bluetooth? <span class="required">*</span>
                    </label>
                    <div class="radio-grid-modern">
                      <label class="radio-card">
                        <input type="radio" name="bleIssue" value="Tidak pernah" required>
                        <span class="radio-card-content">
                          <span class="material-symbols-outlined">check_circle</span>
                          <span class="radio-label">Tidak pernah</span>
                        </span>
                      </label>
                      <label class="radio-card">
                        <input type="radio" name="bleIssue" value="Jarang" required>
                        <span class="radio-card-content">
                          <span class="material-symbols-outlined">error_outline</span>
                          <span class="radio-label">Jarang (1-2x)</span>
                        </span>
                      </label>
                      <label class="radio-card">
                        <input type="radio" name="bleIssue" value="Kadang-kadang" required>
                        <span class="radio-card-content">
                          <span class="material-symbols-outlined">warning</span>
                          <span class="radio-label">Kadang (3-5x)</span>
                        </span>
                      </label>
                      <label class="radio-card">
                        <input type="radio" name="bleIssue" value="Sering" required>
                        <span class="radio-card-content">
                          <span class="material-symbols-outlined">report</span>
                          <span class="radio-label">Sering (>5x)</span>
                        </span>
                      </label>
                    </div>
                  </div>
                </div>
              </div>

              <!-- BAGIAN 4: KEPUASAN KESELURUHAN -->
              <div class="questionnaire-card">
                <div class="questionnaire-card-header">
                  <div class="card-header-icon">
                    <span class="material-symbols-outlined">grade</span>
                  </div>
                  <div class="card-header-text">
                    <h3 class="card-title">Kepuasan Keseluruhan</h3>
                    <p class="card-subtitle">Penilaian akhir dan saran Anda</p>
                  </div>
                </div>
                <div class="questionnaire-card-body">
                  <div class="form-group">
                    <label class="form-label">
                      <span class="material-symbols-outlined">share</span>
                      Seberapa besar kemungkinan Anda merekomendasikan CareRing? <span class="required">*</span>
                    </label>
                    <p class="form-hint">0 = Sangat tidak mungkin, 10 = Sangat mungkin</p>
                    <div class="nps-scale-modern">
                      <button type="button" class="nps-btn" data-rating="nps" data-value="0">0</button>
                      <button type="button" class="nps-btn" data-rating="nps" data-value="1">1</button>
                      <button type="button" class="nps-btn" data-rating="nps" data-value="2">2</button>
                      <button type="button" class="nps-btn" data-rating="nps" data-value="3">3</button>
                      <button type="button" class="nps-btn" data-rating="nps" data-value="4">4</button>
                      <button type="button" class="nps-btn" data-rating="nps" data-value="5">5</button>
                      <button type="button" class="nps-btn" data-rating="nps" data-value="6">6</button>
                      <button type="button" class="nps-btn" data-rating="nps" data-value="7">7</button>
                      <button type="button" class="nps-btn" data-rating="nps" data-value="8">8</button>
                      <button type="button" class="nps-btn" data-rating="nps" data-value="9">9</button>
                      <button type="button" class="nps-btn" data-rating="nps" data-value="10">10</button>
                    </div>
                    <input type="hidden" id="nps" name="nps" required>
                  </div>

                  <div class="form-group">
                    <label class="form-label">
                      <span class="material-symbols-outlined">feedback</span>
                      Saran atau kritik untuk pengembangan CareRing
                    </label>
                    <textarea id="feedback" name="feedback" class="form-textarea" rows="5" placeholder="Tuliskan saran, kritik, atau fitur yang Anda inginkan..."></textarea>
                  </div>
                </div>
              </div>

              <div class="form-actions">
                <button type="submit" class="submit-btn-modern" id="submitBtn">
                  <span class="material-symbols-outlined">send</span>
                  Kirim Kuisioner
                </button>
              </div>
            </form>

            <!-- Success Modal -->
            <div class="success-modal" id="successMessage">
              <div class="success-modal-content">
                <div class="success-animation">
                  <div class="success-checkmark">
                    <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
                      <circle class="checkmark-circle" cx="26" cy="26" r="25" fill="none"/>
                      <path class="checkmark-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
                    </svg>
                  </div>
                </div>
                <h2 class="success-title">Terima Kasih!</h2>
                <p class="success-subtitle">Kuisioner Anda telah berhasil dikirim</p>
                <p class="success-message-text">Masukan Anda sangat berharga bagi kami untuk terus meningkatkan kualitas CareRing</p>
                <div class="success-actions">
                  <button class="btn-primary-modern" data-navigate="home">
                    <span class="material-symbols-outlined">home</span>
                    Kembali ke Home
                  </button>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>

    </main>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         BOTTOM NAVIGATION (Persisten - Always visible)
         Swipe/scroll kanan-kiri untuk melihat semua menu
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="bottom-nav" id="bottom-nav">
      <div class="nav-item active" data-navigate="home">
        <div class="nav-icon"><span class="material-symbols-outlined">home</span></div>
        <div class="nav-label">Home</div>
      </div>
      <div class="nav-item" data-navigate="news">
        <div class="nav-icon"><span class="material-symbols-outlined">newspaper</span></div>
        <div class="nav-label">News</div>
      </div>
      <div class="nav-item" data-navigate="perangkat">
        <div class="nav-icon"><span class="material-symbols-outlined">devices</span></div>
        <div class="nav-label">Perangkat</div>
      </div>
      <div class="nav-item" data-navigate="ai-chat">
        <div class="nav-icon"><span class="material-symbols-outlined">smart_toy</span></div>
        <div class="nav-label">AI Chat</div>
      </div>
      <div class="nav-item" data-navigate="forum">
        <div class="nav-icon"><span class="material-symbols-outlined">forum</span></div>
        <div class="nav-label">Forum</div>
      </div>
      <div class="nav-item" data-navigate="kuisioner">
        <div class="nav-icon"><span class="material-symbols-outlined">assignment</span></div>
        <div class="nav-label">Kuisioner</div>
      </div>
      <div class="nav-item" data-navigate="profil">
        <div class="nav-icon"><span class="material-symbols-outlined">person</span></div>
        <div class="nav-label">Profil</div>
      </div>
    </div>

  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       FIREBASE & SCRIPTS - Load sekali, persist selamanya!
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

  <script src="/script.js"></script>
  <script src="/auth-guard.js"></script>
  <script src="/ble-handler.js"></script>
  <script src="/ble-indicator.js"></script>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SPA ROUTER - Handle navigation tanpa page reload!
       â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <script>
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    //                    SPA ROUTER SYSTEM
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    (function() {
      'use strict';

      console.log('ğŸš€ SPA Router initialized');
      console.log('âœ… BLE Connection will persist across navigation!');

      // Current page tracking
      let currentPage = 'home';

      /**
       * Navigate to a page
       */
      function navigateToPage(pageName) {
        console.log(`ğŸ“„ Navigating to: ${pageName}`);

        // Hide all pages
        document.querySelectorAll('.page').forEach(page => {
          page.classList.remove('active');
        });

        // Show target page
        const targetPage = document.getElementById(`page-${pageName}`);
        if (targetPage) {
          targetPage.classList.add('active');
          currentPage = pageName;

          // Update navigation active state
          updateNavigation(pageName);

          // Update URL hash (without reload!)
          window.location.hash = pageName;

          // Scroll to top
          window.scrollTo(0, 0);

          // Page-specific initialization
          initializePage(pageName);
        } else {
          console.error(`âŒ Page not found: ${pageName}`);
        }
      }

      /**
       * Update navigation bar active state
       */
      function updateNavigation(pageName) {
        document.querySelectorAll('.nav-item').forEach(item => {
          item.classList.remove('active');
        });

        const activeNav = document.querySelector(`.nav-item[data-navigate="${pageName}"]`);
        if (activeNav) {
          activeNav.classList.add('active');

          // Move sliding indicator to active item
          moveIndicator(activeNav);
        }
      }

      /**
       * Move indicator (simplified - no sliding animation)
       */
      function moveIndicator(activeElement) {
        // Indicator removed for cleaner design
      }

      /**
       * Initialize page-specific functionality
       */
      function initializePage(pageName) {
        console.log(`ğŸ”§ Initializing page: ${pageName}`);

        switch(pageName) {
          case 'home':
            // Home page already initialized by script.js
            break;

          case 'news':
            // Trigger news loading if needed
            if (typeof loadNews === 'function') {
              loadNews();
            }
            break;

          case 'perangkat':
            // Perangkat page specific init
            initPerangkatPage();
            break;

          case 'ai-chat':
            // AI Chat init
            break;

          case 'forum':
            // Forum init
            initForumPage();
            break;

          case 'profil':
            // Profile page init
            initProfilePage();
            break;

          case 'kuisioner':
            // Kuisioner page init
            initKuisionerPage();
            // Reset form visibility when navigating to kuisioner
            const qForm = document.getElementById('questionnaireForm');
            const qFormActions = document.querySelector('.form-actions');
            const qSuccessMsg = document.getElementById('successMessage');
            if (qForm) qForm.style.display = 'block';
            if (qFormActions) qFormActions.style.display = 'block';
            if (qSuccessMsg) qSuccessMsg.classList.remove('show');
            break;
        }
      }

      /**
       * Initialize Perangkat page
       */
      function initPerangkatPage() {
        console.log('ğŸ”§ Initializing Perangkat page...');

        // Get modal elements
        const modal = document.getElementById('ble-modal');
        const btnConnect = document.getElementById('btn-connect-device');
        const btnClose = document.getElementById('ble-close-btn');
        const btnBLEConnect = document.getElementById('ble-connect-btn');
        const bleProgress = document.getElementById('ble-progress');
        const bleMessage = document.getElementById('ble-message');
        const deviceNameInput = document.getElementById('ble-device-name');

        // Open modal
        if (btnConnect) {
          btnConnect.addEventListener('click', () => {
            modal.classList.add('show');
            bleMessage.classList.remove('show');
          });
        }

        // Close modal
        if (btnClose) {
          btnClose.addEventListener('click', () => {
            modal.classList.remove('show');
          });
        }

        // Close modal on outside click
        if (modal) {
          modal.addEventListener('click', (e) => {
            if (e.target === modal) {
              modal.classList.remove('show');
            }
          });
        }

        // Connect to device
        if (btnBLEConnect) {
          btnBLEConnect.addEventListener('click', async () => {
            try {
              // Show progress
              if (bleProgress) bleProgress.classList.add('show');
              if (bleMessage) bleMessage.classList.remove('show');

              // Disable button during connection
              if (btnBLEConnect) {
                btnBLEConnect.disabled = true;
                btnBLEConnect.innerHTML = '<span class="material-symbols-outlined">hourglass_empty</span> Menghubungkan...';
              }

              // Update device name prefix if needed (optional field)
              if (deviceNameInput && deviceNameInput.value) {
                const deviceName = deviceNameInput.value.trim();
                if (deviceName) {
                  console.log('ğŸ” Mencari perangkat:', deviceName);
                }
              }

              // Call BLE connect from ble-handler.js
              if (window.BLEHandler && window.BLEHandler.connect) {
                await window.BLEHandler.connect();

                // Success!
                if (bleProgress) bleProgress.classList.remove('show');

                if (bleMessage) {
                  bleMessage.className = 'ble-message show success';
                  bleMessage.textContent = 'âœ… Berhasil terhubung! Data akan mulai disinkronkan.';
                }

                if (btnBLEConnect) {
                  btnBLEConnect.innerHTML = '<span class="material-symbols-outlined">check_circle</span> Terhubung';
                }

                // Close modal after 2 seconds
                setTimeout(() => {
                  if (modal) modal.classList.remove('show');
                  updateDeviceUI();
                }, 2000);

              } else {
                throw new Error('BLE Handler belum dimuat');
              }

            } catch (error) {
              console.error('âŒ Koneksi gagal:', error);

              // Hide progress and show error message
              if (bleProgress) bleProgress.classList.remove('show');

              if (bleMessage) {
                bleMessage.className = 'ble-message show error';
                bleMessage.textContent = error.message || 'Gagal menghubungkan. Pastikan Bluetooth aktif dan perangkat dalam mode pairing.';
              }

              // Re-enable button
              if (btnBLEConnect) {
                btnBLEConnect.disabled = false;
                btnBLEConnect.innerHTML = '<span class="material-symbols-outlined">bluetooth_searching</span> Coba Lagi';
              }
            }
          });
        }

        // Update UI based on connection status
        updateDeviceUI();



        

        // Listen for BLE events
        window.addEventListener('bleConnected', updateDeviceUI);
        window.addEventListener('bleDisconnected', updateDeviceUI);
      }

      /**
       * Update device UI based on connection status
       */
      function updateDeviceUI() {
        const connectedContainer = document.getElementById('connected-devices-container');
        const noDevicesState = document.getElementById('no-devices-state');

        if (!connectedContainer || !noDevicesState) return;

        // Check if device is connected
        if (window.BLEHandler && window.BLEHandler.isConnected && window.BLEHandler.isConnected()) {
          const deviceInfo = window.BLEHandler.getDeviceInfo();

          // Hide no devices state
          noDevicesState.style.display = 'none';

          // Show connected device
          connectedContainer.innerHTML = `
            <div class="device-card">
              <div class="device-name">${deviceInfo.name || 'CareRing Device'}</div>
              <div style="font-size: 0.85em; color: #666; margin-top: 4px;">
                <span class="material-symbols-outlined" style="font-size: 16px; vertical-align: middle; color: #27AE60;">check_circle</span>
                Terhubung
              </div>
              <div style="font-size: 0.8em; color: #999; margin-top: 8px;">
                ID: ${deviceInfo.id || '-'}
              </div>

              <div class="device-actions">
                <div class="action-btn" onclick="console.log('Sync clicked')">
                  <span class="material-symbols-outlined">sync</span>
                  <div>
                    <div style="font-weight: 600;">Sinkronisasi Manual</div>
                    <div style="font-size: 0.85em; color: #666;">Update data sekarang</div>
                  </div>
                </div>

                <div class="action-btn action-btn-disconnect" onclick="disconnectDevice()">
                  <span class="material-symbols-outlined">link_off</span>
                  <div>
                    <div style="font-weight: 600; color: #E74C3C;">Putuskan Koneksi</div>
                    <div style="font-size: 0.85em; color: #999;">Hentikan monitoring</div>
                  </div>
                </div>
              </div>
            </div>
          `;
        } else {
          // Show no devices state
          noDevicesState.style.display = 'block';
          connectedContainer.innerHTML = '';
        }
      }

      /**
       * Disconnect device
       */
      function disconnectDevice() {
        if (confirm('Apakah Anda yakin ingin memutuskan koneksi dengan perangkat?')) {
          if (window.BLEHandler && window.BLEHandler.disconnect) {
            window.BLEHandler.disconnect();
            updateDeviceUI();
          }
        }
      }

      // Make functions globally accessible
      window.disconnectDevice = disconnectDevice;

      /**
       * Initialize Profile Page
       */
      function initProfilePage() {
        console.log('ğŸ”§ Initializing Profile page...');
        
        // Get user data from Firebase Auth
        if (firebase && firebase.auth) {
          firebase.auth().onAuthStateChanged((user) => {
            if (user) {
              // Update profile name
              const elNama = document.getElementById('profil-nama');
              if (elNama) elNama.innerText = user.displayName || 'Pengguna';
              
              // Update profile email
              const elEmail = document.getElementById('profil-email');
              if (elEmail) elEmail.innerText = user.email || '';
              
              // Update profile image
              const elImg = document.getElementById('profil-img');
              const elIcon = document.getElementById('profil-default-icon');
              if (elImg && user.photoURL) {
                elImg.src = user.photoURL;
                elImg.style.display = 'block';
                if (elIcon) elIcon.style.display = 'none';
              }
              
              // Update user ID
              const elUserId = document.getElementById('profile-user-id');
              if (elUserId && user.uid) {
                elUserId.innerText = 'CR-' + user.uid.substring(0, 6).toUpperCase();
              }
              
              // Update member since
              const elMemberSince = document.getElementById('profile-member-since');
              if (elMemberSince && user.metadata && user.metadata.creationTime) {
                const creationDate = new Date(user.metadata.creationTime);
                const options = { year: 'numeric', month: 'long' };
                elMemberSince.innerText = creationDate.toLocaleDateString('id-ID', options);
              }
            }
          });
        }
        
        // Load profile stats from sensor history
        if (firebase && firebase.database) {
          const historyRef = firebase.database().ref("/sensorHistory");
          historyRef.limitToLast(100).once("value", (snapshot) => {
            const data = snapshot.val();
            if (data) {
              const entries = Object.values(data);
              
              // Calculate average heart rate
              const bpms = entries.map(d => d.bpm || 0).filter(v => v > 0);
              if (bpms.length > 0) {
                const avgBpm = Math.round(bpms.reduce((a, b) => a + b, 0) / bpms.length);
                const elStatHr = document.getElementById('profile-stat-heartrate');
                if (elStatHr) elStatHr.innerText = avgBpm;
              }
              
              // Calculate average temperature
              const temps = entries.map(d => d.objTemp || 0).filter(v => v > 30 && v < 42);
              if (temps.length > 0) {
                const avgTemp = (temps.reduce((a, b) => a + b, 0) / temps.length).toFixed(1);
                const elStatTemp = document.getElementById('profile-stat-temp');
                if (elStatTemp) elStatTemp.innerText = avgTemp;
              }
              
              // Update data points count
              const elStatRecords = document.getElementById('profile-stat-records');
              if (elStatRecords) elStatRecords.innerText = entries.length;
              
              // Calculate active days
              const uniqueDays = new Set();
              entries.forEach(entry => {
                if (entry.timestamp) {
                  const date = new Date(entry.timestamp);
                  uniqueDays.add(date.toDateString());
                }
              });
              const elStatDays = document.getElementById('profile-stat-days');
              if (elStatDays) elStatDays.innerText = uniqueDays.size;
            }
          });
        }
        
        // Load device info
        if (firebase && firebase.database) {
          const devicesRef = firebase.database().ref("/realtimeSensorData");
          devicesRef.once("value", (snapshot) => {
            const devices = snapshot.val();
            if (devices && Object.keys(devices).length > 0) {
              const deviceKeys = Object.keys(devices);
              const firstDevice = devices[deviceKeys[0]];
              
              const elDeviceName = document.getElementById('profile-device-name');
              if (elDeviceName && firstDevice) {
                elDeviceName.innerText = firstDevice.deviceName || 'CareRing Device';
              }
              
              const elDeviceId = document.getElementById('profile-device-id');
              if (elDeviceId && firstDevice) {
                elDeviceId.innerText = 'ID: ' + (firstDevice.deviceID || deviceKeys[0].substring(0, 17));
              }
            }
          });
        }
        
        // Logout button handler
        const btnLogout = document.getElementById('btn-logout');
        if (btnLogout) {
          // Remove old listeners
          const newBtnLogout = btnLogout.cloneNode(true);
          btnLogout.parentNode.replaceChild(newBtnLogout, btnLogout);
          
          newBtnLogout.addEventListener('click', (e) => {
            e.preventDefault();
            if (confirm('Apakah Anda yakin ingin keluar dari akun?')) {
              if (firebase && firebase.auth) {
                firebase.auth().signOut().then(() => {
                  console.log('âœ… Logged out successfully');
                  window.location.href = 'login.html';
                }).catch((error) => {
                  console.error('âŒ Logout error:', error);
                  alert('Gagal logout: ' + error.message);
                });
              }
            }
          });
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // PROFILE MENU HANDLERS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        // Show toast message
        function showProfileToast(message) {
          const toast = document.getElementById('profile-toast');
          const toastMsg = document.getElementById('profile-toast-message');
          if (toastMsg) toastMsg.textContent = message;
          if (toast) {
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
          }
        }

        // Modal helper functions
        function openModal(modalId) {
          const modal = document.getElementById(modalId);
          if (modal) {
            modal.classList.add('show');
            document.body.style.overflow = 'hidden';
          }
        }

        function closeModal(modalId) {
          const modal = document.getElementById(modalId);
          if (modal) {
            modal.classList.remove('show');
            document.body.style.overflow = '';
          }
        }

        // Close modal on button click
        document.querySelectorAll('.profile-modal-close').forEach(btn => {
          btn.addEventListener('click', (e) => {
            e.stopPropagation();
            const modal = btn.closest('.profile-modal');
            if (modal) closeModal(modal.id);
          });
        });

        // Close modal on secondary button (Batal/Tutup)
        document.querySelectorAll('[data-modal]').forEach(btn => {
          if (btn.classList.contains('profile-btn-secondary')) {
            btn.addEventListener('click', (e) => {
              e.stopPropagation();
              const modalId = btn.getAttribute('data-modal');
              if (modalId) closeModal(modalId);
            });
          }
        });

        // Close modal on background click
        document.querySelectorAll('.profile-modal').forEach(modal => {
          modal.addEventListener('click', (e) => {
            if (e.target === modal) {
              closeModal(modal.id);
            }
          });
        });

        // Close modal on Escape key
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape') {
            document.querySelectorAll('.profile-modal.show').forEach(modal => {
              closeModal(modal.id);
            });
          }
        });

        // Edit Profile Menu - Find by icon text
        document.querySelectorAll('.settings-menu-item').forEach((item) => {
          const icon = item.querySelector('.material-symbols-outlined');
          if (!icon) return;
          
          const iconText = icon.textContent.trim();
          
          if (iconText === 'person') {
            // Edit Profile
            item.addEventListener('click', () => {
              const user = firebase?.auth()?.currentUser;
              if (user) {
                const nameInput = document.getElementById('edit-profile-name');
                const emailInput = document.getElementById('edit-profile-email');
                if (nameInput) nameInput.value = user.displayName || '';
                if (emailInput) emailInput.value = user.email || '';
              }
              openModal('profile-edit-modal');
            });
          } else if (iconText === 'notifications') {
            // Notifications
            item.addEventListener('click', () => openModal('profile-notifications-modal'));
          } else if (iconText === 'lock') {
            // Privacy
            item.addEventListener('click', () => openModal('profile-privacy-modal'));
          } else if (iconText === 'language') {
            // Language
            item.addEventListener('click', () => openModal('profile-language-modal'));
          } else if (iconText === 'help_center') {
            // Help Center
            item.addEventListener('click', () => openModal('profile-help-modal'));
          } else if (iconText === 'forum') {
            // Contact Support
            item.addEventListener('click', () => openModal('profile-contact-modal'));
          } else if (iconText === 'star') {
            // Rate App
            item.addEventListener('click', () => openModal('profile-rate-modal'));
          }
        });

        // Edit Profile Form Submit
        const editProfileForm = document.getElementById('profile-edit-form');
        if (editProfileForm) {
          editProfileForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const name = document.getElementById('edit-profile-name').value;
            const bio = document.getElementById('edit-profile-bio').value;

            if (firebase?.auth) {
              const user = firebase.auth().currentUser;
              if (user) {
                try {
                  await user.updateProfile({ displayName: name });
                  if (bio) {
                    // Save bio to database
                    if (firebase.database) {
                      await firebase.database().ref(`users/${user.uid}/bio`).set(bio);
                    }
                  }
                  showProfileToast('Profil berhasil diperbarui!');
                  closeModal('profile-edit-modal');
                  // Reload profile data
                  initProfilePage();
                } catch (error) {
                  console.error('Error updating profile:', error);
                  showProfileToast('Gagal memperbarui profil');
                }
              }
            } else {
              showProfileToast('Profil berhasil diperbarui!');
              closeModal('profile-edit-modal');
            }
          });
        }

        // Save Notifications
        const saveNotificationsBtn = document.getElementById('save-notifications');
        if (saveNotificationsBtn) {
          saveNotificationsBtn.addEventListener('click', () => {
            const settings = {
              push: document.getElementById('notif-push').checked,
              health: document.getElementById('notif-health').checked,
              daily: document.getElementById('notif-daily').checked,
              updates: document.getElementById('notif-updates').checked
            };
            localStorage.setItem('notification-settings', JSON.stringify(settings));
            showProfileToast('Pengaturan notifikasi disimpan!');
            closeModal('profile-notifications-modal');
          });
        }

        // Load notification settings
        const savedNotifSettings = localStorage.getItem('notification-settings');
        if (savedNotifSettings) {
          try {
            const settings = JSON.parse(savedNotifSettings);
            if (document.getElementById('notif-push')) document.getElementById('notif-push').checked = settings.push;
            if (document.getElementById('notif-health')) document.getElementById('notif-health').checked = settings.health;
            if (document.getElementById('notif-daily')) document.getElementById('notif-daily').checked = settings.daily;
            if (document.getElementById('notif-updates')) document.getElementById('notif-updates').checked = settings.updates;
          } catch (e) {}
        }

        // Change Password
        const changePasswordBtn = document.getElementById('change-password-btn');
        if (changePasswordBtn) {
          changePasswordBtn.addEventListener('click', async () => {
            const newPassword = document.getElementById('profile-new-password').value;
            const confirmPassword = document.getElementById('profile-confirm-password').value;

            if (!newPassword || !confirmPassword) {
              alert('Mohon isi semua field password');
              return;
            }

            if (newPassword !== confirmPassword) {
              alert('Password tidak cocok!');
              return;
            }

            if (newPassword.length < 6) {
              alert('Password minimal 6 karakter');
              return;
            }

            if (firebase?.auth) {
              const user = firebase.auth().currentUser;
              if (user) {
                try {
                  await user.updatePassword(newPassword);
                  showProfileToast('Password berhasil diubah!');
                  document.getElementById('profile-new-password').value = '';
                  document.getElementById('profile-confirm-password').value = '';
                } catch (error) {
                  console.error('Error changing password:', error);
                  alert('Gagal mengubah password: ' + error.message);
                }
              }
            } else {
              showProfileToast('Password berhasil diubah!');
            }
          });
        }

        // Save Privacy Settings
        const savePrivacyBtn = document.getElementById('save-privacy');
        if (savePrivacyBtn) {
          savePrivacyBtn.addEventListener('click', () => {
            const privacy = {
              public: document.getElementById('privacy-public').checked,
              anonymous: document.getElementById('privacy-anonymous').checked
            };
            localStorage.setItem('privacy-settings', JSON.stringify(privacy));
            showProfileToast('Pengaturan privasi disimpan!');
            closeModal('profile-privacy-modal');
          });
        }

        // Language Selection
        document.querySelectorAll('.language-option').forEach(option => {
          option.addEventListener('click', () => {
            document.querySelectorAll('.language-option').forEach(opt => opt.classList.remove('active'));
            option.classList.add('active');
            const lang = option.getAttribute('data-lang');
            localStorage.setItem('app-language', lang);
            showProfileToast('Bahasa berhasil diubah!');
            setTimeout(() => closeModal('profile-language-modal'), 1000);
          });
        });

        // Load saved language
        const savedLang = localStorage.getItem('app-language') || 'id';
        document.querySelectorAll('.language-option').forEach(opt => {
          if (opt.getAttribute('data-lang') === savedLang) {
            opt.classList.add('active');
          }
        });

        // Open AI Chat Support
        const openAIChatBtn = document.getElementById('open-ai-chat-support');
        if (openAIChatBtn) {
          openAIChatBtn.addEventListener('click', () => {
            closeModal('profile-contact-modal');
            navigateToPage('ai-chat');
          });
        }

        // Submit Rating
        let selectedRating = 0;
        document.querySelectorAll('.rate-star').forEach((star, index) => {
          star.addEventListener('click', () => {
            selectedRating = index + 1;
            document.querySelectorAll('.rate-star').forEach((s, i) => {
              s.classList.toggle('active', i < selectedRating);
            });
          });
        });

        const submitRatingBtn = document.getElementById('submit-rating');
        if (submitRatingBtn) {
          submitRatingBtn.addEventListener('click', () => {
            if (selectedRating === 0) {
              alert('Pilih rating terlebih dahulu!');
              return;
            }

            const feedback = document.getElementById('rate-feedback').value;
            const ratingData = {
              rating: selectedRating,
              feedback: feedback,
              timestamp: Date.now()
            };

            // Save to Firebase if available
            if (firebase?.database) {
              firebase.database().ref('app_ratings').push(ratingData);
            }

            showProfileToast('Terima kasih atas rating Anda!');
            closeModal('profile-rate-modal');
            
            // Reset form
            selectedRating = 0;
            document.querySelectorAll('.rate-star').forEach(s => s.classList.remove('active'));
            document.getElementById('rate-feedback').value = '';
          });
        }

        // Terms & Privacy Links
        document.getElementById('profile-terms-link')?.addEventListener('click', (e) => {
          e.preventDefault();
          alert('Syarat & Ketentuan:\n\n1. Pengguna bertanggung jawab atas data yang diinput\n2. Data kesehatan disimpan dengan aman\n3. Tidak ada data yang dibagikan ke pihak ketiga tanpa izin\n4. Pengguna dapat menghapus data kapan saja');
        });

        document.getElementById('profile-privacy-link')?.addEventListener('click', (e) => {
          e.preventDefault();
          alert('Kebijakan Privasi:\n\n1. Data Anda dienkripsi dan disimpan dengan aman\n2. Kami tidak menjual data ke pihak ketiga\n3. Anda memiliki kontrol penuh atas data Anda\n4. Data dapat dihapus kapan saja melalui pengaturan');
        });

        // Achievement items click
        document.querySelectorAll('.achievement-item').forEach(item => {
          item.addEventListener('click', () => {
            const label = item.querySelector('.achievement-label')?.textContent;
            if (item.classList.contains('achievement-locked')) {
              alert(`Pencapaian "${label}" belum terbuka. Lanjutkan menggunakan CareRing untuk membuka pencapaian ini!`);
            } else {
              alert(`Pencapaian "${label}" berhasil dicapai! ğŸ‰`);
            }
          });
        });

        // Health Summary click - Find by icon
        document.querySelectorAll('.profile-card').forEach(card => {
          const healthIcon = card.querySelector('.material-symbols-outlined');
          if (healthIcon && healthIcon.textContent.trim() === 'health_and_safety') {
            card.style.cursor = 'pointer';
            card.addEventListener('click', () => {
              navigateToPage('home');
            });
          }
        });

        console.log('âœ… Profile page menus initialized');
      }

      /**
       * Initialize Kuisioner page
       */
      function initKuisionerPage() {
        console.log('ğŸ”§ Initializing Kuisioner page...');

        // Get form elements
        const form = document.getElementById('questionnaireForm');
        const submitBtn = document.getElementById('submitBtn');
        const successMessage = document.getElementById('successMessage');
        const formContainer = form?.parentElement;
        const progressBar = document.getElementById('progress-bar-fill');
        const progressPercentage = document.getElementById('progress-percentage');

        // Function to update progress bar
        function updateProgress() {
          const totalFields = 11; // Total required fields
          let filledFields = 0;

          // Check text inputs
          if (document.getElementById('name')?.value) filledFields++;
          if (document.getElementById('email')?.value) filledFields++;
          if (document.getElementById('age')?.value) filledFields++;
          if (document.getElementById('usageDuration')?.value) filledFields++;
          
          // Check rating buttons
          if (document.getElementById('appEase')?.value) filledFields++;
          if (document.getElementById('appUI')?.value) filledFields++;
          if (document.getElementById('ringComfort')?.value) filledFields++;
          if (document.getElementById('ringAccuracy')?.value) filledFields++;
          if (document.getElementById('nps')?.value) filledFields++;
          
          // Check radio buttons
          if (document.querySelector('input[name="batteryLife"]:checked')) filledFields++;
          if (document.querySelector('input[name="bleIssue"]:checked')) filledFields++;

          const percentage = Math.round((filledFields / totalFields) * 100);
          
          if (progressBar) progressBar.style.width = percentage + '%';
          if (progressPercentage) progressPercentage.textContent = percentage + '%';
        }

        // Rating buttons handler (modern version)
        document.querySelectorAll('.rating-btn-modern, .nps-btn').forEach(btn => {
          btn.addEventListener('click', function(e) {
            e.preventDefault();
            const ratingGroup = this.dataset.rating;
            const value = this.dataset.value;

            // Remove selected class from siblings
            document.querySelectorAll(`[data-rating="${ratingGroup}"]`).forEach(b => {
              b.classList.remove('selected');
            });

            // Add selected class to clicked button
            this.classList.add('selected');

            // Update hidden input - convert rating group name from kebab-case to camelCase
            const inputId = ratingGroup.replace(/-([a-z])/g, (g) => g[1].toUpperCase());
            const hiddenInput = document.getElementById(inputId);
            if (hiddenInput) {
              hiddenInput.value = value;
            }

            // Update progress
            updateProgress();
          });
        });

        // Add input listeners for progress tracking
        document.querySelectorAll('#questionnaireForm input, #questionnaireForm select').forEach(input => {
          input.addEventListener('change', updateProgress);
          input.addEventListener('input', updateProgress);
        });

        // Form submission handler
        if (form) {
          form.addEventListener('submit', async (e) => {
            e.preventDefault();

            const currentSubmitBtn = document.getElementById('submitBtn');
            if (currentSubmitBtn) {
              currentSubmitBtn.disabled = true;
              currentSubmitBtn.innerHTML = '<span class="material-symbols-outlined">hourglass_empty</span> Mengirim...';
            }

            // Collect form data
            const formData = {
              // Personal Info
              name: document.getElementById('name')?.value || '',
              email: document.getElementById('email')?.value || '',
              age: document.getElementById('age')?.value || '',
              usageDuration: document.getElementById('usageDuration')?.value || '',

              // App Experience
              appEase: document.getElementById('appEase')?.value || '',
              appFeatures: Array.from(document.querySelectorAll('input[name="appFeatures"]:checked')).map(cb => cb.value),
              appUI: document.getElementById('appUI')?.value || '',

              // Smartring Experience
              ringComfort: document.getElementById('ringComfort')?.value || '',
              ringAccuracy: document.getElementById('ringAccuracy')?.value || '',
              batteryLife: document.querySelector('input[name="batteryLife"]:checked')?.value || '',
              bleIssue: document.querySelector('input[name="bleIssue"]:checked')?.value || '',

              // Overall Satisfaction
              nps: document.getElementById('nps')?.value || '',
              feedback: document.getElementById('feedback')?.value || '',

              // Metadata
              timestamp: Date.now(),
              submittedAt: new Date().toISOString()
            };

            try {
              // Save to Firebase
              if (firebase && firebase.database) {
                const questionnairesRef = firebase.database().ref('questionnaires');
                await questionnairesRef.push(formData);

                console.log('âœ… Kuisioner berhasil dikirim');

                // Hide form and show success message
                const questionnaireForm = document.getElementById('questionnaireForm');
                const formActions = document.querySelector('.form-actions');
                const successMsg = document.getElementById('successMessage');
                
                if (questionnaireForm) questionnaireForm.style.display = 'none';
                if (formActions) formActions.style.display = 'none';
                if (successMsg) successMsg.classList.add('show');

                // Scroll to top to see success message
                window.scrollTo({ top: 0, behavior: 'smooth' });
              } else {
                throw new Error('Firebase belum tersedia');
              }
            } catch (error) {
              console.error('âŒ Error mengirim kuisioner:', error);
              alert('Gagal mengirim kuisioner: ' + error.message);

              if (currentSubmitBtn) {
                currentSubmitBtn.disabled = false;
                currentSubmitBtn.innerHTML = '<span class="material-symbols-outlined">send</span> Kirim Kuisioner';
              }
            }
          });
        }

        // Initialize progress on page load
        updateProgress();
      }

      /**
       * Initialize Forum page
       */
      function initForumPage() {
        console.log('ğŸ”§ Initializing Forum page...');

        // Forum data
        const forumThreads = {
          'hipotermia': {
            id: 'hipotermia',
            author: 'Erico Varel',
            authorImg: 'https://ui-avatars.com/api/?name=Erico+Varel&background=4a90e2&color=fff&size=128',
            time: '2 jam lalu',
            category: 'health',
            categoryLabel: 'Kesehatan',
            title: 'Apa itu Hipotermia dan Bagaimana Cara Mencegahnya?',
            content: `<p>Saya ingin tahu lebih lanjut tentang hipotermia, terutama bagaimana cara mendeteksi dan mencegahnya pada lansia.</p>
              <p>Orang tua saya berusia 70 tahun dan sering merasa kedinginan. Apakah ini normal atau perlu diwaspadai?</p>
              <p>Beberapa pertanyaan saya:</p>
              <p>1. Apa saja gejala awal hipotermia?</p>
              <p>2. Pada suhu berapa tubuh dianggap mengalami hipotermia?</p>
              <p>3. Bagaimana CareRing bisa membantu mendeteksi hipotermia?</p>`,
            views: 89,
            likes: 5,
            replies: [
              {
                author: 'Ahmad',
                authorImg: 'https://ui-avatars.com/api/?name=Ahmad&background=27AE60&color=fff&size=64',
                text: 'Hipotermia terjadi ketika suhu tubuh turun di bawah 35Â°C. Gejalanya bisa berupa menggigil, bicara cadel, dan kebingungan.',
                time: '1 jam lalu',
                likes: 3
              },
              {
                author: 'Dr. Sarah',
                authorImg: 'https://ui-avatars.com/api/?name=Dr+Sarah&background=9B59B6&color=fff&size=64',
                text: 'Untuk lansia, sangat penting untuk menjaga suhu ruangan di atas 20Â°C. CareRing dapat membantu dengan monitoring suhu tubuh 24/7.',
                time: '45 menit lalu',
                likes: 8
              }
            ]
          },
          'sensor-carering': {
            id: 'sensor-carering',
            author: 'Siti Rahayu',
            authorImg: 'https://ui-avatars.com/api/?name=Siti+Rahayu&background=E74C3C&color=fff&size=128',
            time: '5 jam lalu',
            category: 'device',
            categoryLabel: 'Perangkat',
            title: 'Tips Merawat Sensor CareRing Agar Awet',
            content: `<p>Sharing pengalaman saya dalam merawat sensor CareRing selama 6 bulan terakhir.</p>
              <p>Beberapa tips yang saya terapkan:</p>
              <p>1. Bersihkan sensor setiap hari dengan kain lembut</p>
              <p>2. Hindari terkena air saat charging</p>
              <p>3. Simpan di tempat kering saat tidak digunakan</p>
              <p>4. Kalibrasi ulang setiap 2 minggu</p>
              <p>Hasilnya? Sensor masih akurat dan baterai awet!</p>`,
            views: 124,
            likes: 15,
            replies: [
              {
                author: 'Budi',
                authorImg: 'https://ui-avatars.com/api/?name=Budi&background=F39C12&color=fff&size=64',
                text: 'Terima kasih tipsnya! Saya juga menambahkan tips: jangan pakai saat olahraga berat yang banyak keringat.',
                time: '3 jam lalu',
                likes: 5
              }
            ]
          },
          'spo2': {
            id: 'spo2',
            author: 'Dr. Andi Kurniawan',
            authorImg: 'https://ui-avatars.com/api/?name=Dr+Andi&background=9B59B6&color=fff&size=128',
            time: '1 hari lalu',
            category: 'tips',
            categoryLabel: 'Tips & Trik',
            title: 'Cara Membaca Data SpO2 dengan Benar',
            content: `<p>Sebagai tenaga medis, saya ingin berbagi informasi tentang cara membaca dan menginterpretasi data saturasi oksigen (SpO2).</p>
              <p><strong>Nilai Normal SpO2:</strong></p>
              <p>â€¢ 95-100%: Normal</p>
              <p>â€¢ 90-94%: Perlu perhatian</p>
              <p>â€¢ Di bawah 90%: Segera ke dokter</p>
              <p><strong>Faktor yang mempengaruhi pembacaan:</strong></p>
              <p>â€¢ Posisi jari pada sensor</p>
              <p>â€¢ Suhu tangan (jangan terlalu dingin)</p>
              <p>â€¢ Cat kuku (bisa mengganggu pembacaan)</p>
              <p>â€¢ Gerakan saat pengukuran</p>`,
            views: 456,
            likes: 42,
            replies: [
              {
                author: 'Putri',
                authorImg: 'https://ui-avatars.com/api/?name=Putri&background=3498DB&color=fff&size=64',
                text: 'Sangat informatif, Dok! Apakah nilai SpO2 yang normal berbeda untuk penderita asma?',
                time: '20 jam lalu',
                likes: 2
              },
              {
                author: 'Dr. Andi Kurniawan',
                authorImg: 'https://ui-avatars.com/api/?name=Dr+Andi&background=9B59B6&color=fff&size=64',
                text: 'Untuk penderita asma, nilai normal tetap 95-100%. Namun saat serangan, bisa turun. Jika di bawah 92%, segera gunakan inhaler dan konsultasi dokter.',
                time: '18 jam lalu',
                likes: 12
              }
            ]
          }
        };

        // Get DOM elements
        const fabBtn = document.getElementById('forum-fab-btn');
        const createModal = document.getElementById('forum-create-modal');
        const createClose = document.getElementById('forum-create-close');
        const createCancel = document.getElementById('forum-create-cancel');
        const createForm = document.getElementById('forum-create-form');
        const detailModal = document.getElementById('forum-detail-modal');
        const detailClose = document.getElementById('forum-detail-close');
        const detailBack = document.getElementById('forum-detail-back');
        const replyForm = document.getElementById('forum-reply-form');
        const forumToast = document.getElementById('forum-toast');
        const threadCards = document.querySelectorAll('.thread-card');

        // Show toast message
        function showToast(message) {
          const toastMsg = document.getElementById('forum-toast-message');
          if (toastMsg) toastMsg.textContent = message;
          if (forumToast) {
            forumToast.classList.add('show');
            setTimeout(() => forumToast.classList.remove('show'), 3000);
          }
        }

        // Open create modal
        if (fabBtn) {
          fabBtn.addEventListener('click', () => {
            if (createModal) {
              createModal.classList.add('show');
              document.body.style.overflow = 'hidden';
            }
          });
        }

        // Close create modal
        function closeCreateModal() {
          if (createModal) {
            createModal.classList.remove('show');
            document.body.style.overflow = '';
            if (createForm) createForm.reset();
          }
        }

        if (createClose) createClose.addEventListener('click', closeCreateModal);
        if (createCancel) createCancel.addEventListener('click', closeCreateModal);

        // Handle create form submit
        if (createForm) {
          createForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const title = document.getElementById('forum-post-title')?.value;
            const category = document.getElementById('forum-post-category')?.value;
            const content = document.getElementById('forum-post-content')?.value;

            // In real app, save to Firebase
            console.log('ğŸ“ New forum post:', { title, category, content });

            // Save to Firebase if available
            if (typeof firebase !== 'undefined' && firebase.database) {
              try {
                const user = firebase.auth().currentUser;
                const postData = {
                  title,
                  category,
                  content,
                  author: user?.displayName || 'Anonymous',
                  authorEmail: user?.email || '',
                  timestamp: Date.now(),
                  views: 0,
                  likes: 0,
                  replies: []
                };
                await firebase.database().ref('forum_posts').push(postData);
                showToast('Diskusi berhasil diposting!');
              } catch (error) {
                console.error('Error posting:', error);
                showToast('Diskusi berhasil diposting!'); // Show success anyway for demo
              }
            } else {
              showToast('Diskusi berhasil diposting!');
            }

            closeCreateModal();
          });
        }

        // Open detail modal
        function openDetailModal(threadKey) {
          const thread = forumThreads[threadKey];
          if (!thread || !detailModal) return;

          // Populate detail modal
          document.getElementById('forum-detail-avatar').src = thread.authorImg;
          document.getElementById('forum-detail-author-name').textContent = thread.author;
          document.getElementById('forum-detail-time').textContent = thread.time;
          document.getElementById('forum-detail-category').textContent = thread.categoryLabel;
          document.getElementById('forum-detail-category').className = 'thread-category ' + thread.category;
          document.getElementById('forum-detail-title').textContent = thread.title;
          document.getElementById('forum-detail-content').innerHTML = thread.content;
          document.getElementById('forum-detail-views').textContent = thread.views;
          document.getElementById('forum-detail-likes').textContent = thread.likes;
          document.getElementById('forum-replies-count').textContent = thread.replies.length;

          // Populate replies
          const repliesList = document.getElementById('forum-replies-list');
          if (repliesList) {
            repliesList.innerHTML = thread.replies.map(reply => `
              <div class="reply-item">
                <img src="${reply.authorImg}" alt="${reply.author}" class="reply-avatar">
                <div class="reply-content">
                  <span class="reply-author">${reply.author}</span>
                  <p class="reply-text">${reply.text}</p>
                  <span class="reply-time">${reply.time}</span>
                  <div class="reply-actions">
                    <button class="reply-action">
                      <span class="material-symbols-outlined">thumb_up</span>
                      ${reply.likes}
                    </button>
                    <button class="reply-action">
                      <span class="material-symbols-outlined">reply</span>
                      Balas
                    </button>
                  </div>
                </div>
              </div>
            `).join('');
          }

          detailModal.classList.add('show');
          document.body.style.overflow = 'hidden';
        }

        // Close detail modal
        function closeDetailModal() {
          if (detailModal) {
            detailModal.classList.remove('show');
            document.body.style.overflow = '';
          }
        }

        if (detailClose) detailClose.addEventListener('click', closeDetailModal);
        if (detailBack) detailBack.addEventListener('click', closeDetailModal);

        // Thread card clicks
        const threadKeys = ['hipotermia', 'sensor-carering', 'spo2'];
        threadCards.forEach((card, index) => {
          card.addEventListener('click', () => {
            const threadKey = threadKeys[index] || 'hipotermia';
            openDetailModal(threadKey);
          });
        });

        // Handle reply submit
        if (replyForm) {
          replyForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const replyText = document.getElementById('forum-reply-text')?.value;
            
            if (replyText && replyText.trim()) {
              // Add reply to list
              const repliesList = document.getElementById('forum-replies-list');
              const user = firebase?.auth()?.currentUser;
              const userName = user?.displayName || 'Anda';
              
              const newReply = document.createElement('div');
              newReply.className = 'reply-item';
              newReply.innerHTML = `
                <img src="https://ui-avatars.com/api/?name=${encodeURIComponent(userName)}&background=FF8400&color=fff&size=64" alt="${userName}" class="reply-avatar">
                <div class="reply-content">
                  <span class="reply-author">${userName}</span>
                  <p class="reply-text">${replyText}</p>
                  <span class="reply-time">Baru saja</span>
                  <div class="reply-actions">
                    <button class="reply-action">
                      <span class="material-symbols-outlined">thumb_up</span>
                      0
                    </button>
                    <button class="reply-action">
                      <span class="material-symbols-outlined">reply</span>
                      Balas
                    </button>
                  </div>
                </div>
              `;
              
              if (repliesList) {
                repliesList.appendChild(newReply);
              }

              // Update reply count
              const countEl = document.getElementById('forum-replies-count');
              if (countEl) {
                countEl.textContent = parseInt(countEl.textContent) + 1;
              }

              // Clear input
              document.getElementById('forum-reply-text').value = '';
              showToast('Balasan berhasil dikirim!');
            }
          });
        }

        // Like button
        const likeBtn = document.getElementById('forum-like-btn');
        if (likeBtn) {
          likeBtn.addEventListener('click', function() {
            this.classList.toggle('liked');
            const likesEl = document.getElementById('forum-detail-likes');
            if (likesEl) {
              let likes = parseInt(likesEl.textContent);
              likesEl.textContent = this.classList.contains('liked') ? likes + 1 : likes - 1;
            }
          });
        }

        // Close modals on background click
        if (createModal) {
          createModal.addEventListener('click', (e) => {
            if (e.target === createModal) closeCreateModal();
          });
        }
        if (detailModal) {
          detailModal.addEventListener('click', (e) => {
            if (e.target === detailModal) closeDetailModal();
          });
        }

        console.log('âœ… Forum page initialized');
      }

      /**
       * Setup navigation listeners
       */
      function setupNavigation() {
        // Bottom navigation clicks
        document.querySelectorAll('[data-navigate]').forEach(element => {
          element.addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();

            // Haptic feedback for mobile devices (subtle)
            if (window.navigator && window.navigator.vibrate) {
              window.navigator.vibrate(5);
            }

            const pageName = element.getAttribute('data-navigate');
            navigateToPage(pageName);
          });
        });

        // Handle browser back/forward
        window.addEventListener('hashchange', () => {
          const hash = window.location.hash.slice(1);
          if (hash && hash !== currentPage) {
            navigateToPage(hash);
          }
        });

        // Handle initial hash
        const initialHash = window.location.hash.slice(1);
        if (initialHash) {
          navigateToPage(initialHash);
        }
      }

      // Initialize router when DOM is ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => {
          setupNavigation();
          initializeIndicator();
        });
      } else {
        setupNavigation();
        initializeIndicator();
      }

      /**
       * Initialize sliding indicator on page load
       */
      function initializeIndicator() {
        setTimeout(() => {
          const activeNav = document.querySelector('.nav-item.active');
          if (activeNav) {
            moveIndicator(activeNav);
          }
        }, 500); // Delay to ensure nav items are rendered
      }

      // Expose navigateToPage globally
      window.navigateToPage = navigateToPage;

      console.log('âœ… SPA Router ready!');
    })();
  </script>

  <!-- Header Scroll Effect -->
  <script>
    (function() {
      'use strict';

      const header = document.querySelector('.app-header');
      let lastScrollY = window.scrollY;
      let ticking = false;

      function updateHeaderOnScroll() {
        const scrollY = window.scrollY;

        if (scrollY > 20) {
          header.classList.add('scrolled');
        } else {
          header.classList.remove('scrolled');
        }

        ticking = false;
      }

      function requestTick() {
        if (!ticking) {
          window.requestAnimationFrame(updateHeaderOnScroll);
          ticking = true;
        }
      }

      window.addEventListener('scroll', requestTick, { passive: true });

      console.log('âœ… Header scroll effect initialized');
    })();
  </script>

  <!-- News Page Functionality -->
  <script>
    (function() {
      'use strict';

      // Wait for DOM to be ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initNewsPage);
      } else {
        initNewsPage();
      }

      function initNewsPage() {
        // Category Filter Functionality
        const categoryButtons = document.querySelectorAll('.news-category-btn');
        const newsCards = document.querySelectorAll('.news-card');

        categoryButtons.forEach(button => {
          button.addEventListener('click', function() {
            const category = this.getAttribute('data-category');

            // Update active button
            categoryButtons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');

            // Filter news cards with smooth animation
            newsCards.forEach((card, index) => {
              const cardCategory = card.querySelector('.news-card-category');
              const cardCategoryClass = cardCategory ?
                Array.from(cardCategory.classList).find(cls =>
                  ['health', 'technology', 'research', 'tips'].includes(cls)
                ) : null;

              if (category === 'all' || cardCategoryClass === category) {
                // Reset animation and show card
                card.style.animation = 'none';
                setTimeout(() => {
                  card.style.display = 'flex';
                  card.style.animation = `fadeInUp 0.6s ease-out ${index * 0.1}s both`;
                }, 10);
              } else {
                // Hide card with fade out
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                setTimeout(() => {
                  card.style.display = 'none';
                }, 300);
              }
            });

            console.log(`ğŸ“° News filtered by category: ${category}`);
          });
        });

        // Bookmark Toggle Functionality
        const bookmarkButtons = document.querySelectorAll('.news-card-bookmark');

        bookmarkButtons.forEach(button => {
          button.addEventListener('click', function(e) {
            e.stopPropagation(); // Prevent card click event

            this.classList.toggle('active');
            const icon = this.querySelector('.material-symbols-outlined');

            if (this.classList.contains('active')) {
              // Bookmark added
              icon.style.fontVariationSettings = '"FILL" 1, "wght" 400, "GRAD" 0, "opsz" 24';
              console.log('ğŸ”– Article bookmarked');

              // Optional: Add to localStorage or backend
              // saveBookmark(articleId);
            } else {
              // Bookmark removed
              icon.style.fontVariationSettings = '"FILL" 0, "wght" 400, "GRAD" 0, "opsz" 24';
              console.log('ğŸ”– Bookmark removed');

              // Optional: Remove from localStorage or backend
              // removeBookmark(articleId);
            }
          });
        });

        // News Detail Modal Elements
        const newsModal = document.getElementById('news-detail-modal');
        const newsModalClose = document.getElementById('news-modal-close');
        const newsModalImage = document.getElementById('news-modal-image');
        const newsModalCategory = document.getElementById('news-modal-category');
        const newsModalTitle = document.getElementById('news-modal-title');
        const newsModalAuthorImg = document.getElementById('news-modal-author-img');
        const newsModalAuthorName = document.getElementById('news-modal-author-name');
        const newsModalDate = document.getElementById('news-modal-date');
        const newsModalContent = document.getElementById('news-modal-content');

        // News article content data (in real app, this would come from database)
        const newsArticles = {
          'featured': {
            image: 'https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?w=800&h=450&fit=crop',
            category: 'technology',
            categoryLabel: 'Teknologi',
            title: 'Inovasi AI dalam Monitoring Kesehatan Real-Time',
            authorImg: 'https://ui-avatars.com/api/?name=Dr+Sarah&background=4a90e2&color=fff&size=64',
            authorName: 'Dr. Sarah Johnson',
            date: '3 Jan 2025 â€¢ 5 min read',
            content: `
              <p>Teknologi kecerdasan buatan (AI) telah membawa revolusi besar dalam dunia kesehatan, khususnya dalam monitoring kesehatan secara real-time. Dengan kemampuan untuk menganalisis data dalam jumlah besar dengan kecepatan tinggi, AI mampu mendeteksi anomali kesehatan lebih cepat dan akurat dibandingkan metode konvensional.</p>
              <p>CareRing menggunakan algoritma machine learning canggih yang telah dilatih dengan jutaan data kesehatan untuk memberikan analisis yang presisi. Sistem ini dapat mengenali pola-pola yang mungkin tidak terlihat oleh mata manusia, memungkinkan deteksi dini berbagai kondisi kesehatan.</p>
              <p>Beberapa keunggulan AI dalam monitoring kesehatan meliputi:</p>
              <p>â€¢ <strong>Analisis 24/7</strong> - Sistem tidak pernah lelah dan selalu waspada</p>
              <p>â€¢ <strong>Personalisasi</strong> - Algoritma belajar dari pola unik setiap pengguna</p>
              <p>â€¢ <strong>Prediksi</strong> - Dapat memprediksi potensi masalah sebelum terjadi</p>
              <p>â€¢ <strong>Integrasi</strong> - Mudah terhubung dengan perangkat wearable modern</p>
              <p>Dengan perkembangan teknologi yang terus berlanjut, kita dapat mengharapkan inovasi-inovasi lebih lanjut yang akan membuat monitoring kesehatan semakin efektif dan terjangkau bagi semua orang.</p>
            `
          },
          'spo2': {
            image: 'https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=400&h=250&fit=crop',
            category: 'health',
            categoryLabel: 'Kesehatan',
            title: 'Pentingnya Monitoring SpO2 untuk Kesehatan Jantung',
            authorImg: 'https://ui-avatars.com/api/?name=Ahmad+Zaki&background=27AE60&color=fff&size=64',
            authorName: 'Ahmad Zaki',
            date: '2 hari lalu â€¢ 4 min',
            content: `
              <p>Saturasi oksigen dalam darah (SpO2) adalah salah satu parameter vital yang sangat penting untuk dipantau, terutama bagi mereka yang memiliki risiko gangguan kardiovaskular. SpO2 menunjukkan persentase hemoglobin dalam darah yang terikat dengan oksigen.</p>
              <p>Nilai SpO2 normal berada di kisaran 95-100%. Jika nilai SpO2 turun di bawah 95%, hal ini bisa menjadi tanda adanya masalah pernapasan atau kardiovaskular yang perlu segera ditangani.</p>
              <p><strong>Mengapa SpO2 Penting?</strong></p>
              <p>â€¢ Mendeteksi hipoksia (kekurangan oksigen) sejak dini</p>
              <p>â€¢ Memantau efektivitas terapi oksigen</p>
              <p>â€¢ Mengevaluasi fungsi paru-paru dan jantung</p>
              <p>â€¢ Penting untuk pasien COVID-19 dan penyakit pernapasan lainnya</p>
              <p>CareRing dilengkapi dengan sensor SpO2 yang dapat memantau saturasi oksigen Anda secara real-time, memberikan peringatan dini jika terdeteksi penurunan yang signifikan.</p>
            `
          },
          'wearable': {
            image: 'https://images.unsplash.com/photo-1530026405186-ed1f139313f8?w=400&h=250&fit=crop',
            category: 'technology',
            categoryLabel: 'Teknologi',
            title: 'Sensor Wearable: Masa Depan Healthcare',
            authorImg: 'https://ui-avatars.com/api/?name=Lisa+Chen&background=E74C3C&color=fff&size=64',
            authorName: 'Lisa Chen',
            date: '5 hari lalu â€¢ 6 min',
            content: `
              <p>Perangkat wearable telah mengalami perkembangan pesat dalam beberapa tahun terakhir. Kini, perangkat sekecil cincin dapat memantau lebih dari 10 parameter kesehatan secara bersamaan dengan akurasi yang tinggi.</p>
              <p>CareRing adalah contoh nyata evolusi teknologi wearable. Dengan desain yang ringkas dan nyaman dipakai 24 jam, perangkat ini mampu melakukan:</p>
              <p>â€¢ Monitoring detak jantung kontinyu</p>
              <p>â€¢ Pengukuran suhu tubuh presisi</p>
              <p>â€¢ Pemantauan saturasi oksigen (SpO2)</p>
              <p>â€¢ Deteksi aktivitas dan kualitas tidur</p>
              <p>â€¢ Analisis variabilitas detak jantung (HRV)</p>
              <p>Masa depan healthcare akan semakin personal dan preventif berkat teknologi wearable yang terus berkembang.</p>
            `
          },
          'hipotermia': {
            image: 'https://images.unsplash.com/photo-1576091160550-2173dba999ef?w=400&h=250&fit=crop',
            category: 'research',
            categoryLabel: 'Riset',
            title: 'Studi: Deteksi Dini Hipotermia pada Lansia',
            authorImg: 'https://ui-avatars.com/api/?name=Dr+Michael&background=9B59B6&color=fff&size=64',
            authorName: 'Dr. Michael Wong',
            date: '1 minggu lalu â€¢ 8 min',
            content: `
              <p>Penelitian terbaru yang dipublikasikan dalam Journal of Geriatric Medicine menunjukkan bahwa monitoring suhu tubuh kontinyu dapat mencegah hingga 70% kasus hipotermia pada lansia.</p>
              <p>Hipotermia pada lansia sering terjadi tanpa disadari karena kemampuan tubuh untuk merasakan perubahan suhu menurun seiring bertambahnya usia. Dengan pemantauan real-time, sistem dapat memberikan peringatan dini sebelum kondisi menjadi berbahaya.</p>
              <p><strong>Temuan Kunci Penelitian:</strong></p>
              <p>â€¢ 70% penurunan insiden hipotermia dengan monitoring kontinyu</p>
              <p>â€¢ Waktu respons medis 50% lebih cepat</p>
              <p>â€¢ Penurunan rawat inap terkait hipotermia sebesar 45%</p>
              <p>â€¢ Peningkatan kepuasan keluarga pasien</p>
              <p>CareRing mendukung monitoring suhu tubuh 24/7 dengan akurasi tinggi, menjadikannya pilihan tepat untuk menjaga kesehatan lansia.</p>
            `
          },
          'tips-jantung': {
            image: 'https://images.unsplash.com/photo-1505751172876-fa1923c5c528?w=400&h=250&fit=crop',
            category: 'tips',
            categoryLabel: 'Tips',
            title: '10 Tips Menjaga Kesehatan Jantung di Usia 50+',
            authorImg: 'https://ui-avatars.com/api/?name=Rina+Susanti&background=F39C12&color=fff&size=64',
            authorName: 'Rina Susanti',
            date: '2 minggu lalu â€¢ 5 min',
            content: `
              <p>Menjaga kesehatan jantung menjadi semakin penting seiring bertambahnya usia. Berikut adalah 10 tips praktis yang dapat Anda terapkan:</p>
              <p><strong>1. Olahraga Teratur</strong> - Minimal 30 menit aktivitas fisik sedang per hari</p>
              <p><strong>2. Pola Makan Sehat</strong> - Perbanyak sayur, buah, dan kurangi garam</p>
              <p><strong>3. Monitoring Rutin</strong> - Pantau tekanan darah dan detak jantung secara teratur</p>
              <p><strong>4. Kelola Stres</strong> - Praktikkan meditasi atau yoga</p>
              <p><strong>5. Tidur Cukup</strong> - 7-8 jam tidur berkualitas setiap malam</p>
              <p><strong>6. Berhenti Merokok</strong> - Rokok adalah musuh utama jantung</p>
              <p><strong>7. Batasi Alkohol</strong> - Konsumsi dalam batas wajar</p>
              <p><strong>8. Jaga Berat Badan</strong> - BMI ideal untuk kesehatan jantung optimal</p>
              <p><strong>9. Pemeriksaan Kesehatan</strong> - Check-up rutin minimal setahun sekali</p>
              <p><strong>10. Gunakan Teknologi</strong> - Manfaatkan wearable seperti CareRing untuk monitoring harian</p>
            `
          },
          'telemedicine': {
            image: 'https://images.unsplash.com/photo-1584362917165-526a968579e8?w=400&h=250&fit=crop',
            category: 'health',
            categoryLabel: 'Kesehatan',
            title: 'Manfaat Telemedicine untuk Pasien Jarak Jauh',
            authorImg: 'https://ui-avatars.com/api/?name=Budi+Santoso&background=3498DB&color=fff&size=64',
            authorName: 'Budi Santoso',
            date: '3 minggu lalu â€¢ 7 min',
            content: `
              <p>Telemedicine atau layanan kesehatan jarak jauh telah menjadi solusi penting, terutama bagi mereka yang tinggal di daerah terpencil atau memiliki keterbatasan mobilitas.</p>
              <p><strong>Keuntungan Telemedicine:</strong></p>
              <p>â€¢ Akses ke dokter spesialis tanpa harus bepergian jauh</p>
              <p>â€¢ Hemat waktu dan biaya transportasi</p>
              <p>â€¢ Konsultasi dari kenyamanan rumah</p>
              <p>â€¢ Rekam medis digital yang mudah diakses</p>
              <p>â€¢ Monitoring kesehatan real-time</p>
              <p>CareRing terintegrasi dengan platform telemedicine, memungkinkan dokter Anda untuk memantau data kesehatan Anda secara remote dan memberikan rekomendasi yang tepat sasaran.</p>
            `
          },
          'blockchain': {
            image: 'https://images.unsplash.com/photo-1542884748-2b87b36c6b90?w=400&h=250&fit=crop',
            category: 'technology',
            categoryLabel: 'Teknologi',
            title: 'Blockchain untuk Keamanan Data Medis',
            authorImg: 'https://ui-avatars.com/api/?name=Kevin+Tan&background=E67E22&color=fff&size=64',
            authorName: 'Kevin Tan',
            date: '1 bulan lalu â€¢ 10 min',
            content: `
              <p>Keamanan dan privasi data kesehatan menjadi perhatian utama di era digital. Teknologi blockchain menawarkan solusi revolusioner untuk menjaga integritas dan kerahasiaan data medis pasien.</p>
              <p><strong>Keunggulan Blockchain untuk Data Medis:</strong></p>
              <p>â€¢ <strong>Immutability</strong> - Data tidak dapat diubah atau dimanipulasi</p>
              <p>â€¢ <strong>Transparansi</strong> - Jejak akses data tercatat dengan jelas</p>
              <p>â€¢ <strong>Desentralisasi</strong> - Tidak ada single point of failure</p>
              <p>â€¢ <strong>Enkripsi</strong> - Data terenkripsi dengan standar keamanan tinggi</p>
              <p>â€¢ <strong>Interoperabilitas</strong> - Mudah berbagi data antar institusi kesehatan</p>
              <p>CareRing berkomitmen untuk mengadopsi teknologi keamanan terbaru demi melindungi data kesehatan Anda.</p>
            `
          }
        };

        // Function to open news modal
        function openNewsModal(articleKey) {
          const article = newsArticles[articleKey];
          if (!article) {
            console.error('Article not found:', articleKey);
            return;
          }

          // Populate modal with article data
          newsModalImage.src = article.image;
          newsModalCategory.textContent = article.categoryLabel;
          newsModalCategory.className = 'news-modal-category ' + article.category;
          newsModalTitle.textContent = article.title;
          newsModalAuthorImg.src = article.authorImg;
          newsModalAuthorName.textContent = article.authorName;
          newsModalDate.textContent = article.date;
          newsModalContent.innerHTML = article.content;

          // Show modal
          newsModal.classList.add('show');
          document.body.style.overflow = 'hidden';

          console.log('ğŸ“° Opened article:', article.title);
        }

        // Function to close news modal
        function closeNewsModal() {
          newsModal.classList.remove('show');
          document.body.style.overflow = '';
        }

        // Close modal on button click
        if (newsModalClose) {
          newsModalClose.addEventListener('click', closeNewsModal);
        }

        // Close modal on background click
        if (newsModal) {
          newsModal.addEventListener('click', function(e) {
            if (e.target === newsModal) {
              closeNewsModal();
            }
          });
        }

        // Close modal on Escape key
        document.addEventListener('keydown', function(e) {
          if (e.key === 'Escape' && newsModal.classList.contains('show')) {
            closeNewsModal();
          }
        });

        // Featured Article Click
        const featuredArticle = document.querySelector('.news-featured');
        if (featuredArticle) {
          featuredArticle.addEventListener('click', function() {
            openNewsModal('featured');
          });
        }

        // News Card Click (except bookmark button)
        const articleKeys = ['spo2', 'wearable', 'hipotermia', 'tips-jantung', 'telemedicine', 'blockchain'];
        newsCards.forEach((card, index) => {
          card.addEventListener('click', function(e) {
            // Don't trigger if clicking bookmark button
            if (e.target.closest('.news-card-bookmark')) {
              return;
            }

            const articleKey = articleKeys[index] || 'spo2';
            openNewsModal(articleKey);
          });
        });

        // Load More Button
        const loadMoreBtn = document.querySelector('.load-more-btn');
        if (loadMoreBtn) {
          loadMoreBtn.addEventListener('click', function() {
            this.disabled = true;
            this.innerHTML = '<span>Memuat...</span>';

            // Simulate loading more articles
            setTimeout(() => {
              console.log('ğŸ“° Loading more articles...');
              // Add logic to fetch and append more articles here
              // fetchMoreArticles().then(articles => appendArticles(articles));

              this.disabled = false;
              this.innerHTML = '<span>Muat Lebih Banyak</span><span class="material-symbols-outlined">expand_more</span>';
            }, 1000);
          });
        }

        console.log('âœ… News page functionality initialized');
      }
    })();
  </script>

  <!-- Service Worker & PWA Install -->
  <script>
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    //                    PWA INSTALL HANDLER
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    (function() {
      'use strict';

      let deferredPrompt = null;
      const installBanner = document.getElementById('pwa-install-banner');
      const installBtn = document.getElementById('pwa-install-btn');
      const installClose = document.getElementById('pwa-install-close');
      const installToast = document.getElementById('pwa-install-toast');

      // Check if already installed
      function isAppInstalled() {
        return window.matchMedia('(display-mode: standalone)').matches ||
               window.navigator.standalone === true ||
               document.referrer.includes('android-app://');
      }

      // Check if install was dismissed recently (within 7 days)
      function wasRecentlyDismissed() {
        const dismissed = localStorage.getItem('pwa-install-dismissed');
        if (!dismissed) return false;
        const dismissedTime = parseInt(dismissed, 10);
        const sevenDays = 7 * 24 * 60 * 60 * 1000;
        return Date.now() - dismissedTime < sevenDays;
      }

      // Show install banner
      function showInstallBanner() {
        if (installBanner && !isAppInstalled() && !wasRecentlyDismissed()) {
          setTimeout(() => {
            installBanner.classList.add('show');
            console.log('ğŸ“± PWA install banner shown');
          }, 3000); // Show after 3 seconds
        }
      }

      // Hide install banner
      function hideInstallBanner() {
        if (installBanner) {
          installBanner.classList.remove('show');
        }
      }

      // Show success toast
      function showInstallToast() {
        if (installToast) {
          installToast.classList.add('show');
          setTimeout(() => {
            installToast.classList.remove('show');
          }, 3000);
        }
      }

      // Check if iOS
      function isIOS() {
        return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
      }

      // Show iOS install instructions
      function showIOSInstructions() {
        // Create iOS instructions modal
        const iosModal = document.createElement('div');
        iosModal.className = 'pwa-ios-instructions show';
        iosModal.innerHTML = `
          <div class="pwa-ios-header">
            <span class="pwa-ios-title">Install CareRing</span>
            <button onclick="this.parentElement.parentElement.remove()" style="background:none;border:none;cursor:pointer;">
              <span class="material-symbols-outlined" style="font-size:24px;color:#999;">close</span>
            </button>
          </div>
          <ol class="pwa-ios-steps">
            <li class="pwa-ios-step">
              <span class="pwa-ios-step-number">1</span>
              <span class="pwa-ios-step-text">Tap tombol <span class="material-symbols-outlined">ios_share</span> Share di Safari</span>
            </li>
            <li class="pwa-ios-step">
              <span class="pwa-ios-step-number">2</span>
              <span class="pwa-ios-step-text">Scroll ke bawah dan pilih <strong>"Add to Home Screen"</strong></span>
            </li>
            <li class="pwa-ios-step">
              <span class="pwa-ios-step-number">3</span>
              <span class="pwa-ios-step-text">Tap <strong>"Add"</strong> untuk menginstall CareRing</span>
            </li>
          </ol>
        `;
        document.body.appendChild(iosModal);
        hideInstallBanner();
      }

      // Listen for beforeinstallprompt event
      window.addEventListener('beforeinstallprompt', (e) => {
        console.log('ğŸ“± beforeinstallprompt event fired');
        e.preventDefault();
        deferredPrompt = e;
        showInstallBanner();
      });

      // Install button click
      if (installBtn) {
        installBtn.addEventListener('click', async () => {
          if (isIOS()) {
            showIOSInstructions();
            return;
          }

          if (!deferredPrompt) {
            console.log('ğŸ“± No deferred prompt available');
            // Show manual instructions or redirect
            alert('Untuk menginstall: buka menu browser (â‹®) dan pilih "Install app" atau "Add to Home Screen"');
            return;
          }

          hideInstallBanner();

          // Show the install prompt
          deferredPrompt.prompt();

          // Wait for the user to respond
          const { outcome } = await deferredPrompt.userChoice;
          console.log('ğŸ“± User response:', outcome);

          if (outcome === 'accepted') {
            showInstallToast();
            console.log('ğŸ“± PWA installed successfully');
          }

          deferredPrompt = null;
        });
      }

      // Close button click
      if (installClose) {
        installClose.addEventListener('click', () => {
          hideInstallBanner();
          localStorage.setItem('pwa-install-dismissed', Date.now().toString());
          console.log('ğŸ“± Install banner dismissed');
        });
      }

      // Listen for app installed event
      window.addEventListener('appinstalled', () => {
        hideInstallBanner();
        showInstallToast();
        deferredPrompt = null;
        console.log('ğŸ“± PWA was installed');
      });

      // For iOS, show banner after a delay (since beforeinstallprompt doesn't fire)
      if (isIOS() && !isAppInstalled() && !wasRecentlyDismissed()) {
        setTimeout(() => {
          if (installBanner) {
            installBanner.classList.add('show');
          }
        }, 5000);
      }

      console.log('ğŸ“± PWA Install handler initialized');
    })();

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    //                    SERVICE WORKER REGISTRATION
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(registration => {
            console.log('âœ… ServiceWorker registered:', registration.scope);

            // Check for updates
            registration.addEventListener('updatefound', () => {
              const newWorker = registration.installing;
              console.log('ğŸ”„ Service Worker update found');

              newWorker.addEventListener('statechange', () => {
                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                  // New content available
                  console.log('ğŸ†• New content available, refresh to update');
                  
                  // Optional: Show update notification
                  if (confirm('Update tersedia! Muat ulang untuk memperbarui aplikasi?')) {
                    window.location.reload();
                  }
                }
              });
            });
          })
          .catch(error => {
            console.error('âŒ ServiceWorker registration failed:', error);
          });
      });
    }

    // Old code reference (kept for comparison):
    // if ('serviceWorker' in navigator) {
    //   window.addEventListener('load', () => {
    //     navigator.serviceWorker.register('/sw.js')
    //       .then(registration => {
    //         console.log('ServiceWorker registration successful: ', registration.scope);
    //       })
    //       .catch(error => {
    //         console.log('ServiceWorker registration failed: ', error);
    //       });
    //   });
    // }
  </script>

</body>
</html>
