<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Profil - CARERING</title>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#007BFF">

  <style>
    /* CSS untuk Halaman Profil */
    .profile-page-title {
      text-align: center;
      margin-bottom: 20px;
      font-size: 1.8em;
      color: #333;
    }
    .profile-card {
      background-color: #fff;
      border-radius: 20px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
      padding: 30px 20px;
      margin: 20px auto;
      text-align: center;
      max-width: 350px;
    }
    .profile-avatar-large {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background-color: #E6F2FF;
      color: #007BFF;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 20px auto;
      font-size: 40px;
      position: relative; /* Penting untuk posisi gambar */
      overflow: hidden; /* Agar gambar bulat */
    }
    .profile-card h3 {
      font-size: 1.5em;
      margin-bottom: 5px;
      color: #333;
      word-wrap: break-word;
    }
    .profile-card p {
      font-size: 0.9em;
      color: #777;
      margin-bottom: 25px;
      word-wrap: break-word;
    }
    .profile-detail-row {
      display: flex;
      justify-content: space-between;
      padding: 10px 0;
      border-top: 1px solid #eee;
      font-size: 0.95em;
      color: #555;
    }
    .profile-detail-row:last-child {
      border-bottom: 1px solid #eee;
      margin-bottom: 20px;
    }
    .profile-detail-label {
      font-weight: 500;
      color: #333;
    }
    .profile-detail-value {
      font-weight: 400;
      color: #777;
    }
    .profile-detail-value .status-loading {
      color: #888;
      font-style: italic;
    }
    .logout-btn-card {
      display: flex;
      align-items: center;
      background-color: #fff;
      border-radius: 20px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
      padding: 15px 20px;
      margin: 30px auto; /* Tambah margin atas */
      max-width: 350px;
      cursor: pointer;
      text-decoration: none;
      color: inherit;
    }
    .logout-btn-card .list-item-icon {
      background-color: #FFF0F0;
      color: #E74C3C;
      margin-right: 15px;
    }
    .logout-btn-card h3 {
      margin: 0;
      font-size: 1.1em;
      color: #E74C3C;
      flex-grow: 1;
      text-align: left;
    }

    /* ðŸ”¥ FIX WARNA ICON & TEKS FOOTER MENJADI KUNING ðŸ”¥ */
    /* Menimpa warna default biru menjadi kuning saat aktif atau di-hover */
    .bottom-nav .nav-item.active,
    .bottom-nav .nav-item:hover {
        color: #F1C40F !important; /* Warna Kuning Emas */
    }
    
    /* Target Icon secara spesifik */
    .bottom-nav .nav-item.active .nav-icon span,
    .bottom-nav .nav-item:hover .nav-icon span {
        color: #F1C40F !important;
    }

    /* Target Teks Label secara spesifik */
    .bottom-nav .nav-item.active .nav-label,
    .bottom-nav .nav-item:hover .nav-label {
        color: #F1C40F !important;
    }
  </style>
</head>
<body>
  <div class="mobile-wrapper">
    
    <header class="app-header">
      <div class="logo" style="cursor: pointer;" onclick="window.location.href='index.html'">
        <span class="logo-care">Care</span><span class="logo-ring">Ring</span>
      </div>
    </header>

    <!-- Tambahkan ID 'profile-container' agar script.js bisa mendeteksi halaman ini -->
    <main class="container" id="profile-container">
      
      <h2 class="profile-page-title">Profil</h2>

      <div class="profile-card">
        <div class="profile-avatar-large">
          <!-- 1. Foto Profil Google (Default hidden, muncul via script) -->
          <!-- onload: Jika gambar berhasil dimuat, tampilkan gambar & sembunyikan ikon -->
          <img id="profil-img" src="" alt="Foto Profil" 
               style="width: 100%; height: 100%; object-fit: cover; display: none;" 
               onload="this.style.display='block'; document.getElementById('profil-default-icon').style.display='none';">
          
          <!-- 2. Ikon Default (Akan disembunyikan jika foto ada) -->
          <span class="material-symbols-outlined" id="profil-default-icon">person</span>
        </div>
        
        <!-- Perbaiki ID agar sesuai dengan script.js (profil-nama, profil-email) -->
        <h3 id="profil-nama">Memuat...</h3> 
        <p id="profil-email">Memuat...</p>

        <div class="profile-detail-row">
          <span class="profile-detail-label">Perangkat Terhubung:</span>
          <span class="profile-detail-value">
            <span id="profile-device-lastseen" class="status-loading">ESP32-C3</span>
          </span>
        </div>
        <div class="profile-detail-row">
          <span class="profile-detail-label">Member Sejak:</span>
          <span class="profile-detail-value">2025</span>
        </div>
        <div class="profile-detail-row">
          <span class="profile-detail-label">Status Akun:</span>
          <span class="profile-detail-value" style="color: green; font-weight:600;">Aktif</span>
        </div>
      </div>

      <!-- Perbaiki ID logout menjadi 'btn-logout' -->
      <a href="#" class="logout-btn-card" id="btn-logout">
        <div class="list-item-icon">
          <span class="material-symbols-outlined">logout</span>
        </div>
        <h3>Keluar</h3>
        <span class="material-symbols-outlined list-item-chevron" style="color: #E74C3C;">chevron_right</span>
      </a>

    </main>

    <div class="bottom-nav">
      <div class="nav-item" onclick="window.location.href='index.html'">
        <div class="nav-icon"><span class="material-symbols-outlined">home</span></div>
        <div class="nav-label">Home</div>
      </div>
      <div class="nav-item" onclick="window.location.href='news.html'">
        <div class="nav-icon"><span class="material-symbols-outlined">newspaper</span></div>
        <div class="nav-label">News</div>
      </div>
      <div class="nav-item" onclick="window.location.href='perangkat.html'">
        <div class="nav-icon"><span class="material-symbols-outlined">devices</span></div>
        <div class="nav-label">Perangkat</div>
      </div>
      <div class="nav-item" onclick="window.location.href='ai-chat.html'">
        <div class="nav-icon"><span class="material-symbols-outlined">smart_toy</span></div>
        <div class="nav-label">AI Chat</div>
      </div>
      <div class="nav-item" onclick="window.location.href='forum.html'">
        <div class="nav-icon"><span class="material-symbols-outlined">forum</span></div>
        <div class="nav-label">Forum</div>
      </div>
      <div class="nav-item active" onclick="window.location.href='profil.html'">
        <div class="nav-icon"><span class="material-symbols-outlined">person</span></div>
        <div class="nav-label">Profil</div>
      </div>
    </div>
  </div>
  
  <!-- Script Firebase & Utama -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  
  <script src="script.js"></script>
  
  <!-- Script PWA -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(registration => {
            console.log('ServiceWorker registration successful: ', registration.scope);
          })
          .catch(error => {
            console.log('ServiceWorker registration failed: ', error);
          });
      });
    }
  </script>
</body>
</html>